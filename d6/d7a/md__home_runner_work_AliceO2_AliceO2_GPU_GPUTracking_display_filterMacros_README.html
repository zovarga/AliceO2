<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: Filtering tracks in the GPU event display using ROOT macros</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d6/d7a/md__home_runner_work_AliceO2_AliceO2_GPU_GPUTracking_display_filterMacros_README.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Filtering tracks in the GPU event display using <a class="el" href="../../d0/d10/namespaceROOT.html">ROOT</a> macros </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The event display can filter tracks using <a class="el" href="../../d0/d10/namespaceROOT.html">ROOT</a> macros. For the standalone version, you can provide a list of filter macros with the <code>--GLfilterMacros</code> option. In the DPL version, you can set a single filter macro via <code>--configKeyValues "GPU_global.gpuDisplayfilterMacro=[MACRO]"</code>. By pressing the <code>u</code> key in the event display, you can cycle through the loaded filters (and filter disabled). You can use the <a class="el" href="../../d0/d10/namespaceROOT.html">ROOT</a> <code>+</code> and <code>++</code> syntax for compiled macros. All macro files must be placed in the folder <code>displayTrackFilter</code> in the working directory. The macros should include <code>#include "GPUO2Interface.h"</code></p>
<p>The filter macro must implement a function with the following prototype: </p><div class="fragment"><div class="line">void gpuDisplayTrackFilter(std::vector&lt;bool&gt;* filter, const GPUTrackingInOutPointers* ioPtrs, const GPUConstantMem* processors)</div>
</div><!-- fragment --><p>This function is called once when the event display loads the data for an event / time frame. Here, <code>filter</code> is a vector of booleans indicating whether the track is shown or not. Default is all entries are <code>true</code> and no track is filtered. The current filter applies only to TPC tracks, and will filter matched ITS, TOF, and TRD tracks as well. It is not yet possible to filter ITS standalone tracks. Access to the track data goes via the <code>ioPtrs</code> structure. Note that when the input to the event display is GPU tracks, use <code>ioPtrs-&gt;mergedTracks</code> while when the input are final TPC tracks, <code>ioPtrs-&gt;outputTracksTPCO2</code> must be used.</p>
<p>Note that since most GPU classes have no <a class="el" href="../../d0/d10/namespaceROOT.html">ROOT</a> dictionary, it might be required to use the macro in compiled mode.</p>
<p>If the event display runs with the tracking (i.e. not via the separate DPL device but in the same executable as the tracking), the filter has access to all internal data structures of the tracker via the <code>processors</code> parameter.</p>
<p>Some example filter macros are placed in O2 in <code>GPU/GPUTracking/display/filterMacros</code>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Feb 14 2022 05:41:08 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
