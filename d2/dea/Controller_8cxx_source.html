<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: /home/runner/work/AliceO2/AliceO2/Detectors/Align/src/Controller.cxx Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d2/dea/Controller_8cxx_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Controller.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d2/dea/Controller_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2019-2020 CERN and copyright holders of ALICE O2.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// See https://alice-o2.web.cern.ch/copyright for details of the copyright holders.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// All rights not expressly granted are reserved.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This software is distributed under the terms of the GNU General Public</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License v3 (GPL Version 3), copied verbatim in the file &quot;COPYING&quot;.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// In applying this license CERN does not waive the privileges and immunities</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// granted to it by virtue of its status as an Intergovernmental Organization</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// or submit itself to any jurisdiction.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d4a/Controller_8h.html">Align/Controller.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/da7/AlignConfig_8h.html">Align/AlignConfig.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/da4/Logger_8h.html">Framework/Logger.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d56/Detectors_2Align_2include_2Align_2utils_8h.html">Align/utils.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d7a/AlignmentPoint_8h.html">Align/AlignmentPoint.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d66/AlignableDetector_8h.html">Align/AlignableDetector.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/db2/AlignableVolume_8h.html">Align/AlignableVolume.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d10/AlignableDetectorITS_8h.html">Align/AlignableDetectorITS.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//#include &quot;Align/AlignableDetectorTPC.h&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//#include &quot;Align/AlignableDetectorTRD.h&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">//#include &quot;Align/AlignableDetectorTOF.h&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d0f/EventVertex_8h.html">Align/EventVertex.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d73/ResidualsControllerFast_8h.html">Align/ResidualsControllerFast.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/d45/GeometricalConstraint_8h.html">Align/GeometricalConstraint.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d80/DOFStatistics_8h.html">Align/DOFStatistics.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">//#include &quot;AliTrackerBase.h&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//#include &quot;AliESDCosmicTrack.h&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">//#include &quot;AliESDtrack.h&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">//#include &quot;AliESDEvent.h&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">//#include &quot;AliESDVertex.h&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">//#include &quot;AliRecoParam.h&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">//#include &quot;AliCDBRunRange.h&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">//#include &quot;AliCDBManager.h&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">//#include &quot;AliCDBEntry.h&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d52/Common_2MathUtils_2include_2MathUtils_2Utils_8h.html">MathUtils/Utils.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;TMath.h&gt;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;TString.h&gt;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;TROOT.h&gt;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;TSystem.h&gt;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;TRandom.h&gt;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;TH1F.h&gt;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;TList.h&gt;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;cstdio&gt;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;TGeoGlobalMagField.h&gt;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d61/NameConf_8h.html">CommonUtils/NameConf.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d28/GRPObject_8h.html">DataFormatsParameters/GRPObject.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">using namespace </span>TMath;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../df/d72/namespaceo2_1_1align_1_1utils.html">o2::align::utils</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../d1/dea/namespaceo2_1_1dataformats.html">o2::dataformats</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../d3/dc3/namespaceo2_1_1globaltracking.html">o2::globaltracking</a>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">using</span> std::ifstream;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../d4/d7c/namespaceo2.html">o2</a></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../d2/d26/namespaceo2_1_1mch_1_1raw.html#a6e7ce7f181ce758ed3f6cb6b2b1edeab">align</a></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="../../d7/db0/structo2_1_1align_1_1Controller_1_1ProcStat.html#aa1b326e995a878bd79c5b716d9988157">   68</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a7cbebadb91aee9b6f8324a73cb94b455">Controller::ProcStat::print</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="comment">// TODO RS</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="comment">//  const Char_t* Controller::sStatClName[Controller::kNStatCl] = {&quot;Inp: &quot;, &quot;Acc: &quot;};</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">//  const Char_t* Controller::sStatName[Controller::kMaxStat] =</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">//  {&quot;runs&quot;, &quot;Ev.Coll&quot;, &quot;Ev.Cosm&quot;, &quot;Trc.Coll&quot;, &quot;Trc.Cosm&quot;};</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="keyword">const</span> Char_t* Controller::sMPDataExt = <span class="stringliteral">&quot;.mille&quot;</span>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="keyword">const</span> Char_t* Controller::sDetectorName[Controller::kNDetectors] = {<span class="stringliteral">&quot;ITS&quot;</span>, <span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;TRD&quot;</span>, <span class="stringliteral">&quot;TOF&quot;</span>, <span class="stringliteral">&quot;HMPID&quot;</span>}; <span class="comment">//RSREM</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">//const int Controller::mgkSkipLayers[Controller::kNLrSkip] = {AliGeomManager::kPHOS1, AliGeomManager::kPHOS2,</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">//                                                                 AliGeomManager::kMUON, AliGeomManager::kEMCAL}; TODO(milettri, shahoian): needs detector IDs previously stored in AliGeomManager</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> Controller::sSkipLayers[Controller::kNLrSkip] = {0, 0, 0, 0}; <span class="comment">// TODO(milettri, shahoian): needs AliGeomManager - remove this line after fix.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keyword">const</span> Char_t* Controller::sHStatName[Controller::kNHVars] = {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="stringliteral">&quot;Runs&quot;</span>, <span class="stringliteral">&quot;Ev.Inp&quot;</span>, <span class="stringliteral">&quot;Ev.VtxOK&quot;</span>, <span class="stringliteral">&quot;Tr.Inp&quot;</span>, <span class="stringliteral">&quot;Tr.2Fit&quot;</span>, <span class="stringliteral">&quot;Tr.2FitVC&quot;</span>, <span class="stringliteral">&quot;Tr.2PrMat&quot;</span>, <span class="stringliteral">&quot;Tr.2ResDer&quot;</span>, <span class="stringliteral">&quot;Tr.Stored&quot;</span>, <span class="stringliteral">&quot;Tr.Acc&quot;</span>, <span class="stringliteral">&quot;Tr.ContRes&quot;</span>};</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">//________________________________________________________________</span></div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ace6aabbbe7650339d59793b8179b3784">   89</a></span>&#160;Controller::Controller(<a class="code" href="../../de/d8a/classo2_1_1gpu_1_1gpustd_1_1bitset.html">DetID::mask_t</a> detmask)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  : mDetMask(detmask)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;{</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="comment">// def c-tor</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">//  SetOutCDBRunRange();   FIXME(milettri): needs OCDB</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a0e3e3185a2d4363a081a3dd382c88fe4">init</a>();</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">// run config macro if provided</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a78935b50c06ade47ed595198fc6b837b">getInitDOFsDone</a>()) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a6bcc82923aefa33e4efe6dc0c7f0e46c">initDOFs</a>();</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a031130d8f782241a15191f765e85669e">getNDOFs</a>()) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(fatal) &lt;&lt; <span class="stringliteral">&quot;No DOFs found, initialization failed&quot;</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">//________________________________________________________________</span></div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ad9506fcf9b7f93408c5c316ddfe81c2b">  107</a></span>&#160;<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ad9506fcf9b7f93408c5c316ddfe81c2b">Controller::~Controller</a>()</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;{</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// d-tor</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#acc23d0b5fa30b9ffe3fcd49026ebfdf6">mMPRecFile</a>) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a751e2c1726ab2a9a949e41577d71cbcc">closeMPRecOutput</a>();</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a567d69fb4bf022bf3ce7a15ede5877de">mMille</a>) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab45f96af88a02cde1d13ade4f99e24f3">closeMilleOutput</a>();</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ad6afd754b57d14534ffbc35196e18280">mResidFile</a>) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a4d7fd49c637f234a3de4416cfd2e1d9e">closeResidOutput</a>();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a6fb28d85cfe5a00f442808756e9b1492">DetID::nDetectors</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keyword">delete</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa818e4077a4c85968c3952c187d859b3">mDetectors</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keyword">delete</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a447c8e8ee3341d95043f1bce839a97e8">mHistoStat</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;}</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">//________________________________________________________________</span></div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a0e3e3185a2d4363a081a3dd382c88fe4">  128</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a0e3e3185a2d4363a081a3dd382c88fe4">Controller::init</a>()</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;{</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#adf4456a774a94c703d9e3277cc3c06e3">mDetMask</a>[<a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a55dd27091d307d75e3bf0a313f33ca4d">DetID::ITS</a>]) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a5cd8ed7aaf326ec1a0103b4d3dae5e23">addDetector</a>(<span class="keyword">new</span> <a class="code" href="../../dd/d68/classo2_1_1align_1_1AlignableDetectorITS.html">AlignableDetectorITS</a>(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a> = std::make_unique&lt;EventVertex&gt;(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">//________________________________________________________________</span></div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a18d31f2695b1ffb7457dfcf0f446cbf2">  137</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a18d31f2695b1ffb7457dfcf0f446cbf2">Controller::process</a>(<span class="keyword">const</span> <a class="code" href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">RecoContainer</a>&amp; recodata)</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;{</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">  auto creator = [](auto&amp; _tr, GTrackID _origID, float t0, float terr) {</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">    if (!_origID.includesDet(DetID::ITS)) {</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">      return true; // just in case this selection was not done on RecoContainer filling level</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">    }</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">    if constexpr (isITSTrack&lt;decltype(_tr)&gt;()) {</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">      t0 += halfROFITS;  // ITS time is supplied in \mus as beginning of ROF</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">      terr *= hw2ErrITS; // error is supplied as a half-ROF duration, convert to \mus</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">    }</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">    // for all other tracks the time is in \mus with gaussian error</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">    if constexpr (std::is_base_of_v&lt;o2::track::TrackParCov, std::decay_t&lt;decltype(_tr)&gt;&gt;) {</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">      if (terr &lt; maxTrackTimeError) {</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">        tracks.emplace_back(TrackWithTimeStamp{_tr, {t0, terr}});</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">        gids.emplace_back(_origID);</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">      }</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">    }</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">    return true;</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">  };</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">  recoData.createTracksVariadic(creator); // create track sample considered for vertexing</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">//________________________________________________________________</span></div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa4487bb8e4d5cf6a0bb4cb62cab4e981">  163</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa4487bb8e4d5cf6a0bb4cb62cab4e981">Controller::initDetectors</a>()</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;{</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="comment">// init all detectors geometry</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a976a171266b7f39a5b31511b7434eee9">getInitGeomDone</a>()) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9e2442680952d82b26c32541219d6f33">mAlgTrack</a> = std::make_unique&lt;AlignmentTrack&gt;();</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a821803439a6a71597f2caf3ad18e58ae">mRefPoint</a> = std::make_unique&lt;AlignmentPoint&gt;();</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordtype">int</span> dofCnt = 0;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// special fake sensor for vertex constraint point</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">// it has special T2L matrix adjusted for each track, no need to init it here</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a> = std::make_unique&lt;EventVertex&gt;(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a>-&gt;setInternalID(1);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a>-&gt;prepareMatrixL2G();</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a>-&gt;prepareMatrixL2GIdeal();</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  dofCnt += <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a>-&gt;getNDOFs();</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> = <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a666cd79f5455f093305e9fd378424b24">DetID::First</a>; <span class="keywordtype">id</span> &lt;= <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#abcc91d93fec0c5d7ec39149238112669">DetID::Last</a>; <span class="keywordtype">id</span>++) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keyword">auto</span>* det = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">getDetector</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">if</span> (det) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      dofCnt += det-&gt;initGeom();</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">if</span> (!dofCnt) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(fatal) &lt;&lt; <span class="stringliteral">&quot;No DOFs found&quot;</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> = <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a666cd79f5455f093305e9fd378424b24">DetID::First</a>; <span class="keywordtype">id</span> &lt;= <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#abcc91d93fec0c5d7ec39149238112669">DetID::Last</a>; <span class="keywordtype">id</span>++) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keyword">auto</span>* det = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">getDetector</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">if</span> (!det || det-&gt;isDisabled()) {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    det-&gt;cacheReferenceOCDB();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a462ad9819c31ac50dc592059d9d36186">assignDOFs</a>();</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Booked &quot;</span> &lt;&lt; dofCnt &lt;&lt; <span class="stringliteral">&quot; global parameters&quot;</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#af8931d014d9915da19d64c727f05aafb">setInitGeomDone</a>();</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">//________________________________________________________________</span></div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a6bcc82923aefa33e4efe6dc0c7f0e46c">  212</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a6bcc82923aefa33e4efe6dc0c7f0e46c">Controller::initDOFs</a>()</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;{</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">// scan all free global parameters, link detectors to array of params</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a78935b50c06ade47ed595198fc6b837b">getInitDOFsDone</a>()) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;initDOFs was already done, just reassigning &quot;</span> &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a031130d8f782241a15191f765e85669e">getNDOFs</a>() &lt;&lt; <span class="stringliteral">&quot;DOFs arrays/labels&quot;</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a462ad9819c31ac50dc592059d9d36186">assignDOFs</a>();</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; conf = <a class="code" href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#acd640717f419212c67fecff71d876d39">AlignConfig::Instance</a>();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a> = 0;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordtype">int</span> ndfAct = 0;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a462ad9819c31ac50dc592059d9d36186">assignDOFs</a>();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordtype">int</span> nact = 0;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a>-&gt;initDOFs();</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> = <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a666cd79f5455f093305e9fd378424b24">DetID::First</a>; <span class="keywordtype">id</span> &lt;= <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#abcc91d93fec0c5d7ec39149238112669">DetID::Last</a>; <span class="keywordtype">id</span>++) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html">AlignableDetector</a>* det = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">getDetector</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">if</span> (det &amp;&amp; !det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#af3521c1731173e442309c1b242d8bb81">isDisabled</a>()) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a6bbcb4e44eb6000316dddb7de3ca4fcd">initDOFs</a>();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      nact++;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      ndfAct += det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a8fd2920c86f28ec234bf6549aec56c4b">getNDOFsTot</a>();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../df/d72/namespaceo2_1_1align_1_1utils.html#a854be1d5494bf55c96103a4c657d167fa1bb274c262d0633115e771bf58520fa4">NTrackTypes</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">if</span> (nact &lt; conf.minDetAcc[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(fatal) &lt;&lt; nact &lt;&lt; <span class="stringliteral">&quot; detectors are active, while &quot;</span> &lt;&lt; conf.minDetAcc[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt;&lt; <span class="stringliteral">&quot; in track are asked&quot;</span>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a> &lt;&lt; <span class="stringliteral">&quot; global parameters &quot;</span> &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7cdb615dc47169d5e1e3108f98d68e87">mNDet</a> &lt;&lt; <span class="stringliteral">&quot; detectors, &quot;</span> &lt;&lt; ndfAct &lt;&lt; <span class="stringliteral">&quot; in &quot;</span> &lt;&lt; nact &lt;&lt; <span class="stringliteral">&quot; active detectors&quot;</span>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a1bab27452ca072373bcf84dab4fc16b5">addAutoConstraints</a>();</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab9b4bb29545d77d2bbaeda4e05841792">setInitDOFsDone</a>();</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;}</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">//________________________________________________________________</span></div>
<div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a462ad9819c31ac50dc592059d9d36186">  247</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a462ad9819c31ac50dc592059d9d36186">Controller::assignDOFs</a>()</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;{</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">// add parameters/labels arrays to volumes. If the Controller is read from the file, this method need</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// to be called (of initDOFs should be called)</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordtype">int</span> ndfOld = -1;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a> &gt; 0) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    ndfOld = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a> = 0;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">// reserve</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordtype">int</span> ndofTOT = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a>-&gt;getNDOFs();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> = <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a666cd79f5455f093305e9fd378424b24">DetID::First</a>; <span class="keywordtype">id</span> &lt;= <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#abcc91d93fec0c5d7ec39149238112669">DetID::Last</a>; <span class="keywordtype">id</span>++) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html">AlignableDetector</a>* det = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">getDetector</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">if</span> (!det) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    ndofTOT += det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a8fd2920c86f28ec234bf6549aec56c4b">getNDOFsTot</a>();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aaa674f74e4061048372f13f0e2b13537">mGloParVal</a>.clear();</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a771ac7d0ee6f262dc9b2527c36cd5db9">mGloParErr</a>.clear();</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#afe055bdc24506c4faf4a22894a688d0d">mGloParLab</a>.clear();</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac41fd665d5277d1c40bdb6edc0138cb3">mOrderedLbl</a>.clear();</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a41f6517d9c3ffdd8fc6a4242245478b0">mLbl2ID</a>.clear();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aaa674f74e4061048372f13f0e2b13537">mGloParVal</a>.reserve(ndofTOT);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a771ac7d0ee6f262dc9b2527c36cd5db9">mGloParErr</a>.reserve(ndofTOT);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#afe055bdc24506c4faf4a22894a688d0d">mGloParLab</a>.reserve(ndofTOT);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac41fd665d5277d1c40bdb6edc0138cb3">mOrderedLbl</a>.reserve(ndofTOT);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a41f6517d9c3ffdd8fc6a4242245478b0">mLbl2ID</a>.reserve(ndofTOT);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a>-&gt;assignDOFs();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> = <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a666cd79f5455f093305e9fd378424b24">DetID::First</a>; <span class="keywordtype">id</span> &lt;= <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#abcc91d93fec0c5d7ec39149238112669">DetID::Last</a>; <span class="keywordtype">id</span>++) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html">AlignableDetector</a>* det = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">getDetector</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span> (!det) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a> += det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#ac47377aa866d9b8ce1b117cc9aea3b5f">assignDOFs</a>();</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Assigned parameters/labels arrays for &quot;</span> &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a> &lt;&lt; <span class="stringliteral">&quot; DOFs&quot;</span>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">if</span> (ndfOld &gt; -1 &amp;&amp; ndfOld != <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a>) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(error) &lt;&lt; <span class="stringliteral">&quot;Recalculated NDOFs=&quot;</span> &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a> &lt;&lt; <span class="stringliteral">&quot; not equal to saved NDOFs=&quot;</span> &lt;&lt; ndfOld;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="comment">// build Lbl &lt;-&gt; parID table</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">/* FIXME RS TODO</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">  Sort(mNDOFs, mGloParLab, mLbl2ID, false); // sort in increasing order</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">  for (int i = mNDOFs; i--;) {</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">    mOrderedLbl[i] = mGloParLab[mLbl2ID[i]];</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">  }</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">  */</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;}</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">//_________________________________________________________</span></div>
<div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a5cd8ed7aaf326ec1a0103b4d3dae5e23">  303</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a5cd8ed7aaf326ec1a0103b4d3dae5e23">Controller::addDetector</a>(<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html">AlignableDetector</a>* det)</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;{</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">// add detector constructed externally to alignment framework</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa818e4077a4c85968c3952c187d859b3">mDetectors</a>[det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a757d5a8fedec818f40b212fb878093cb">getDetID</a>()] = det;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7cdb615dc47169d5e1e3108f98d68e87">mNDet</a>++;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">//_________________________________________________________</span></div>
<div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a4de220fe0a97f3b9338381ca31c72197">  311</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a4de220fe0a97f3b9338381ca31c72197">Controller::checkDetectorPattern</a>(<a class="code" href="../../de/d8a/classo2_1_1gpu_1_1gpustd_1_1bitset.html">DetID::mask_t</a> patt)<span class="keyword"> const</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="comment">//validate detector pattern</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordflow">return</span> ((patt &amp; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a678e10c669e4888db84293055af9ceec">mObligatoryDetPattern</a>[<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae4a301001704a755613056222fb2529f">mTracksType</a>]) == <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a678e10c669e4888db84293055af9ceec">mObligatoryDetPattern</a>[<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae4a301001704a755613056222fb2529f">mTracksType</a>]) &amp;&amp;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;         patt.count() &gt;= <a class="code" href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#acd640717f419212c67fecff71d876d39">AlignConfig::Instance</a>().minDetAcc[<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae4a301001704a755613056222fb2529f">mTracksType</a>];</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;}</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">//_________________________________________________________</span></div>
<div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#afd4332b2d246ef21809c130c9d0bddaa">  319</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#afd4332b2d246ef21809c130c9d0bddaa">Controller::checkDetectorPoints</a>(<span class="keyword">const</span> <span class="keywordtype">int</span>* npsel)<span class="keyword"> const</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="comment">//validate detectors pattern according to number of selected points</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordtype">int</span> ndOK = 0;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> = <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a666cd79f5455f093305e9fd378424b24">DetID::First</a>; <span class="keywordtype">id</span> &lt;= <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#abcc91d93fec0c5d7ec39149238112669">DetID::Last</a>; <span class="keywordtype">id</span>++) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html">AlignableDetector</a>* det = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">getDetector</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">if</span> (!det || det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#af3521c1731173e442309c1b242d8bb81">isDisabled</a>(<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae4a301001704a755613056222fb2529f">mTracksType</a>)) {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">if</span> (npsel[<span class="keywordtype">id</span>] &lt; det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#aaea6c318f0fe99a27fe58d4eae19dce4">getNPointsSel</a>(<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae4a301001704a755613056222fb2529f">mTracksType</a>)) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">if</span> (det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#acf8d4d7d0056ef1eda3b7ef74be004d8">isObligatory</a>(<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae4a301001704a755613056222fb2529f">mTracksType</a>)) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    ndOK++;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordflow">return</span> ndOK &gt;= <a class="code" href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#acd640717f419212c67fecff71d876d39">AlignConfig::Instance</a>().minDetAcc[<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae4a301001704a755613056222fb2529f">mTracksType</a>];</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">//FIXME(milettri): needs AliESDtrack</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment"></span><span class="comment">//uint32_t Controller::AcceptTrack(const AliESDtrack* esdTr, bool strict) const</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">//{</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">//  // decide if the track should be processed</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">//  AlignableDetector* det = 0;</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">//  uint32_t detAcc = 0;</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">//  if (mFieldOn &amp;&amp; esdTr-&gt;Pt() &lt; mPtMin[mTracksType]){</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">//    return 0;}</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">//  if (Abs(esdTr-&gt;Eta()) &gt; mEtaMax[mTracksType]){</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">//    return 0;}</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">//  for (auto id=DetID::First; id&lt;=DetID::Last; id++) {</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">//    if (!(det = getDetector(id)) || det-&gt;isDisabled(mTracksType)){</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">//      continue;}</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">//    if (!det-&gt;AcceptTrack(esdTr, mTracksType)) {</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">//      if (strict &amp;&amp; det-&gt;isObligatory(mTracksType)){</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">//        return 0;}</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">//      else</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">//        continue;</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">//    }</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">//    //</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">//    detAcc |= 0x1 &lt;&lt; idet;</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">//  if (numberOfBitsSet(detAcc) &lt; mMinDetAcc[mTracksType]){</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">//    return 0;}</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">//  return detAcc;</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">//FIXME(milettri): needs AliESDtrack</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment"></span><span class="comment">//uint32_t Controller::AcceptTrackCosmic(const AliESDtrack* esdPairCosm[kNCosmLegs]) const</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">//{</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">//  // decide if the pair of tracks making cosmic track should be processed</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">//  uint32_t detAcc = 0, detAccLeg;</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">//  for (int i = kNCosmLegs; i--;) {</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">//    detAccLeg = AcceptTrack(esdPairCosm[i], mCosmicSelStrict); // missing obligatory detectors in one leg might be allowed</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">//    if (!detAccLeg){</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">//      return 0;}</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">//    detAcc |= detAccLeg;</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">//  if (mCosmicSelStrict){</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">//    return detAcc;}</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">//  // for non-stric selection check convolution of detector presence</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">//  if (!checkDetectorPattern(detAcc)){</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">//    return 0;}</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">//  return detAcc;</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">//FIXME(milettri): needs AliESDEvent</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment"></span><span class="comment">//void Controller::SetESDEvent(const AliESDEvent* ev)</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">//{</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">//  // attach event to analyse</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">//  fESDEvent = ev;</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">//  // setup magnetic field if needed</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">//  if (fESDEvent &amp;&amp;</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">//      (!TGeoGlobalMagField::Instance()-&gt;GetField() ||</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">//       !smallerAbs(fESDEvent-&gt;GetMagneticField() - AliTrackerBase::GetBz(), 5e-4))) {</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">//    fESDEvent-&gt;InitMagneticField();</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">//FIXME(milettri): needs AliESDEvent</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment"></span><span class="comment">//bool Controller::ProcessEvent(const AliESDEvent* esdEv)</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">//{</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">//  // process event</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">//  const int kProcStatFreq = 100;</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">//  static int evCount = 0;</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">//  if (!(evCount % kProcStatFreq)) {</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">//    ProcInfo_t procInfo;</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">//    gSystem-&gt;GetProcInfo(&amp;procInfo);</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">//    LOG(info) &lt;&lt; &quot;ProcStat: CPUusr:&quot; &lt;&lt; int(procInfo.fCpuUser) &lt;&lt; &quot; CPUsys:&quot; &lt;&lt; int(procInfo.fCpuSys) &lt;&lt; &quot; RMem:&quot; &lt;&lt; int(procInfo.fMemResident / 1024) &lt;&lt; &quot; VMem:&quot; &lt;&lt; int(procInfo.fMemVirtual / 1024);</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">//  evCount++;</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">//  SetESDEvent(esdEv);</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">//  if (esdEv-&gt;getRunNumber() != getRunNumber()){</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">//    SetRunNumber(esdEv-&gt;getRunNumber());</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">//  setCosmic(esdEv-&gt;GetEventSpecie() == AliRecoParam::kCosmic ||</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">//            (esdEv-&gt;GetNumberOfCosmicTracks() &gt; 0 &amp;&amp; !esdEv-&gt;GetPrimaryVertexTracks()-&gt;GetStatus()));</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">//  fillStatHisto(kEvInp);</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">//#if DEBUG &gt; 2</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">//  LOG &lt;&lt; &quot;Processing event &quot; &lt;&lt; esdEv-&gt;GetEventNumberInFile() &lt;&lt; &quot; of ev.specie &quot; &lt;&lt; esdEv-&gt;GetEventSpecie() &lt;&lt; &quot; -&gt; Ntr: &quot; &lt;&lt; esdEv-&gt;GetNumberOfTracks() &lt;&lt; &quot; NtrCosm: &quot; &lt;&lt; esdEv-&gt;GetNumberOfCosmicTracks();</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">//#endif</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">//  setFieldOn(Abs(esdEv-&gt;GetMagneticField()) &gt; kAlmost0Field);</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">//  if (!isCosmic() &amp;&amp; !CheckSetVertex(esdEv-&gt;GetPrimaryVertexTracks())){</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">//    return false;}</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">//  fillStatHisto(kEvVtx);</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">//  int ntr = 0, accTr = 0;</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">//  if (isCosmic()) {</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">//    mStat[kInpStat][kEventCosm]++;</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">//    ntr = esdEv-&gt;GetNumberOfCosmicTracks();</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">//    fillStatHisto(kTrackInp, ntr);</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">//    for (int itr = 0; itr &lt; ntr; itr++) {</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">//      accTr += ProcessTrack(esdEv-&gt;GetCosmicTrack(itr));</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">//    }</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">//    if (accTr){</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">//      mStat[kAccStat][kEventCosm]++;}</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">//  } else {</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">//    mStat[kInpStat][kEventColl]++;</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">//    ntr = esdEv-&gt;GetNumberOfTracks();</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">//    fillStatHisto(kTrackInp, ntr);</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">//    for (int itr = 0; itr &lt; ntr; itr++) {</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">//      //      int accTrOld = accTr;</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">//      accTr += ProcessTrack(esdEv-&gt;GetTrack(itr));</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">//      /*</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">//      if (accTr&gt;accTrOld &amp;&amp; mCResid) {</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">// int ndf = mCResid.getNPoints()*2-5;</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">// if (mCResid.getChi2()/ndf&gt;20 || !mCResid.getKalmanDone()</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">//     || mCResid.getChi2K()/ndf&gt;20) {</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">//   printf(&quot;BAD FIT for %d\n&quot;,itr);</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">// }</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">//        mCResid.Print(&quot;er&quot;);</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">//      }</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">//      */</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">//    }</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">//    if (accTr){</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">//      mStat[kAccStat][kEventColl]++;}</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">//  fillStatHisto(kTrackAcc, accTr);</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">//  if (accTr) {</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">//    LOG(info) &lt;&lt; &quot;Processed event &quot; &lt;&lt; esdEv-&gt;GetEventNumberInFile() &lt;&lt; &quot; of ev.specie &quot; &lt;&lt; esdEv-&gt;GetEventSpecie() &lt;&lt; &quot; -&gt; Accepted: &quot; &lt;&lt; accTr &lt;&lt; &quot; of &quot; &lt;&lt; ntr &lt;&lt; &quot; tracks&quot;;</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">//  return true;</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">//FIXME(milettri): needs AliESDtrack</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">//_________________________________________________________</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">//bool Controller::ProcessTrack(const AliESDtrack* esdTr)</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">//{</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">//  // process single track</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">//  mStat[kInpStat][kTrackColl]++;</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">//  fESDTrack[0] = esdTr;</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">//  fESDTrack[1] = 0;</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">//  int nPnt = 0;</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">//  const AliESDfriendTrack* trF = esdTr-&gt;GetFriendTrack();</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">//  if (!trF){</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">//    return false;}</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">//  const AliTrackPointArray* trPoints = trF-&gt;GetTrackPointArray();</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">//  if (!trPoints || (nPnt = trPoints-&gt;GetNPoints()) &lt; 1){</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">//    return false;}</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">//  uint32_t detAcc = AcceptTrack(esdTr);</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">//  if (!detAcc){</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">//    return false;}</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">//  resetDetectors();</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">//  mAlgTrack-&gt;Clear();</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">//  // process the track points for each detector,</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">//  AlignableDetector* det = 0;</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">//  for (auto id=DetID::First; id&lt;=DetID::Last; id++) {</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">//    if (!(detAcc &amp; (0x1 &lt;&lt; idet))){  // RS!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">//      continue;}</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">//    det = getDetector(id);</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">//    if (det-&gt;ProcessPoints(esdTr, mAlgTrack) &lt; det-&gt;getNPointsSel(kColl)) {</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">//      detAcc &amp;= ~(0x1 &lt;&lt; idet); // did not survive, suppress detector in the track</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">//      if (det-&gt;isObligatory(kColl)){</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">//        return false;}</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">//    }</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">//    if (numberOfBitsSet(detAcc) &lt; mMinDetAcc[kColl]){</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">//      return false;} // abandon track</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">//  if (mAlgTrack-&gt;getNPoints() &lt; getMinPoints()){</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">//    return false;}</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">//  // fill needed points (tracking frame) in the mAlgTrack</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">//  mRefPoint-&gt;setContainsMeasurement(false);</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">//  mRefPoint-&gt;setContainsMaterial(false);</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">//  mAlgTrack-&gt;addPoint(mRefPoint); // reference point which the track will refer to</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">//  mAlgTrack-&gt;copyFrom(esdTr);</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">//  if (!getFieldOn()){</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">//    mAlgTrack-&gt;imposePtBOff(mDefPtBOff[utils::kColl]);}</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">//  mAlgTrack-&gt;setFieldON(getFieldOn());</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">//  mAlgTrack-&gt;sortPoints();</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">//  // at this stage the points are sorted from maxX to minX, the latter corresponding to</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">//  // reference point (e.g. vertex) with X~0. The mAlgTrack-&gt;getInnerPointID() points on it,</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">//  // hence mAlgTrack-&gt;getInnerPointID() is the 1st really measured point. We will set the</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">//  // alpha of the reference point to alpha of the barrel sector corresponding to this</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">//  // 1st measured point</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">//  int pntMeas = mAlgTrack-&gt;getInnerPointID() - 1;</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">//  if (pntMeas &lt; 0) { // this should not happen</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">//    mAlgTrack-&gt;Print(&quot;p meas&quot;);</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">//    LOG(fatal) &lt;&lt; &quot;AlignmentTrack-&gt;getInnerPointID() cannot be 0&quot;;</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">//  // do we want to add the vertex as a measured point ?</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">//  if (!addVertexConstraint()) { // no constrain, just reference point w/o measurement</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">//    mRefPoint-&gt;setXYZTracking(0, 0, 0);</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">//    mRefPoint-&gt;setAlphaSens(sector2Alpha(mAlgTrack-&gt;getPoint(pntMeas)-&gt;getAliceSector()));</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">//  } else</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">//    fillStatHisto(kTrackFitInpVC);</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">//  fillStatHisto(kTrackFitInp);</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">//  if (!mAlgTrack-&gt;iniFit()){</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">//    return false;}</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">//  fillStatHisto(kTrackProcMatInp);</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">//  if (!mAlgTrack-&gt;processMaterials()){</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">//    return false;}</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">//  mAlgTrack-&gt;defineDOFs();</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">//  fillStatHisto(kTrackResDerInp);</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">//  if (!mAlgTrack-&gt;calcResidDeriv()){</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">//    return false;}</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">//  if (!storeProcessedTrack(mMPOutType &amp; ~kContR)){</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">//    return false;} // store derivatives for MP</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">//  if (getProduceControlRes() &amp;&amp;                                   // need control residuals, ignore selection fraction if this is the</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">//      (mMPOutType == kContR || gRandom-&gt;Rndm() &lt; mControlFrac)) { // output requested</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">//    if (!testLocalSolution() || !storeProcessedTrack(kContR)){</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">//      return false;}</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">//  fillStatHisto(kTrackStore);</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">//  mStat[kAccStat][kTrackColl]++;</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">//  return true;</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">//FIXME(milettri): needs AliESDVertex</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment"></span><span class="comment">//bool Controller::CheckSetVertex(const AliESDVertex* vtx)</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">//{</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">//  // vertex selection/constraint check</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">//  if (!vtx) {</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">//    fVertex = 0;</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">//    return true;</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">//  int ncont = vtx-&gt;GetNContributors();</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">//  if (mVtxMinCont &gt; 0 &amp;&amp; mVtxMinCont &gt; ncont) {</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">//#if DEBUG &gt; 2</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">//    LOG(info) &lt;&lt; &quot;Rejecting event with &quot; &lt;&lt; % d &lt;&lt; &quot; vertex contributors (min &quot; &lt;&lt; % d &lt;&lt; &quot; asked)&quot;, ncont, mVtxMinCont);</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">//#endif</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">//    return false;</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">//  if (mVtxMaxCont &gt; 0 &amp;&amp; ncont &gt; mVtxMaxCont) {</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">//#if DEBUG &gt; 2</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">//    LOG(info) &lt;&lt; &quot;Rejecting event with &quot; &lt;&lt; % d &lt;&lt; &quot; vertex contributors (max &quot; &lt;&lt; % d &lt;&lt; &quot; asked)&quot;, ncont, mVtxMaxCont);</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">//#endif</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">//    return false;</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">//  fVertex = (ncont &gt;= mVtxMinContVC) ? vtx : 0; // use vertex as a constraint</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">//  return true;</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">//FIXME(milettri): needs AliESDCosmicTrack</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment"></span><span class="comment">//bool Controller::ProcessTrack(const AliESDCosmicTrack* cosmTr)</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">//{</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">//  // process single cosmic track</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">//  mStat[kInpStat][kTrackCosm]++;</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">//  int nPnt = 0;</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">//  fESDTrack[0] = 0;</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">//  fESDTrack[1] = 0;</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">//  for (int leg = kNCosmLegs; leg--;) {</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">//    const AliESDtrack* esdTr =</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">//      fESDEvent-&gt;GetTrack(leg == kCosmLow ? cosmTr-&gt;GetESDLowerTrackIndex() : cosmTr-&gt;GetESDUpperTrackIndex());</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">//    const AliESDfriendTrack* trF = esdTr-&gt;GetFriendTrack();</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">//    if (!trF){</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">//      return false;}</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">//    const AliTrackPointArray* trPoints = trF-&gt;GetTrackPointArray();</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">//    if (!trPoints || (nPnt += trPoints-&gt;GetNPoints()) &lt; 1){</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment">//      return false;}</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">//    //</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment">//    fESDTrack[leg] = esdTr;</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">//  uint32_t detAcc = AcceptTrackCosmic(fESDTrack);</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">//  if (!detAcc){</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">//    return false;}</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">//  resetDetectors();</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">//  mAlgTrack-&gt;Clear();</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">//  mAlgTrack-&gt;setCosmic(true);</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">//  // process the track points for each detector,</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">//  // fill needed points (tracking frame) in the mAlgTrack</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">//  mRefPoint-&gt;setContainsMeasurement(false);</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">//  mRefPoint-&gt;setContainsMaterial(false);</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">//  mAlgTrack-&gt;addPoint(mRefPoint); // reference point which the track will refer to</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">//  AlignableDetector* det = 0;</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">//  int npsel[kNDetectors] = {0};</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">//  for (int nPleg = 0, leg = kNCosmLegs; leg--;) {</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">//    for (auto id=DetID::First; id&lt;=DetID::Last; id++) {</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">//      if (!(detAcc &amp; (0x1 &lt;&lt; idet))){</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">//        continue;}</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">//      det = getDetector(id);</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">//      //</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment">//      // upper leg points marked as the track going in inverse direction</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">//      int np = det-&gt;ProcessPoints(fESDTrack[leg], mAlgTrack, leg == kCosmUp);</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">//      if (np &lt; det-&gt;getNPointsSel(Cosm) &amp;&amp; mCosmicSelStrict &amp;&amp;</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">//          det-&gt;isObligatory(Cosm))</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">//        return false;</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">//      npsel[id] += np;</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">//      nPleg += np;</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">//    }</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">//    if (nPleg &lt; getMinPoints()){</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">//      return false;}</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">//  // last check on legs-combined patter</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">//  if (!checkDetectorPoints(npsel)){</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">//    return false;}</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment">//  mAlgTrack-&gt;copyFrom(cosmTr);</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment">//  if (!getFieldOn()){</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment">//    mAlgTrack-&gt;imposePtBOff(mDefPtBOff[utils::Cosm]);}</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">//  mAlgTrack-&gt;setFieldON(getFieldOn());</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">//  mAlgTrack-&gt;sortPoints();</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">//  // at this stage the points are sorted from maxX to minX, the latter corresponding to</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">//  // reference point (e.g. vertex) with X~0. The mAlgTrack-&gt;getInnerPointID() points on it,</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">//  // hence mAlgTrack-&gt;getInnerPointID() is the 1st really measured point. We will set the</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">//  // alpha of the reference point to alpha of the barrel sector corresponding to this</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">//  // 1st measured point</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">//  int pntMeas = mAlgTrack-&gt;getInnerPointID() - 1;</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">//  if (pntMeas &lt; 0) { // this should not happen</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment">//    mAlgTrack-&gt;Print(&quot;p meas&quot;);</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">//    LOG(fatal) &lt;&lt; &quot;AlignmentTrack-&gt;getInnerPointID() cannot be 0&quot;;</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment">//  mRefPoint-&gt;setAlphaSens(sector2Alpha(mAlgTrack-&gt;getPoint(pntMeas)-&gt;getAliceSector()));</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">//  fillStatHisto(kTrackFitInp);</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">//  if (!mAlgTrack-&gt;iniFit()){</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">//    return false;}</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">//  fillStatHisto(kTrackProcMatInp);</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">//  if (!mAlgTrack-&gt;processMaterials()){</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">//    return false;}</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">//  mAlgTrack-&gt;defineDOFs();</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">//  fillStatHisto(kTrackResDerInp);</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">//  if (!mAlgTrack-&gt;calcResidDeriv()){</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">//    return false;}</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">//  if (!storeProcessedTrack(mMPOutType &amp; ~kContR)){</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">//    return false;} // store derivatives for MP</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">//  if (getProduceControlRes() &amp;&amp;                                   // need control residuals, ignore selection fraction if this is the</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">//      (mMPOutType == kContR || gRandom-&gt;Rndm() &lt; mControlFrac)) { // output requested</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">//    if (!testLocalSolution() || !storeProcessedTrack(kContR)){</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">//      return false;}</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">//  fillStatHisto(kTrackStore);</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">//  mStat[kAccStat][kTrackCosm]++;</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">//  return true;</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">//_________________________________________________________</span></div>
<div class="line"><a name="l00711"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#af94f2ce569d40efde9be8bf931359a15">  711</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#af94f2ce569d40efde9be8bf931359a15">Controller::storeProcessedTrack</a>(<span class="keywordtype">int</span> what)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;{</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="comment">// write alignment track</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../dc/d62/RawData_8h.html#a97e3bb97951482c8cf4d55a2d0bfcb62">res</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="keywordflow">if</span> ((what &amp; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a068fabfd36d36a9df7fdfeb485f3257eace228e2f256c66a7932c5a13d7c71cbc">kMille</a>)) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <a class="code" href="../../dc/d62/RawData_8h.html#a97e3bb97951482c8cf4d55a2d0bfcb62">res</a> &amp;= <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae9d74264b41bff8f5f86c4076b89f200">fillMilleData</a>();</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="keywordflow">if</span> ((what &amp; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a068fabfd36d36a9df7fdfeb485f3257ea955cbbdb5628f0ec7e75cf503a4b8d63">kMPRec</a>)) {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <a class="code" href="../../dc/d62/RawData_8h.html#a97e3bb97951482c8cf4d55a2d0bfcb62">res</a> &amp;= <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a85a82483da26aef98ef8b0301cea7cb2">fillMPRecData</a>();</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  }</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="keywordflow">if</span> ((what &amp; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a068fabfd36d36a9df7fdfeb485f3257ea69878a01171c6ab7f7593ff1baca6ebf">kContR</a>)) {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <a class="code" href="../../dc/d62/RawData_8h.html#a97e3bb97951482c8cf4d55a2d0bfcb62">res</a> &amp;= <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a0e739e55b6a9a3a423f82a8135350a92">fillControlData</a>();</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../dc/d62/RawData_8h.html#a97e3bb97951482c8cf4d55a2d0bfcb62">res</a>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;}</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment">//_________________________________________________________</span></div>
<div class="line"><a name="l00729"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae9d74264b41bff8f5f86c4076b89f200">  729</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae9d74264b41bff8f5f86c4076b89f200">Controller::fillMilleData</a>()</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;{</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="comment">// store MP2 data in Mille format</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a567d69fb4bf022bf3ce7a15ede5877de">mMille</a>) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a567d69fb4bf022bf3ce7a15ede5877de">mMille</a> = std::make_unique&lt;Mille&gt;(<a class="code" href="../../dc/da3/glcorearb_8h.html#ae2d3db041c6004a67047659b42f73a44">fmt::format</a>(<span class="stringliteral">&quot;{}{}&quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a3cf088abd3b11a7c72c0eb146ceb499c">mMPDatFileName</a>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab2537e2df7f51095f6ee6db3bbf51dc9">sMPDataExt</a>).c_str());</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  }</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9e2442680952d82b26c32541219d6f33">mAlgTrack</a>-&gt;getDerivDone()) {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(error) &lt;&lt; <span class="stringliteral">&quot;Track derivatives are not yet evaluated&quot;</span>;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="keywordtype">int</span> np(<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9e2442680952d82b26c32541219d6f33">mAlgTrack</a>-&gt;getNPoints()), nDGloTot(0); <span class="comment">// total number global derivatives stored</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="keywordtype">int</span> nParETP(<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9e2442680952d82b26c32541219d6f33">mAlgTrack</a>-&gt;getNLocExtPar());      <span class="comment">// numnber of local parameters for reference track param</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="keywordtype">int</span> nVarLoc(<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9e2442680952d82b26c32541219d6f33">mAlgTrack</a>-&gt;getNLocPar());         <span class="comment">// number of local degrees of freedom in the track</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="keywordtype">float</span> *buffDL(<span class="keyword">nullptr</span>), *buffDG(<span class="keyword">nullptr</span>);     <span class="comment">// faster acces arrays</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="keywordtype">int</span>* buffI(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span>* gloParID(<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9e2442680952d82b26c32541219d6f33">mAlgTrack</a>-&gt;getGloParID()); <span class="comment">// IDs of global DOFs this track depends on</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ip = 0; ip &lt; np; ip++) {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html">AlignmentPoint</a>* pnt = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9e2442680952d82b26c32541219d6f33">mAlgTrack</a>-&gt;getPoint(ip);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">if</span> (pnt-&gt;<a class="code" href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#ac4a4d3b6943797c7c2c8944945e41657">containsMeasurement</a>()) {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <span class="keywordtype">int</span> gloOffs = pnt-&gt;<a class="code" href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#abaa2dc1b5320121540660d551d6ac021">getDGloOffs</a>(); <span class="comment">// 1st entry of global derivatives for this point</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      <span class="keywordtype">int</span> nDGlo = pnt-&gt;<a class="code" href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a1a2a617c14aa576ce1879b1e205e9199">getNGloDOFs</a>();   <span class="comment">// number of global derivatives (number of DOFs it depends on)</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <span class="keywordflow">if</span> (!pnt-&gt;<a class="code" href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a7266a2ddaa635041b3c27abae662e398">isStatOK</a>()) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        pnt-&gt;<a class="code" href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a7958336451573d60b3bacd6267183ee2">incrementStat</a>();</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      <span class="comment">// check buffer sizes</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab0385d4235576f99512347dcab596d3c">mMilleDBuffer</a>.GetSize() &lt; nVarLoc + nDGlo) {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;          <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab0385d4235576f99512347dcab596d3c">mMilleDBuffer</a>.Set(100 + nVarLoc + nDGlo);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac77c59d71a1e7d3cb90e78a75f17de4d">mMilleIBuffer</a>.GetSize() &lt; nDGlo) {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;          <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac77c59d71a1e7d3cb90e78a75f17de4d">mMilleIBuffer</a>.Set(100 + nDGlo);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        buffDL = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab0385d4235576f99512347dcab596d3c">mMilleDBuffer</a>.GetArray(); <span class="comment">// faster acces</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        buffDG = buffDL + nVarLoc;         <span class="comment">// faster acces</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        buffI = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac77c59d71a1e7d3cb90e78a75f17de4d">mMilleIBuffer</a>.GetArray();  <span class="comment">// faster acces</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      }</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="comment">// local der. array cannot be 0-suppressed by Mille construction, need to reset all to 0</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idim = 0; idim &lt; 2; idim++) { <span class="comment">// 2 dimensional orthogonal measurement</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        memset(buffDL, 0, nVarLoc * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span>* deriv = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9e2442680952d82b26c32541219d6f33">mAlgTrack</a>-&gt;getDResDLoc(idim, ip); <span class="comment">// array of Dresidual/Dparams_loc</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="comment">// derivatives over reference track parameters</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> = 0; <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> &lt; nParETP; <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>++) {</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;          buffDL[<a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] = (<a class="code" href="../../df/d72/namespaceo2_1_1align_1_1utils.html#a511f879137dd7ed072de88fab1fe5980">isZeroAbs</a>(deriv[<a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>])) ? 0 : deriv[<a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>];</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <span class="comment">// point may depend on material variables within these limits</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="keywordtype">int</span> lp0 = pnt-&gt;<a class="code" href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a6cb07efcebf6cb93c9e4f3a5312f9c25">getMinLocVarID</a>(), lp1 = pnt-&gt;<a class="code" href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a63d645b4a026a82ade9ff1303730d0a8">getMaxLocVarID</a>();</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> = lp0; <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> &lt; lp1; <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>++) {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;          buffDL[<a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>] = (<a class="code" href="../../df/d72/namespaceo2_1_1align_1_1utils.html#a511f879137dd7ed072de88fab1fe5980">isZeroAbs</a>(deriv[<a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>])) ? 0 : deriv[<a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>];</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        }</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="comment">// derivatives over global params: this array can be 0-suppressed, no need to reset</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="keywordtype">int</span> nGlo(0);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        deriv = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9e2442680952d82b26c32541219d6f33">mAlgTrack</a>-&gt;getDResDGlo(idim, gloOffs);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span>* gloIDP(gloParID + gloOffs);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> = 0; <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> &lt; nDGlo; <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>++) {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="../../df/d72/namespaceo2_1_1align_1_1utils.html#a511f879137dd7ed072de88fab1fe5980">isZeroAbs</a>(deriv[<a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>])) {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            buffDG[nGlo] = deriv[<a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>];                 <span class="comment">// value of derivative</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            buffI[nGlo++] = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab4341d805426a7a2b912963b2952200f">getGloParLab</a>(gloIDP[<a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>]); <span class="comment">// global DOF ID + 1 (Millepede needs positive labels)</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;          }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a567d69fb4bf022bf3ce7a15ede5877de">mMille</a>-&gt;mille(nVarLoc, buffDL, nGlo, buffDG, buffI,</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                      <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9e2442680952d82b26c32541219d6f33">mAlgTrack</a>-&gt;getResidual(idim, ip), <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739aef71b41e302818193ccb767aa823b158">Sqrt</a>(pnt-&gt;<a class="code" href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a2d1f3f2f4ab9864360340fa8417523d0">getErrDiag</a>(idim)));</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        nDGloTot += nGlo;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">if</span> (pnt-&gt;<a class="code" href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a9fdab48c8fceffe7a1132a8196f4a57d">containsMaterial</a>()) { <span class="comment">// material point can add 4 or 5 otrhogonal pseudo-measurements</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      memset(buffDL, 0, nVarLoc * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="keywordtype">int</span> nmatpar = pnt-&gt;<a class="code" href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a3eec312e043ea4a55668748d6809fe80">getNMatPar</a>(); <span class="comment">// residuals (correction expectation value)</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <span class="comment">//      const float* expMatCorr = pnt-&gt;getMatCorrExp(); // expected corrections (diagonalized)</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">float</span>* expMatCov = pnt-&gt;<a class="code" href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#ae66cc78917ea1ca16bc564f3872a7170">getMatCorrCov</a>(); <span class="comment">// their diagonalized error matrix</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <span class="keywordtype">int</span> offs = pnt-&gt;<a class="code" href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a63d645b4a026a82ade9ff1303730d0a8">getMaxLocVarID</a>() - nmatpar;    <span class="comment">// start of material variables</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <span class="comment">// here all derivatives are 1 = dx/dx</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> = 0; <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> &lt; nmatpar; <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>++) { <span class="comment">// mat. &quot;measurements&quot; don&#39;t depend on global params</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="keywordtype">int</span> j1 = <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> + offs;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        buffDL[j1] = 1.0; <span class="comment">// only 1 non-0 derivative</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <span class="comment">//mMille-&gt;mille(nVarLoc,buffDL,0,buffDG,buffI,expMatCorr[j],Sqrt(expMatCov[j]));</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <span class="comment">// expectation for MS effect is 0</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a567d69fb4bf022bf3ce7a15ede5877de">mMille</a>-&gt;mille(nVarLoc, buffDL, 0, buffDG, buffI, 0, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739aef71b41e302818193ccb767aa823b158">Sqrt</a>(expMatCov[<a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>]));</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        buffDL[j1] = 0.0; <span class="comment">// reset buffer</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    } <span class="comment">// material &quot;measurement&quot;</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  }   <span class="comment">// loop over points</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="keywordflow">if</span> (!nDGloTot) {</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Track does not depend on free global parameters, discard&quot;</span>;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a567d69fb4bf022bf3ce7a15ede5877de">mMille</a>-&gt;kill();</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a567d69fb4bf022bf3ce7a15ede5877de">mMille</a>-&gt;end(); <span class="comment">// store the record</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;}</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="comment">//_________________________________________________________</span></div>
<div class="line"><a name="l00827"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a85a82483da26aef98ef8b0301cea7cb2">  827</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a85a82483da26aef98ef8b0301cea7cb2">Controller::fillMPRecData</a>()</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;{</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(fatal) &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; <span class="stringliteral">&quot; is disabled&quot;</span>;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="comment">//FIXME(milettri): needs AliESDEvent</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="comment">//  // store MP2 in MPRecord format</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="comment">//  if (!mMPRecord){</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="comment">//    initMPRecOutput();}</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="comment">//  mMPRecord-&gt;Clear();</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="comment">//  if (!mMPRecord-&gt;fillTrack(mAlgTrack, mGloParLab)){</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="comment">//    return false;}</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="comment">//  mMPRecord-&gt;SetRun(mRunNumber);</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="comment">//  mMPRecord-&gt;setTimeStamp(fESDEvent-&gt;GetTimeStamp());</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="comment">//  uint32_t tID = 0xffff &amp; uint(fESDTrack[0]-&gt;GetID());</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="comment">//  if (isCosmic()){</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="comment">//    tID |= (0xffff &amp; uint(fESDTrack[1]-&gt;GetID())) &lt;&lt; 16;}</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="comment">//  mMPRecord-&gt;setTrackID(tID);</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="comment">//  mMPRecTree-&gt;Fill();</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;}</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">//_________________________________________________________</span></div>
<div class="line"><a name="l00849"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a0e739e55b6a9a3a423f82a8135350a92">  849</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a0e739e55b6a9a3a423f82a8135350a92">Controller::fillControlData</a>()</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;{</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(fatal) &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; <span class="stringliteral">&quot; is disabled&quot;</span>;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="comment">//FIXME(milettri): needs AliESDEvent</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="comment">//  // store control residuals</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="comment">//  if (!mCResid){</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="comment">//    initResidOutput();}</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="comment">//  int nps, np = mAlgTrack-&gt;getNPoints();</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="comment">//  nps = (!mRefPoint-&gt;containsMeasurement()) ? np - 1 : np; // ref point is dummy?</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="comment">//  if (nps &lt; 0){</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="comment">//    return true;}</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">//  mCResid.Clear();</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="comment">//  if (!mCResid.fillTrack(mAlgTrack, mDoKalmanResid)){</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="comment">//    return false;}</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="comment">//  mCResid.setRun(mRunNumber);</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="comment">//  mCResid.setTimeStamp(fESDEvent-&gt;GetTimeStamp());</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="comment">//  mCResid.setBz(fESDEvent-&gt;GetMagneticField());</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="comment">//  uint32_t tID = 0xffff &amp; uint(fESDTrack[0]-&gt;GetID());</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="comment">//  if (isCosmic()){</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="comment">//    tID |= (0xffff &amp; uint(fESDTrack[1]-&gt;GetID())) &lt;&lt; 16;}</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="comment">//  mCResid.setTrackID(tID);</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="comment">//  mResidTree-&gt;Fill();</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="comment">//  fillStatHisto(kTrackControl);</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;}</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; </div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">//_________________________________________________________</span></div>
<div class="line"><a name="l00880"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a744dda3f11e0a47786cc2dcaa5c5cd84">  880</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a744dda3f11e0a47786cc2dcaa5c5cd84">Controller::setRunNumber</a>(<span class="keywordtype">int</span> run)</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;{</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="keywordflow">if</span> (run == <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab5685515628734e5dfe603c04ab4bd06">mRunNumber</a>) {</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  } <span class="comment">// nothing to do</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a3ccd35a955928dd9b1b355acc43406db">acknowledgeNewRun</a>(run);</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;}</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">//_________________________________________________________</span></div>
<div class="line"><a name="l00890"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a3ccd35a955928dd9b1b355acc43406db">  890</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a3ccd35a955928dd9b1b355acc43406db">Controller::acknowledgeNewRun</a>(<span class="keywordtype">int</span> run)</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;{</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(warning) &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; <span class="stringliteral">&quot; yet incomplete&quot;</span>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; </div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <a class="code" href="../../d0/d20/classo2_1_1base_1_1GeometryManager.html#a46a26ff4356435e35ea427c8d9c03a72">o2::base::GeometryManager::loadGeometry</a>();</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <a class="code" href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#a86513b2091e1a51ea14646746572b19a">o2::base::PropagatorImpl&lt;double&gt;::initFieldFromGRP</a>();</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  std::unique_ptr&lt;o2::parameters::GRPObject&gt; grp{<a class="code" href="../../db/d74/classo2_1_1parameters_1_1GRPObject.html#ac3815c8e46962755bc43a6fe9bf54144">o2::parameters::GRPObject::loadFrom</a>()};</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="comment">//FIXME(milettri): needs AliESDEvent</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="comment">//  // load needed info for new run</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="comment">//  if (run == mRunNumber){</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="comment">//    return;} // nothing to do</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="comment">//  if (run &gt; 0) {</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="comment">//    mStat[kAccStat][kRun]++;</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="comment">//  if (mRunNumber &gt; 0){</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="comment">//    fillStatHisto(kRunDone);}</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="comment">//  mRunNumber = run;</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="comment">//  LOG(info) &lt;&lt; &quot;Processing new run &quot; &lt;&lt; mRunNumber;</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="comment">//  // setup magnetic field</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="comment">//  if (fESDEvent &amp;&amp;</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="comment">//      (!TGeoGlobalMagField::Instance()-&gt;GetField() ||</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">//       !smallerAbs(fESDEvent-&gt;GetMagneticField() - AliTrackerBase::GetBz(), 5e-4))) {</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="comment">//    fESDEvent-&gt;InitMagneticField();</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="comment">//  if (!mUseRecoOCDB) {</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="comment">//    LOG(warning) &lt;&lt; &quot;Reco-time OCDB will NOT be preloaded&quot;;</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="comment">//    return;</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="comment">//  LoadRecoTimeOCDB();</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="comment">//  for (auto id=DetID::First; id&lt;=DetID::Last; id++) {</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="comment">//    AlignableDetector* det = getDetector(id);</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="comment">//    if (!det-&gt;isDisabled()){</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <span class="comment">//      det-&gt;acknowledgeNewRun(run);}</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="comment">//  // bring to virgin state</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="comment">//  // CleanOCDB();</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="comment">//  // LoadRefOCDB(); //??? we need to get back reference OCDB ???</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="comment">//  mStat[kInpStat][kRun]++;</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;}</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">// FIXME(milettri): needs OCDB</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment"></span><span class="comment">//bool Controller::LoadRecoTimeOCDB()</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">//{</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment">//  // Load OCDB paths used for the reconstruction of data being processed</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">//  // In order to avoid unnecessary uploads, the objects are not actually</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment">//  // loaded/cached but just added as specific paths with version</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="comment">//  LOG(info) &lt;&lt; &quot;Preloading Reco-Time OCDB for run &quot; &lt;&lt; mRunNumber &lt;&lt; &quot; from ESD UserInfo list&quot;;</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment">//  CleanOCDB();</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment">//  if (!mRecoOCDBConf.IsNull() &amp;&amp; !gSystem-&gt;AccessPathName(mRecoOCDBConf.c_str(), kFileExists)) {</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">//    LOG(info) &lt;&lt; &quot;Executing reco-time OCDB setup macro &quot; &lt;&lt; mRecoOCDBConf.c_str();</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">//    gROOT-&gt;ProcessLine(Form(&quot;.x %s(%d)&quot;, mRecoOCDBConf.c_str(), mRunNumber));</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">//    if (AliCDBManager::Instance()-&gt;IsDefaultStorageSet()){</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment">//      return true;}</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">//    LOG(fatal) &lt;&lt; &quot;macro &quot; &lt;&lt; mRecoOCDBConf.c_str() &lt;&lt; &quot; failed to configure reco-time OCDB&quot;;</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment">//  } else</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">//    LOG(warning) &lt;&lt; &quot;No reco-time OCDB config macro&quot; &lt;&lt; mRecoOCDBConf.c_str() &lt;&lt; &quot;  is found, will use ESD:UserInfo&quot;;</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">//  if (!mESDTree){</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">//    LOG(fatal) &lt;&lt; &quot;Cannot preload Reco-Time OCDB since the ESD tree is not set&quot;;}</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">//  const TTree* tr = mESDTree; // go the the real ESD tree</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">//  while (tr-&gt;GetTree() &amp;&amp; tr-&gt;GetTree() != tr)</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">//    tr = tr-&gt;GetTree();</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment">//  const TList* userInfo = const_cast&lt;TTree*&gt;(tr)-&gt;GetUserInfo();</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment">//  TMap* cdbMap = (TMap*)userInfo-&gt;FindObject(&quot;cdbMap&quot;);</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment">//  TList* cdbList = (TList*)userInfo-&gt;FindObject(&quot;cdbList&quot;);</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment">//  if (!cdbMap || !cdbList) {</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment">//    userInfo-&gt;Print();</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment">//    LOG(fatal) &lt;&lt; &quot;Failed to extract cdbMap and cdbList from UserInfo list&quot;;</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">//  return PreloadOCDB(mRunNumber, cdbMap, cdbList);</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">//____________________________________________</span></div>
<div class="line"><a name="l00977"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab83b64b8a3848e6e1a041e0fdb5e79d4">  977</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab83b64b8a3848e6e1a041e0fdb5e79d4">Controller::Print</a>(<span class="keyword">const</span> Option_t* opt)<span class="keyword"> const</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="comment">// print info</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  TString opts = opt;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  opts.ToLower();</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  printf(<span class="stringliteral">&quot;%5d DOFs in %d detectors\n&quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7cdb615dc47169d5e1e3108f98d68e87">mNDet</a>);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a8acaedcd01905213bc40358ad2110343">getMPAlignDone</a>()) {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    printf(<span class="stringliteral">&quot;ALIGNMENT FROM MILLEPEDE SOLUTION IS APPLIED\n&quot;</span>);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  }</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> = <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a666cd79f5455f093305e9fd378424b24">DetID::First</a>; <span class="keywordtype">id</span> &lt;= <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#abcc91d93fec0c5d7ec39149238112669">DetID::Last</a>; <span class="keywordtype">id</span>++) {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html">AlignableDetector</a>* det = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">getDetector</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordflow">if</span> (!det) {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    }</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#aef53cf54eb5b5f1a8f08c863cc52fe95">Print</a>(opt);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="keywordflow">if</span> (!opts.IsNull()) {</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    printf(<span class="stringliteral">&quot;\nSpecial sensor for Vertex Constraint\n&quot;</span>);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a>-&gt;Print(opt);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a398b5f4a98330ba0dd4a0bad44391f4f">mRefRunNumber</a> &gt;= 0) {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    printf(<span class="stringliteral">&quot;(%d)&quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a398b5f4a98330ba0dd4a0bad44391f4f">mRefRunNumber</a>);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  }</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  printf(<span class="stringliteral">&quot;%-40s:\t%s\n&quot;</span>, <span class="stringliteral">&quot;Output OCDB path&quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a16801e07225b1967be20404286a86c4f">mOutCDBPath</a>.c_str());</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  printf(<span class="stringliteral">&quot;%-40s:\t%s/%s\n&quot;</span>, <span class="stringliteral">&quot;Output OCDB comment/responsible&quot;</span>,</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;         <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa2adfe59516f9d2d5d95b513b59cd39b">mOutCDBComment</a>.c_str(), <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a5aca2a3a7aef629af64dd6341581f644">mOutCDBResponsible</a>.c_str());</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  printf(<span class="stringliteral">&quot;%-40s:\t%6d:%6d\n&quot;</span>, <span class="stringliteral">&quot;Output OCDB run range&quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a60102558fca12402172dbd37eeef8667">mOutCDBRunRange</a>[0], <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a60102558fca12402172dbd37eeef8667">mOutCDBRunRange</a>[1]);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  printf(<span class="stringliteral">&quot;%-40s:\t%s\n&quot;</span>, <span class="stringliteral">&quot;Filename for MillePede steering&quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a5a3d5dec9772a1549dc59aedb8fc3090">mMPSteerFileName</a>.c_str());</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  printf(<span class="stringliteral">&quot;%-40s:\t%s\n&quot;</span>, <span class="stringliteral">&quot;Filename for MillePede parameters&quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa2162779e8fc1ace23288c8a4c51201c">mMPParFileName</a>.c_str());</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  printf(<span class="stringliteral">&quot;%-40s:\t%s\n&quot;</span>, <span class="stringliteral">&quot;Filename for MillePede constraints&quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#abe7243bf0c28bf363c6b706edc90ca5c">mMPConFileName</a>.c_str());</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  printf(<span class="stringliteral">&quot;%-40s:\t%s\n&quot;</span>, <span class="stringliteral">&quot;Filename for control residuals:&quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2689e7e7128f82f7f428279a3398a4b2">mResidFileName</a>.c_str());</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  printf(<span class="stringliteral">&quot;%-40s:\t%.3f\n&quot;</span>, <span class="stringliteral">&quot;Fraction of control tracks&quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab5be11954531aaa5f63ff1756b389982">mControlFrac</a>);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  printf(<span class="stringliteral">&quot;MPData output :\t&quot;</span>);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a45694d504d72fb7fd49fed121c4bbc0a">getProduceMPData</a>()) {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    printf(<span class="stringliteral">&quot;%s%s &quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a3cf088abd3b11a7c72c0eb146ceb499c">mMPDatFileName</a>.c_str(), <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab2537e2df7f51095f6ee6db3bbf51dc9">sMPDataExt</a>);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  }</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a5468e16160e1f45185ba1f51de8f8a70">getProduceMPRecord</a>()) {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    printf(<span class="stringliteral">&quot;%s%s &quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a3cf088abd3b11a7c72c0eb146ceb499c">mMPDatFileName</a>.c_str(), <span class="stringliteral">&quot;.root&quot;</span>);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="keywordflow">if</span> (opts.Contains(<span class="stringliteral">&quot;stat&quot;</span>)) {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae3eddfdde01c7ffeadf9125f51ce52c5">printStatistics</a>();</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="keywordflow">if</span> (opts.Contains(<span class="stringliteral">&quot;conf&quot;</span>)) {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <a class="code" href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#acd640717f419212c67fecff71d876d39">AlignConfig::Instance</a>().printKeyValues(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  }</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;}</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160; </div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment">//________________________________________________________</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae3eddfdde01c7ffeadf9125f51ce52c5"> 1032</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae3eddfdde01c7ffeadf9125f51ce52c5">Controller::printStatistics</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="comment">// print processing stat</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#af90983603395f80bd78cb86421a44717">mStat</a>.<a class="code" href="../../d7/db0/structo2_1_1align_1_1Controller_1_1ProcStat.html#aa1b326e995a878bd79c5b716d9988157">print</a>();</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;}</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160; </div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment">//________________________________________________________</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#afc59262ee938370ba8b52a2bf44d2a6d"> 1039</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#afc59262ee938370ba8b52a2bf44d2a6d">Controller::resetDetectors</a>()</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;{</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="comment">// reset detectors for next track</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a821803439a6a71597f2caf3ad18e58ae">mRefPoint</a>-&gt;Clear();</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> = <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a666cd79f5455f093305e9fd378424b24">DetID::First</a>; <span class="keywordtype">id</span> &lt;= <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#abcc91d93fec0c5d7ec39149238112669">DetID::Last</a>; <span class="keywordtype">id</span>++) {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html">AlignableDetector</a>* det = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">getDetector</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keywordflow">if</span> (det) {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a130b71b983041d80a513f458741956c8">resetPool</a>(); <span class="comment">// reset used alignment points</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  }</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;}</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160; </div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment">//____________________________________________</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a0be02ba87df2daea6261e832772e40bc"> 1052</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a0be02ba87df2daea6261e832772e40bc">Controller::testLocalSolution</a>()</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;{</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(fatal) &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; <span class="stringliteral">&quot; is disabled&quot;</span>;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="comment">//FIXME(milettri): needs AliSymMatrix</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="comment">//  // test track local solution</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <span class="comment">//  TVectorD rhs;</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="comment">//  AliSymMatrix* mat = BuildMatrix(rhs);</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="comment">//  if (!mat){</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="comment">//    return false;}</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="comment">//  //  mat-&gt;Print(&quot;long data&quot;);</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="comment">//  //  rhs.Print();</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="comment">//  TVectorD vsl(rhs);</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <span class="comment">//  if (!mat-&gt;SolveChol(rhs, vsl, true)) {</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="comment">//    delete mat;</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="comment">//    return false;</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="comment">//  /*</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="comment">//  // print solution vector</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <span class="comment">//  int nlocpar = mAlgTrack-&gt;getNLocPar();</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="comment">//  int nlocparETP = mAlgTrack-&gt;getNLocExtPar(); // parameters of external track param</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  <span class="comment">//  printf(&quot;ETP Update: &quot;);</span></div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="comment">//  for (int i=0;i&lt;nlocparETP;i++) printf(&quot;%+.2e(%+.2e) &quot;,vsl[i],Sqrt((*mat)(i,i))); printf(&quot;\n&quot;);</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="comment">//  if (nlocpar&gt;nlocparETP) printf(&quot;Mat.Corr. update:\n&quot;);</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="comment">//  for (int ip=mAlgTrack-&gt;getNPoints();ip--;) {</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="comment">//    AlignmentPoint* pnt = mAlgTrack-&gt;getPoint(ip);</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="comment">//    int npm = pnt-&gt;getNMatPar();</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="comment">//    const float* expMatCov  = pnt-&gt;getMatCorrCov(); // its error</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="comment">//    int offs  = pnt-&gt;getMaxLocVarID() - npm;</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <span class="comment">//    for (int ipar=0;ipar&lt;npm;ipar++) {</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="comment">//      int parI = offs + ipar;</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="comment">//      double err = Sqrt(expMatCov[ipar]);</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="comment">//      printf(&quot;Pnt:%3d MatVar:%d DOF %3d | %+.3e(%+.3e) -&gt; sig:%+.3e -&gt; pull: %+.2e\n&quot;,</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="comment">//            ip,ipar,parI,vsl[parI],Sqrt((*mat)(parI,parI)), err,vsl[parI]/err);</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="comment">//    }</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="comment">//  */</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="comment">//  // increment current params by new solution</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="comment">//  rhs.SetElements(mAlgTrack-&gt;getLocPars());</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="comment">//  vsl += rhs;</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="comment">//  mAlgTrack-&gt;setLocPars(vsl.GetMatrixArray());</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <span class="comment">//  mAlgTrack-&gt;calcResiduals();</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <span class="comment">//  delete mat;</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;}</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="comment">//FIXME(milettri): needs AliSymMatrix</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="comment"></span><span class="comment">//AliSymMatrix* Controller::BuildMatrix(TVectorD&amp; vec)</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment">//{</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment">//  // build matrix/vector for local track</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment">//  int npnt = mAlgTrack-&gt;getNPoints();</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment">//  int nlocpar = mAlgTrack-&gt;getNLocPar();</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">//  vec.ResizeTo(nlocpar);</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">//  memset(vec.GetMatrixArray(), 0, nlocpar * sizeof(double));</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment">//  AliSymMatrix* matp = new AliSymMatrix(nlocpar);</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">//  AliSymMatrix&amp; mat = *matp;</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment">//  for (int ip = npnt; ip--;) {</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment">//    AlignmentPoint* pnt = mAlgTrack-&gt;getPoint(ip);</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">//    //</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment">//    if (pnt-&gt;containsMeasurement()) {</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">//      //      pnt-&gt;Print(&quot;meas&quot;);</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">//      for (int idim = 2; idim--;) {                       // each point has 2 position residuals</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment">//        double sigma2 = pnt-&gt;getErrDiag(idim);            // residual error</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment">//        double resid = mAlgTrack-&gt;getResidual(idim, ip);  // residual</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">//        double* deriv = mAlgTrack-&gt;getDResDLoc(idim, ip); // array of Dresidual/Dparams</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment">//        //</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment">//        double sg2inv = 1. / sigma2;</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">//        for (int parI = nlocpar; parI--;) {</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment">//          vec[parI] -= deriv[parI] * resid * sg2inv;</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment">//          //  printf(&quot;%d %d %d %+e %+e %+e -&gt; %+e\n&quot;,ip,idim,parI,sg2inv,deriv[parI],resid,vec[parI]);</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">//          //   for (int parJ=nlocpar;parJ--;) {</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment">//          for (int parJ = parI + 1; parJ--;) {</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment">//            mat(parI, parJ) += deriv[parI] * deriv[parJ] * sg2inv;</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment">//          }</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">//        }</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment">//      } // loop over 2 orthogonal measurements at the point</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment">//    }   // derivarives at measured points</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment">//    //</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment">//    // if the point contains material, consider its expected kinks, eloss</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment">//    // as measurements</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment">//    if (pnt-&gt;containsMaterial()) {</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment">//      // at least 4 parameters: 2 spatial + 2 angular kinks with 0 expectaction</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="comment">//      int npm = pnt-&gt;getNMatPar();</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="comment">//      // const float* expMatCorr = pnt-&gt;getMatCorrExp(); // expected correction (diagonalized)</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment">//      const float* expMatCov = pnt-&gt;getMatCorrCov(); // its error</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment">//      int offs = pnt-&gt;getMaxLocVarID() - npm;</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="comment">//      for (int ipar = 0; ipar &lt; npm; ipar++) {</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="comment">//        int parI = offs + ipar;</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">//        // expected</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment">//        // vec[parI] -= expMatCorr[ipar]/expMatCov[ipar]; // consider expectation as measurement</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment">//        mat(parI, parI) += 1. / expMatCov[ipar]; // this measurement is orthogonal to all others</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="comment">//                                                 //printf(&quot;Pnt:%3d MatVar:%d DOF %3d | ExpVal: %+e Cov: %+e\n&quot;,ip,ipar,parI, expMatCorr[ipar], expMatCov[ipar]);</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="comment">//      }</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="comment">//    } // material effect descripotion params</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="comment">//    //</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment">//  } // loop over track points</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="comment">//  return matp;</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment">//____________________________________________</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a59293ce2999807db7950230027956691"> 1159</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a59293ce2999807db7950230027956691">Controller::initMPRecOutput</a>()</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;{</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="comment">// prepare MP record output</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#acc23d0b5fa30b9ffe3fcd49026ebfdf6">mMPRecFile</a>.reset(TFile::Open(<a class="code" href="../../dc/da3/glcorearb_8h.html#ae2d3db041c6004a67047659b42f73a44">fmt::format</a>(<span class="stringliteral">&quot;{}{}&quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a3cf088abd3b11a7c72c0eb146ceb499c">mMPDatFileName</a>, <span class="stringliteral">&quot;.root&quot;</span>).c_str(), <span class="stringliteral">&quot;recreate&quot;</span>));</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a38594f31723db7094fa3e3783362fb9c">mMPRecTree</a> = std::make_unique&lt;TTree&gt;(<span class="stringliteral">&quot;mpTree&quot;</span>, <span class="stringliteral">&quot;MPrecord Tree&quot;</span>);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a38594f31723db7094fa3e3783362fb9c">mMPRecTree</a>-&gt;Branch(<span class="stringliteral">&quot;mprec&quot;</span>, <span class="stringliteral">&quot;Millepede2Record&quot;</span>, &amp;<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9147f3700f84b749b4ea1727ccfeb236">mMPRecordPtr</a>);</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;}</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160; </div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment">//____________________________________________</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ad87840b3321a8197c4e95b86781305ad"> 1169</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ad87840b3321a8197c4e95b86781305ad">Controller::initResidOutput</a>()</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;{</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <span class="comment">// prepare residual output</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ad6afd754b57d14534ffbc35196e18280">mResidFile</a>.reset(TFile::Open(<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2689e7e7128f82f7f428279a3398a4b2">mResidFileName</a>.c_str(), <span class="stringliteral">&quot;recreate&quot;</span>));</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae9e8e3a227424e34c869d0260b1ccda5">mResidTree</a> = std::make_unique&lt;TTree&gt;(<span class="stringliteral">&quot;res&quot;</span>, <span class="stringliteral">&quot;Control Residuals&quot;</span>);</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae9e8e3a227424e34c869d0260b1ccda5">mResidTree</a>-&gt;Branch(<span class="stringliteral">&quot;t&quot;</span>, <span class="stringliteral">&quot;ResidualsController&quot;</span>, &amp;<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aacfdbb5b2c8605fe1c9f98453d818f8b">mCResidPtr</a>);</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;}</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment">//____________________________________________</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a751e2c1726ab2a9a949e41577d71cbcc"> 1179</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a751e2c1726ab2a9a949e41577d71cbcc">Controller::closeMPRecOutput</a>()</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;{</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="comment">// close output</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#acc23d0b5fa30b9ffe3fcd49026ebfdf6">mMPRecFile</a>) {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  }</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Closing &quot;</span> &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#acc23d0b5fa30b9ffe3fcd49026ebfdf6">mMPRecFile</a>-&gt;GetName();</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#acc23d0b5fa30b9ffe3fcd49026ebfdf6">mMPRecFile</a>-&gt;cd();</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a38594f31723db7094fa3e3783362fb9c">mMPRecTree</a>-&gt;Write();</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a38594f31723db7094fa3e3783362fb9c">mMPRecTree</a>.reset();</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#acc23d0b5fa30b9ffe3fcd49026ebfdf6">mMPRecFile</a>-&gt;Close();</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#acc23d0b5fa30b9ffe3fcd49026ebfdf6">mMPRecFile</a>.reset();</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;}</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160; </div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment">//____________________________________________</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a4d7fd49c637f234a3de4416cfd2e1d9e"> 1194</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a4d7fd49c637f234a3de4416cfd2e1d9e">Controller::closeResidOutput</a>()</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;{</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="comment">// close output</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ad6afd754b57d14534ffbc35196e18280">mResidFile</a>) {</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  }</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Closing &quot;</span> &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ad6afd754b57d14534ffbc35196e18280">mResidFile</a>-&gt;GetName();</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ad6afd754b57d14534ffbc35196e18280">mResidFile</a>-&gt;cd();</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae9e8e3a227424e34c869d0260b1ccda5">mResidTree</a>-&gt;Write();</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae9e8e3a227424e34c869d0260b1ccda5">mResidTree</a>.reset();</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ad6afd754b57d14534ffbc35196e18280">mResidFile</a>-&gt;Close();</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ad6afd754b57d14534ffbc35196e18280">mResidFile</a>.reset();</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a3cad5a081a1a1f045289d80da5c8d026">mCResid</a>.<a class="code" href="../../d6/d8b/classo2_1_1align_1_1ResidualsController.html#a914e64f7578d5e626a630b3ad79cb182">Clear</a>();</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;}</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160; </div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment">//____________________________________________</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab45f96af88a02cde1d13ade4f99e24f3"> 1210</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab45f96af88a02cde1d13ade4f99e24f3">Controller::closeMilleOutput</a>()</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;{</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="comment">// close output</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a567d69fb4bf022bf3ce7a15ede5877de">mMille</a>) {</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Closing &quot;</span> &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a3cf088abd3b11a7c72c0eb146ceb499c">mMPDatFileName</a>.c_str() &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab2537e2df7f51095f6ee6db3bbf51dc9">sMPDataExt</a>;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  }</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a567d69fb4bf022bf3ce7a15ede5877de">mMille</a>.reset();</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;}</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160; </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="comment">//____________________________________________</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2e0eb5dfb5cfde072349645db25de8ee"> 1220</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2e0eb5dfb5cfde072349645db25de8ee">Controller::setMPDatFileName</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>)</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;{</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <span class="comment">// set output file name</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a3cf088abd3b11a7c72c0eb146ceb499c">mMPDatFileName</a> = <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a3cf088abd3b11a7c72c0eb146ceb499c">mMPDatFileName</a>.empty()) {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a3cf088abd3b11a7c72c0eb146ceb499c">mMPDatFileName</a> = <span class="stringliteral">&quot;mpData&quot;</span>;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;}</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment">//____________________________________________</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a08f4020a84f21d5cb7f4592ec95c24cb"> 1231</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a08f4020a84f21d5cb7f4592ec95c24cb">Controller::setMPParFileName</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>)</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;{</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="comment">// set MP params output file name</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa2162779e8fc1ace23288c8a4c51201c">mMPParFileName</a> = <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa2162779e8fc1ace23288c8a4c51201c">mMPParFileName</a>.empty()) {</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa2162779e8fc1ace23288c8a4c51201c">mMPParFileName</a> = <span class="stringliteral">&quot;mpParams.txt&quot;</span>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;}</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="comment">//____________________________________________</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecdee7a92007be29f9d8923cbc219f93"> 1242</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecdee7a92007be29f9d8923cbc219f93">Controller::setMPConFileName</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>)</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;{</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="comment">// set MP constraints output file name</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#abe7243bf0c28bf363c6b706edc90ca5c">mMPConFileName</a> = <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#abe7243bf0c28bf363c6b706edc90ca5c">mMPConFileName</a>.empty()) {</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#abe7243bf0c28bf363c6b706edc90ca5c">mMPConFileName</a> = <span class="stringliteral">&quot;mpConstraints.txt&quot;</span>;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;}</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160; </div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">//____________________________________________</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a61a51c7b6b3220bc06097146dc90f4b5"> 1253</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a61a51c7b6b3220bc06097146dc90f4b5">Controller::setMPSteerFileName</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>)</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;{</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="comment">// set MP constraints output file name</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a5a3d5dec9772a1549dc59aedb8fc3090">mMPSteerFileName</a> = <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a5a3d5dec9772a1549dc59aedb8fc3090">mMPSteerFileName</a>.empty()) {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a5a3d5dec9772a1549dc59aedb8fc3090">mMPSteerFileName</a> = <span class="stringliteral">&quot;mpConstraints.txt&quot;</span>;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  }</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;}</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160; </div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="comment">//____________________________________________</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa885dc64b298c64533dd28d8f4ce7fe8"> 1264</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa885dc64b298c64533dd28d8f4ce7fe8">Controller::setResidFileName</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>)</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;{</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <span class="comment">// set output file name</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2689e7e7128f82f7f428279a3398a4b2">mResidFileName</a> = <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2689e7e7128f82f7f428279a3398a4b2">mResidFileName</a>.empty()) {</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2689e7e7128f82f7f428279a3398a4b2">mResidFileName</a> = <span class="stringliteral">&quot;mpControlRes.root&quot;</span>;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  }</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;}</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160; </div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="comment">//____________________________________________</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2e50a1f3358e6e18458782903e5e7e11"> 1275</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2e50a1f3358e6e18458782903e5e7e11">Controller::setOutCDBPath</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>)</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;{</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <span class="comment">// set output storage name</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a16801e07225b1967be20404286a86c4f">mOutCDBPath</a> = <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a16801e07225b1967be20404286a86c4f">mOutCDBPath</a>.empty()) {</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a16801e07225b1967be20404286a86c4f">mOutCDBPath</a> = <span class="stringliteral">&quot;local://outOCDB&quot;</span>;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  }</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;}</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="comment">//____________________________________________</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a40ff638938b73be7c415fa8aa75d9e9b"> 1286</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a40ff638938b73be7c415fa8aa75d9e9b">Controller::setObligatoryDetector</a>(<a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html">DetID</a> detID, <span class="keywordtype">int</span> trtype, <span class="keywordtype">bool</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>)</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;{</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <span class="comment">// mark detector presence obligatory in the track of given type</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html">AlignableDetector</a>* det = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">getDetector</a>(detID);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <span class="keywordflow">if</span> (!det) {</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(error) &lt;&lt; <span class="stringliteral">&quot;Detector &quot;</span> &lt;&lt; detID &lt;&lt; <span class="stringliteral">&quot; is not defined&quot;</span>;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  }</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>) {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a678e10c669e4888db84293055af9ceec">mObligatoryDetPattern</a>[trtype] |= detID.<a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#adac7a102f5bca83a2da785828482f19f">getMask</a>();</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a678e10c669e4888db84293055af9ceec">mObligatoryDetPattern</a>[trtype] &amp;= ~detID.<a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#adac7a102f5bca83a2da785828482f19f">getMask</a>();</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  }</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <span class="keywordflow">if</span> (det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#acf8d4d7d0056ef1eda3b7ef74be004d8">isObligatory</a>(trtype) != <a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>) {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a6bc01c29ab994756657541038e3f26e8">setObligatory</a>(trtype, <a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>);</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  }</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;}</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160; </div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment">//____________________________________________</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aef2336c7f1c1b6ee073a6fdc20534228"> 1305</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aef2336c7f1c1b6ee073a6fdc20534228">Controller::addVertexConstraint</a>()</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;{</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(fatal) &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; <span class="stringliteral">&quot; is disabled&quot;</span>;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <span class="comment">//FIXME(milettri): needs AliESDtrack</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <span class="comment">//  // if vertex is set and if particle is primary, add vertex as a meared point</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="comment">//  const AliESDtrack* esdTr = fESDTrack[0];</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="comment">//  if (!fVertex || !esdTr){</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <span class="comment">//    return false;}</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  <span class="comment">//  if (esdTr-&gt;GetNcls(0) &lt; mMinITSClforVC){</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  <span class="comment">//    return false;} // not enough ITS clusters</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  <span class="comment">//  if (!AlignableDetectorITS::CheckHitPattern(esdTr, mITSPattforVC)){</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <span class="comment">//    return false;}</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="comment">//  AliExternalTrackParam trc = *esdTr;</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <span class="comment">//  double dz[2], dzCov[3];</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <span class="comment">//  if (!trc.PropagateToDCA(fVertex, AliTrackerBase::GetBz(), 2 * mMaxDCAforVC[0], dz, dzCov)){</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="comment">//    return false;}</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <span class="comment">//  // check if primary candidate</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="comment">//  if (Abs(dz[0]) &gt; mMaxDCAforVC[0] || Abs(dz[1]) &gt; mMaxDCAforVC[1]){</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="comment">//    return false;}</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="comment">//  double covar[6];</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="comment">//  fVertex-&gt;GetCovMatrix(covar);</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="comment">//  double p[2] = {trc.GetParameter()[0] - dz[0], trc.GetParameter()[1] - dz[1]};</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="comment">//  double c[3] = {0.5 * (covar[0] + covar[2]), 0., covar[5]};</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="comment">//  double chi2 = trc.GetPredictedChi2(p, c);</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="comment">//  if (chi2 &gt; mMaxChi2forVC){</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <span class="comment">//    return false;}</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <span class="comment">//  // assing measured vertex rotated to VtxSens frame as reference point</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="comment">//  double xyz[3], xyzT[3];</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="comment">//  fVertex-&gt;GetXYZ(xyz);</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  <span class="comment">//  mVtxSens-&gt;setAlpha(trc.GetAlpha());</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="comment">//  // usually translation from GLO to TRA frame should go via matrix T2G</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <span class="comment">//  // but for the VertexSensor Local and Global are the same frames</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="comment">//  mVtxSens-&gt;applyCorrection(xyz);</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <span class="comment">//  mVtxSens-&gt;getMatrixT2L().MasterToLocal(xyz, xyzT);</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="comment">//  mRefPoint-&gt;setSensor(mVtxSens);</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="comment">//  mRefPoint-&gt;setAlphaSens(mVtxSens-&gt;getAlpTracking());</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <span class="comment">//  mRefPoint-&gt;setXYZTracking(xyzT);</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <span class="comment">//  mRefPoint-&gt;setYZErrTracking(c);</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="comment">//  mRefPoint-&gt;setContainsMeasurement(true);</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="comment">//  mRefPoint-&gt;init();</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;}</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160; </div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment">//FIXME(milettri): needs OCDB</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment"></span><span class="comment">//void Controller::writeCalibrationResults() const</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="comment">//{</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="comment">//  // writes output calibration</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment">//  CleanOCDB();</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment">//  AliCDBManager::Instance()-&gt;SetDefaultStorage(mOutCDBPath.c_str());</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">//  AlignableDetector* det;</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment">//  for (auto id=DetID::First; id&lt;=DetID::Last; id++) {</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="comment">//    if (!(det = getDetector(id)) || det-&gt;isDisabled()){</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;<span class="comment">//      continue;</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="comment">//    }</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment">//    det-&gt;writeCalibrationResults();</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">//FIXME(milettri): needs OCDB</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="comment"></span><span class="comment">//void Controller::SetOutCDBRunRange(int rmin, int rmax)</span></div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="comment">//{</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="comment">//  // set output run range</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment">//  mOutCDBRunRange[0] = rmin &gt;= 0 ? rmin : 0;</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment">//  mOutCDBRunRange[1] = rmax &gt; mOutCDBRunRange[0] ? rmax : AliCDBRunRange::Infinity();</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160; </div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="comment">//FIXME(milettri): needs OCDB</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment"></span><span class="comment">//bool Controller::LoadRefOCDB()</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment">//{</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment">//  // setup OCDB whose objects will be used as a reference with respect to which the</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment">//  // alignment/calibration will prodice its corrections.</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="comment">//  // Detectors which need some reference calibration data must use this one</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="comment">//  LOG(info) &lt;&lt; &quot;Loading reference OCDB&quot;);</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="comment">//  CleanOCDB();</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="comment">//  AliCDBManager* man = AliCDBManager::Instance();</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="comment">//  if (!mRefOCDBConf.IsNull() &amp;&amp; !gSystem-&gt;AccessPathName(mRefOCDBConf.c_str(), kFileExists)) {</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="comment">//    LOG(info) &lt;&lt; &quot;Executing reference OCDB setup macro %s&quot;, mRefOCDBConf.c_str());</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="comment">//    if (mRefRunNumber &gt; 0){</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment">//      gROOT-&gt;ProcessLine(Form(&quot;.x %s(%d)&quot;, mRefOCDBConf.c_str(), mRefRunNumber));}</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment">//    else</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment">//      gROOT-&gt;ProcessLine(Form(&quot;.x %s&quot;, mRefOCDBConf.c_str()));</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="comment">//  } else {</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="comment">//    LOG(warning) &lt;&lt; &quot;No reference OCDB config macro &quot;&lt;&lt;mRefOCDBConf.c_str()&lt;&lt;&quot; is found, assume raw:// with run &quot; &lt;&lt; AliCDBRunRange::Infinity();</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="comment">//    man-&gt;SetRaw(true);</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="comment">//    man-&gt;SetRun(AliCDBRunRange::Infinity());</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment">//  if (AliGeomManager::GetGeometry()) {</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment">//    LOG(info) &lt;&lt; &quot;Destroying current geometry before loading reference one&quot;);</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="comment">//    AliGeomManager::Destroy();</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment">//  AliGeomManager::LoadGeometry(&quot;geometry.root&quot;);</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="comment">//  if (!AliGeomManager::GetGeometry()){</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="comment">//    LOG(fatal) &lt;&lt; &quot;Failed to load geometry, cannot run&quot;);}</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment">//  TString detList = &quot;&quot;;</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;<span class="comment">//  for (int i = 0; i &lt; kNDetectors; i++) {</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="comment">//    detList += getDetNameByDetID(i);</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="comment">//    detList += &quot; &quot;;</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="comment">//  AliGeomManager::ApplyAlignObjsFromCDB(detList.c_str());</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="comment">//  mRefOCDBLoaded++;</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="comment">//  //</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="comment">//  return true;</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160; </div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="comment">//________________________________________________________</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a44970f828abce26873381a3ac5d12a8c"> 1427</a></span>&#160;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html">AlignableDetector</a>* <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a44970f828abce26873381a3ac5d12a8c">Controller::getDetOfDOFID</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>)<span class="keyword"> const</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <span class="comment">// return detector owning DOF with this ID</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> = <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a666cd79f5455f093305e9fd378424b24">DetID::First</a>; <span class="keywordtype">id</span> &lt;= <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#abcc91d93fec0c5d7ec39149238112669">DetID::Last</a>; <span class="keywordtype">id</span>++) {</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html">AlignableDetector</a>* det = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">getDetector</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="keywordflow">if</span> (det &amp;&amp; det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a84b95e83681748b32e1641be6c5210b0">ownsDOFID</a>(<span class="keywordtype">id</span>)) {</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <span class="keywordflow">return</span> det;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    }</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  }</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;}</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160; </div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="comment">//________________________________________________________</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#af002fdac8a32eeff73099425c7eb5105"> 1440</a></span>&#160;<a class="code" href="../../dc/d32/classo2_1_1align_1_1AlignableVolume.html">AlignableVolume</a>* <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#af002fdac8a32eeff73099425c7eb5105">Controller::getVolOfDOFID</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>)<span class="keyword"> const</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  <span class="comment">// return volume owning DOF with this ID</span></div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> = <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a666cd79f5455f093305e9fd378424b24">DetID::First</a>; <span class="keywordtype">id</span> &lt;= <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#abcc91d93fec0c5d7ec39149238112669">DetID::Last</a>; <span class="keywordtype">id</span>++) {</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html">AlignableDetector</a>* det = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">getDetector</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <span class="keywordflow">if</span> (det &amp;&amp; det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a84b95e83681748b32e1641be6c5210b0">ownsDOFID</a>(<span class="keywordtype">id</span>)) {</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;      <span class="keywordflow">return</span> det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a924501755dbbd303fed332ed3a024f79">getVolOfDOFID</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    }</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  }</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a> &amp;&amp; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a>-&gt;ownsDOFID(<span class="keywordtype">id</span>)) {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a>.get();</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  }</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;}</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;<span class="comment">//________________________________________________________</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a0ddeb2b0a8265eab490f4d10b2d5238d"> 1456</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a0ddeb2b0a8265eab490f4d10b2d5238d">Controller::terminate</a>(<span class="keywordtype">bool</span> doStat)</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;{</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <span class="comment">// finalize processing</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab5685515628734e5dfe603c04ab4bd06">mRunNumber</a> &gt; 0) {</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a314c163db2649a0d3cd462a1946b53d9">fillStatHisto</a>(<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a07b5bc50be6324158c4562e1954ce783a13c9039d64d27263c22e10f971eba749">kRunDone</a>);</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  }</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <span class="keywordflow">if</span> (doStat) {</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a>) {</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a>-&gt;fillDOFStat(<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2ccd9e0887c8eda38bb8b817fa04c932">mDOFStat</a>);</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    }</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  }</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> = <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a666cd79f5455f093305e9fd378424b24">DetID::First</a>; <span class="keywordtype">id</span> &lt;= <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#abcc91d93fec0c5d7ec39149238112669">DetID::Last</a>; <span class="keywordtype">id</span>++) {</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">getDetector</a>(<span class="keywordtype">id</span>)) {</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;      <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">getDetector</a>(<span class="keywordtype">id</span>)-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#ac2cf08ce1dede008381c967e804d8b9e">terminate</a>();</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    }</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  }</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a751e2c1726ab2a9a949e41577d71cbcc">closeMPRecOutput</a>();</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab45f96af88a02cde1d13ade4f99e24f3">closeMilleOutput</a>();</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a4d7fd49c637f234a3de4416cfd2e1d9e">closeResidOutput</a>();</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab83b64b8a3848e6e1a041e0fdb5e79d4">Print</a>(<span class="stringliteral">&quot;stat&quot;</span>);</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;}</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160; </div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;<span class="comment">//________________________________________________________</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a4f4a22182a2842cdd522216297f46f62"> 1481</a></span>&#160;Char_t* <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a4f4a22182a2842cdd522216297f46f62">Controller::getDOFLabelTxt</a>(<span class="keywordtype">int</span> idf)<span class="keyword"> const</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="comment">// get DOF full label</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <a class="code" href="../../dc/d32/classo2_1_1align_1_1AlignableVolume.html">AlignableVolume</a>* vol = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#af002fdac8a32eeff73099425c7eb5105">getVolOfDOFID</a>(idf);</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <span class="keywordflow">if</span> (vol) {</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordflow">return</span> Form(<span class="stringliteral">&quot;%d_%s_%s&quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab4341d805426a7a2b912963b2952200f">getGloParLab</a>(idf), vol-&gt;<a class="code" href="../../dc/d32/classo2_1_1align_1_1AlignableVolume.html#ac2c9545e90c458d81b2d9d5c81c1f3ec">getSymName</a>(),</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                vol-&gt;<a class="code" href="../../dc/d32/classo2_1_1align_1_1AlignableVolume.html#aeb936da521bd9c1fcd87b859eeba8f83">getDOFName</a>(idf - vol-&gt;<a class="code" href="../../da/dbd/classo2_1_1align_1_1DOFSet.html#a61c8e60f84963e6bcd3243e34242d315">getFirstParGloID</a>()));</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  }</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <span class="comment">// this might be detector-specific calibration dof</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html">AlignableDetector</a>* det = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a44970f828abce26873381a3ac5d12a8c">getDetOfDOFID</a>(idf);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <span class="keywordflow">if</span> (det) {</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <span class="keywordflow">return</span> Form(<span class="stringliteral">&quot;%d_%s_%s&quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab4341d805426a7a2b912963b2952200f">getGloParLab</a>(idf), det-&gt;GetName(),</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;                det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#abbc2c2e27071961391e0645f69034a91">getCalibDOFName</a>(idf - det-&gt;<a class="code" href="../../da/dbd/classo2_1_1align_1_1DOFSet.html#a61c8e60f84963e6bcd3243e34242d315">getFirstParGloID</a>()));</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  }</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;}</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160; </div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="comment">//********************* interaction with PEDE **********************</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160; </div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;<span class="comment">//______________________________________________________</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a8cc81fbb2f51884a45eb2d2ab324d4ec"> 1502</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a8cc81fbb2f51884a45eb2d2ab324d4ec">Controller::genPedeSteerFile</a>(<span class="keyword">const</span> Option_t* opt)<span class="keyword"> const</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <span class="comment">// produce steering file template for PEDE + params and constraints</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  <span class="keyword">enum</span> { kOff,</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;         kOn,</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;         kOnOn };</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* cmt[3] = {<span class="stringliteral">&quot;  &quot;</span>, <span class="stringliteral">&quot;! &quot;</span>, <span class="stringliteral">&quot;!!&quot;</span>};</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* kSolMeth[] = {<span class="stringliteral">&quot;inversion&quot;</span>, <span class="stringliteral">&quot;diagonalization&quot;</span>, <span class="stringliteral">&quot;fullGMRES&quot;</span>, <span class="stringliteral">&quot;sparseGMRES&quot;</span>, <span class="stringliteral">&quot;cholesky&quot;</span>, <span class="stringliteral">&quot;HIP&quot;</span>};</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kDefNIter = 3;     <span class="comment">// default number of iterations to ask</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> kDefDelta = 0.1; <span class="comment">// def. delta to exit</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  TString opts = opt;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  opts.ToLower();</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Generating MP2 templates:\n &quot;</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;Steering   :\t&quot;</span> &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a5a3d5dec9772a1549dc59aedb8fc3090">mMPSteerFileName</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;Parameters :\t&quot;</span> &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa2162779e8fc1ace23288c8a4c51201c">mMPParFileName</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;Constraints:\t&quot;</span> &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#abe7243bf0c28bf363c6b706edc90ca5c">mMPConFileName</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  FILE* parFl = fopen(<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa2162779e8fc1ace23288c8a4c51201c">mMPParFileName</a>.c_str(), <span class="stringliteral">&quot;w+&quot;</span>);</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  FILE* strFl = fopen(<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a5a3d5dec9772a1549dc59aedb8fc3090">mMPSteerFileName</a>.c_str(), <span class="stringliteral">&quot;w+&quot;</span>);</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  <span class="comment">// --- template of steering file</span></div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  fprintf(strFl, <span class="stringliteral">&quot;%-20s%s %s\n&quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa2162779e8fc1ace23288c8a4c51201c">mMPParFileName</a>.c_str(), cmt[kOnOn], <span class="stringliteral">&quot;parameters template&quot;</span>);</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  fprintf(strFl, <span class="stringliteral">&quot;%-20s%s %s\n&quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#abe7243bf0c28bf363c6b706edc90ca5c">mMPConFileName</a>.c_str(), cmt[kOnOn], <span class="stringliteral">&quot;constraints template&quot;</span>);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  fprintf(strFl, <span class="stringliteral">&quot;\n\n%s %s\n&quot;</span>, cmt[kOnOn], <span class="stringliteral">&quot;MUST uncomment 1 solving methods and tune it&quot;</span>);</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <span class="keywordtype">int</span> nm = <span class="keyword">sizeof</span>(kSolMeth) / <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; nm; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    fprintf(strFl, <span class="stringliteral">&quot;%s%s %-20s %2d %.2f %s\n&quot;</span>, cmt[kOn], <span class="stringliteral">&quot;method&quot;</span>, kSolMeth[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], kDefNIter, kDefDelta, cmt[kOnOn]);</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  }</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> kDefChi2F0 = 20., kDefChi2F = 3.; <span class="comment">// chi2 factors for 1st and following iterations</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> kDefDWFrac = 0.2;                 <span class="comment">// cut outliers with downweighting above this factor</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kDefOutlierDW = 4;                  <span class="comment">// start Cauchy function downweighting from iteration</span></div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kDefEntries = 25;                   <span class="comment">// min entries per DOF to allow its variation</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  fprintf(strFl, <span class="stringliteral">&quot;\n\n%s %s\n&quot;</span>, cmt[kOnOn], <span class="stringliteral">&quot;Optional settings&quot;</span>);</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  fprintf(strFl, <span class="stringliteral">&quot;\n%s%-20s %.2f %.2f %s %s\n&quot;</span>, cmt[kOn], <span class="stringliteral">&quot;chisqcut&quot;</span>, kDefChi2F0, kDefChi2F,</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;          cmt[kOnOn], <span class="stringliteral">&quot;chi2 cut factors for 1st and next iterations&quot;</span>);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  fprintf(strFl, <span class="stringliteral">&quot;%s%-20s %2d %s %s\n&quot;</span>, cmt[kOn], <span class="stringliteral">&quot;outlierdownweighting&quot;</span>, kDefOutlierDW,</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;          cmt[kOnOn], <span class="stringliteral">&quot;iteration for outliers downweighting with Cauchi factor&quot;</span>);</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  fprintf(strFl, <span class="stringliteral">&quot;%s%-20s %.3f %s %s\n&quot;</span>, cmt[kOn], <span class="stringliteral">&quot;dwfractioncut&quot;</span>, kDefDWFrac,</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;          cmt[kOnOn], <span class="stringliteral">&quot;cut outliers with downweighting above this factor&quot;</span>);</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  fprintf(strFl, <span class="stringliteral">&quot;%s%-20s %2d %s %s\n&quot;</span>, cmt[kOn], <span class="stringliteral">&quot;entries&quot;</span>, kDefEntries,</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;          cmt[kOnOn], <span class="stringliteral">&quot;min entries per DOF to allow its variation&quot;</span>);</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  fprintf(strFl, <span class="stringliteral">&quot;\n\n\n%s%-20s %s %s\n\n\n&quot;</span>, cmt[kOff], <span class="stringliteral">&quot;CFiles&quot;</span>, cmt[kOnOn], <span class="stringliteral">&quot;put below *.mille files list&quot;</span>);</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a>) {</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">mVtxSens</a>-&gt;writePedeInfo(parFl, opt);</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  }</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> = <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a666cd79f5455f093305e9fd378424b24">DetID::First</a>; <span class="keywordtype">id</span> &lt;= <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#abcc91d93fec0c5d7ec39149238112669">DetID::Last</a>; <span class="keywordtype">id</span>++) {</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html">AlignableDetector</a>* det = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">getDetector</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="keywordflow">if</span> (!det || det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#af3521c1731173e442309c1b242d8bb81">isDisabled</a>()) {</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    }</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#acae3925504dba844ccb984a8f54cfbf8">writePedeInfo</a>(parFl, opt);</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  }</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9cb8abcd8a39b2a9aac5b4cc387b8ca2">writePedeConstraints</a>();</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  fclose(strFl);</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  fclose(parFl);</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;}</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160; </div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="comment">//___________________________________________________________</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa479bc45d69e0dc49fbf3ef33c41406a"> 1572</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa479bc45d69e0dc49fbf3ef33c41406a">Controller::readParameters</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* parfile, <span class="keywordtype">bool</span> useErrors)</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;{</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="comment">// read parameters file (millepede output)</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a> &lt; 1 || <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aaa674f74e4061048372f13f0e2b13537">mGloParVal</a>.size() || <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a771ac7d0ee6f262dc9b2527c36cd5db9">mGloParErr</a>.size()) {</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(error) &lt;&lt; <span class="stringliteral">&quot;Something is wrong in init: mNDOFs=&quot;</span> &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a> &lt;&lt; <span class="stringliteral">&quot; N GloParVal=&quot;</span> &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aaa674f74e4061048372f13f0e2b13537">mGloParVal</a>.size() &lt;&lt; <span class="stringliteral">&quot; N GloParErr=&quot;</span> &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a771ac7d0ee6f262dc9b2527c36cd5db9">mGloParErr</a>.size();</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  }</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  ifstream inpf(parfile);</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <span class="keywordflow">if</span> (!inpf.good()) {</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    printf(<span class="stringliteral">&quot;Failed on input filename %s\n&quot;</span>, parfile);</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  }</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aaa674f74e4061048372f13f0e2b13537">mGloParVal</a>.resize(<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a>);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <span class="keywordflow">if</span> (useErrors) {</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a771ac7d0ee6f262dc9b2527c36cd5db9">mGloParErr</a>.resize(<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a>);</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  }</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  <span class="keywordtype">int</span> cnt = 0;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  TString fline;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  fline.ReadLine(inpf);</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  fline = fline.Strip(TString::kBoth, <span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;  fline.ToLower();</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  <span class="keywordflow">if</span> (!fline.BeginsWith(<span class="stringliteral">&quot;parameter&quot;</span>)) {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(error) &lt;&lt; <span class="stringliteral">&quot;First line is not parameter keyword: &quot;</span> &lt;&lt; fline.Data();</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  }</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aa13d73852e3d050fbad707978af4ce40">v0</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#aabdd9aabede45fcf97cea04f88d2ad60">v1</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#ae35401c8c2fcdcc48c20ba325ee473ea">v2</a>;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="keywordtype">int</span> lab, asg = 0, asg0 = 0;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="keywordflow">while</span> (fline.ReadLine(inpf)) {</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    cnt++;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    fline = fline.Strip(TString::kBoth, <span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="keywordflow">if</span> (fline.BeginsWith(<span class="stringliteral">&quot;!&quot;</span>) || fline.BeginsWith(<span class="stringliteral">&quot;*&quot;</span>)) {</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    } <span class="comment">// ignore comment</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="keywordtype">int</span> nr = sscanf(fline.Data(), <span class="stringliteral">&quot;%d%lf%lf%lf&quot;</span>, &amp;lab, &amp;<a class="code" href="../../dc/da3/glcorearb_8h.html#aa13d73852e3d050fbad707978af4ce40">v0</a>, &amp;<a class="code" href="../../dc/da3/glcorearb_8h.html#aabdd9aabede45fcf97cea04f88d2ad60">v1</a>, &amp;<a class="code" href="../../dc/da3/glcorearb_8h.html#ae35401c8c2fcdcc48c20ba325ee473ea">v2</a>);</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="keywordflow">if</span> (nr &lt; 3) {</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(error) &lt;&lt; <span class="stringliteral">&quot;Expected to read at least 3 numbers, got &quot;</span> &lt;&lt; nr &lt;&lt; <span class="stringliteral">&quot;, this is NOT milleped output&quot;</span>;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(error) &lt;&lt; <span class="stringliteral">&quot;line (&quot;</span> &lt;&lt; cnt &lt;&lt; <span class="stringliteral">&quot;) was:\n &quot;</span> &lt;&lt; fline.Data();</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    }</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="keywordflow">if</span> (nr == 3) {</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      asg0++;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    }</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="keywordtype">int</span> parID = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a89f5de3123cad35255f5db9d685e1726">label2ParID</a>(lab);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    <span class="keywordflow">if</span> (parID &lt; 0 || parID &gt;= <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a>) {</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(error) &lt;&lt; <span class="stringliteral">&quot;Invalid label &quot;</span> &lt;&lt; lab &lt;&lt; <span class="stringliteral">&quot; at line &quot;</span> &lt;&lt; cnt &lt;&lt; <span class="stringliteral">&quot; -&gt; ParID=&quot;</span> &lt;&lt; parID;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    }</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aaa674f74e4061048372f13f0e2b13537">mGloParVal</a>[parID] = -<a class="code" href="../../dc/da3/glcorearb_8h.html#aa13d73852e3d050fbad707978af4ce40">v0</a>;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="keywordflow">if</span> (useErrors) {</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a771ac7d0ee6f262dc9b2527c36cd5db9">mGloParErr</a>[parID] = <a class="code" href="../../dc/da3/glcorearb_8h.html#aabdd9aabede45fcf97cea04f88d2ad60">v1</a>;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    }</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    asg++;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  };</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Read &quot;</span> &lt;&lt; cnt &lt;&lt; <span class="stringliteral">&quot; lines, assigned &quot;</span> &lt;&lt; asg &lt;&lt; <span class="stringliteral">&quot; values, &quot;</span> &lt;&lt; asg0 &lt;&lt; <span class="stringliteral">&quot; dummy&quot;</span>;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;}</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160; </div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="comment">//______________________________________________________</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a703d317ec4b1bd76f9d6cf188c0984fd"> 1631</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a703d317ec4b1bd76f9d6cf188c0984fd">Controller::checkConstraints</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a7eca977aec48ecd8d48ebd7558c0538c">params</a>)</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;{</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  <span class="comment">// check how the constraints are satisfied with already uploaded or provided params</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/da3/glcorearb_8h.html#a7eca977aec48ecd8d48ebd7558c0538c">params</a> &amp;&amp; !<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa479bc45d69e0dc49fbf3ef33c41406a">readParameters</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a7eca977aec48ecd8d48ebd7558c0538c">params</a>)) {</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(error) &lt;&lt; <span class="stringliteral">&quot;Failed to load parameters from &quot;</span> &lt;&lt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a7eca977aec48ecd8d48ebd7558c0538c">params</a>;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  }</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;  <span class="keywordtype">int</span> ncon = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac7dccafdfccd917d93d7490340a1e863">getNConstraints</a>();</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> icon = 0; icon &lt; ncon; icon++) {</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../dd/d85/classo2_1_1align_1_1GeometricalConstraint.html">GeometricalConstraint</a>* con = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a32378aa3eb5562ce974eb44157bfb20b">getConstraint</a>(icon);</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    con-&gt;<a class="code" href="../../dd/d85/classo2_1_1align_1_1GeometricalConstraint.html#a4f86ee32d8e09312fc32347539419fd5">checkConstraint</a>();</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  }</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;}</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160; </div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;<span class="comment">//___________________________________________________________</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a54ac9b326f115af6fc03cd4a84182fc2"> 1649</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a54ac9b326f115af6fc03cd4a84182fc2">Controller::mPRec2Mille</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* mprecfile, <span class="keyword">const</span> <span class="keywordtype">char</span>* millefile, <span class="keywordtype">bool</span> bindata)</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;{</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  <span class="comment">// converts MPRecord tree to millepede binary format</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  TFile* flmpr = TFile::Open(mprecfile);</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="keywordflow">if</span> (!flmpr) {</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(error) &lt;&lt; <span class="stringliteral">&quot;Failed to open MPRecord file &quot;</span> &lt;&lt; mprecfile;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  }</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  TTree* mprTree = (TTree*)flmpr-&gt;Get(<span class="stringliteral">&quot;mpTree&quot;</span>);</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="keywordflow">if</span> (!mprTree) {</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(error) &lt;&lt; <span class="stringliteral">&quot;No mpTree in xMPRecord file &quot;</span> &lt;&lt; mprecfile;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  }</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a54ac9b326f115af6fc03cd4a84182fc2">mPRec2Mille</a>(mprTree, millefile, bindata);</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  <span class="keyword">delete</span> mprTree;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  flmpr-&gt;Close();</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  <span class="keyword">delete</span> flmpr;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;}</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160; </div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;<span class="comment">//___________________________________________________________</span></div>
<div class="line"><a name="l01669"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a6dcee63af806930f7f607422e368218f"> 1669</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a54ac9b326f115af6fc03cd4a84182fc2">Controller::mPRec2Mille</a>(TTree* mprTree, <span class="keyword">const</span> <span class="keywordtype">char</span>* millefile, <span class="keywordtype">bool</span> bindata)</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;{</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <span class="comment">// converts MPRecord tree to millepede binary format</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  TBranch* br = mprTree-&gt;GetBranch(<span class="stringliteral">&quot;mprec&quot;</span>);</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  <span class="keywordflow">if</span> (!br) {</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(error) &lt;&lt; <span class="stringliteral">&quot;provided tree does not contain branch mprec&quot;</span>;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  }</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <a class="code" href="../../d5/d9b/classo2_1_1align_1_1Millepede2Record.html">Millepede2Record</a>* <a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a> = <span class="keyword">new</span> <a class="code" href="../../d5/d9b/classo2_1_1align_1_1Millepede2Record.html">Millepede2Record</a>();</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  br-&gt;SetAddress(&amp;<a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>);</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  <span class="keywordtype">int</span> nent = mprTree-&gt;GetEntries();</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  TString mlname = millefile;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  <span class="keywordflow">if</span> (mlname.IsNull()) {</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    mlname = <span class="stringliteral">&quot;mpRec2mpData&quot;</span>;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  }</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;  <span class="keywordflow">if</span> (!mlname.EndsWith(<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab2537e2df7f51095f6ee6db3bbf51dc9">sMPDataExt</a>)) {</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    mlname += <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab2537e2df7f51095f6ee6db3bbf51dc9">sMPDataExt</a>;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  }</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  <a class="code" href="../../d6/df1/classo2_1_1align_1_1Mille.html">Mille</a>* mille = <span class="keyword">new</span> <a class="code" href="../../d6/df1/classo2_1_1align_1_1Mille.html">Mille</a>(mlname, bindata);</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  TArrayF buffDLoc;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; nent; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    br-&gt;GetEntry(<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <span class="keywordtype">int</span> nr = <a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>-&gt;getNResid(); <span class="comment">// number of residual records</span></div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <span class="keywordtype">int</span> nloc = <a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>-&gt;getNVarLoc();</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <span class="keywordflow">if</span> (buffDLoc.GetSize() &lt; nloc) {</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;      buffDLoc.Set(nloc + 100);</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    }</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordtype">float</span>* buffLocV = buffDLoc.GetArray();</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* recDGlo = <a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>-&gt;getArrGlo();</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* recDLoc = <a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>-&gt;getArrLoc();</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">short</span>* recLabLoc = <a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>-&gt;getArrLabLoc();</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span>* recLabGlo = <a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>-&gt;getArrLabGlo();</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../db/dbc/test__ctf__io__ctp_8cxx.html#a7c662e4f033cd397d59721887ffd5c5a">ir</a> = 0; <a class="code" href="../../db/dbc/test__ctf__io__ctp_8cxx.html#a7c662e4f033cd397d59721887ffd5c5a">ir</a> &lt; nr; <a class="code" href="../../db/dbc/test__ctf__io__ctp_8cxx.html#a7c662e4f033cd397d59721887ffd5c5a">ir</a>++) {</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      memset(buffLocV, 0, nloc * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;      <span class="keywordtype">int</span> ndglo = <a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>-&gt;getNDGlo(<a class="code" href="../../db/dbc/test__ctf__io__ctp_8cxx.html#a7c662e4f033cd397d59721887ffd5c5a">ir</a>);</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      <span class="keywordtype">int</span> ndloc = <a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>-&gt;getNDLoc(<a class="code" href="../../db/dbc/test__ctf__io__ctp_8cxx.html#a7c662e4f033cd397d59721887ffd5c5a">ir</a>);</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;      <span class="comment">// fill 0-suppressed array from MPRecord to non-0-suppressed array of Mille</span></div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l = ndloc; l--;) {</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        buffLocV[recLabLoc[l]] = recDLoc[l];</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      }</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;      mille-&gt;<a class="code" href="../../d6/df1/classo2_1_1align_1_1Mille.html#a3924879b779f0628d88fc31b497f8807">mille</a>(nloc, buffLocV, ndglo, recDGlo, recLabGlo, <a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>-&gt;getResid(<a class="code" href="../../db/dbc/test__ctf__io__ctp_8cxx.html#a7c662e4f033cd397d59721887ffd5c5a">ir</a>), <a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>-&gt;getResErr(<a class="code" href="../../db/dbc/test__ctf__io__ctp_8cxx.html#a7c662e4f033cd397d59721887ffd5c5a">ir</a>));</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      recLabGlo += ndglo; <span class="comment">// next record</span></div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;      recDGlo += ndglo;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;      recLabLoc += ndloc;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;      recDLoc += ndloc;</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    }</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    mille-&gt;<a class="code" href="../../d6/df1/classo2_1_1align_1_1Mille.html#ad498dda1f44233f9930ef290bf0080ea">end</a>();</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  }</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <span class="keyword">delete</span> mille;</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  br-&gt;SetAddress(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <span class="keyword">delete</span> <a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;}</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160; </div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;<span class="comment">//____________________________________________________________</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a314c163db2649a0d3cd462a1946b53d9"> 1727</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a314c163db2649a0d3cd462a1946b53d9">Controller::fillStatHisto</a>(<span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>, <span class="keywordtype">float</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#adb12a0d439f32ca388b2c806150cc54d">w</a>)</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;{</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a447c8e8ee3341d95043f1bce839a97e8">mHistoStat</a>) {</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9c709cedbc2bcf4321e904666b5c7a2a">createStatHisto</a>();</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  }</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a447c8e8ee3341d95043f1bce839a97e8">mHistoStat</a>-&gt;Fill((<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa591c384264e0b304e7223c35408c5de">isCosmic</a>() ? <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a07b5bc50be6324158c4562e1954ce783a6ea08cd1eb0d078f073708c616046889">kNHVars</a> : 0) + <a class="code" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#adb12a0d439f32ca388b2c806150cc54d">w</a>);</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;}</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160; </div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;<span class="comment">//____________________________________________________________</span></div>
<div class="line"><a name="l01736"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9c709cedbc2bcf4321e904666b5c7a2a"> 1736</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9c709cedbc2bcf4321e904666b5c7a2a">Controller::createStatHisto</a>()</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;{</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a447c8e8ee3341d95043f1bce839a97e8">mHistoStat</a> = <span class="keyword">new</span> TH1F(<span class="stringliteral">&quot;stat&quot;</span>, <span class="stringliteral">&quot;stat&quot;</span>, 2 * <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a07b5bc50be6324158c4562e1954ce783a6ea08cd1eb0d078f073708c616046889">kNHVars</a>, -0.5, 2 * <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a07b5bc50be6324158c4562e1954ce783a6ea08cd1eb0d078f073708c616046889">kNHVars</a> - 0.5);</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a447c8e8ee3341d95043f1bce839a97e8">mHistoStat</a>-&gt;SetDirectory(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;  TAxis* xax = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a447c8e8ee3341d95043f1bce839a97e8">mHistoStat</a>-&gt;GetXaxis();</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> = 0; <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> &lt; 2; <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>++) {</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a07b5bc50be6324158c4562e1954ce783a6ea08cd1eb0d078f073708c616046889">kNHVars</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      xax-&gt;SetBinLabel(<a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> * <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a07b5bc50be6324158c4562e1954ce783a6ea08cd1eb0d078f073708c616046889">kNHVars</a> + <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1, Form(<span class="stringliteral">&quot;%s.%s&quot;</span>, <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a> ? <span class="stringliteral">&quot;CSM&quot;</span> : <span class="stringliteral">&quot;COL&quot;</span>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a136c7de92290618e5a83dbd4776c549a">sHStatName</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]));</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    }</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  }</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;}</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160; </div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;<span class="comment">//____________________________________________________________</span></div>
<div class="line"><a name="l01749"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9d335ee6af86f270ac1b14dce5277ad8"> 1749</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9d335ee6af86f270ac1b14dce5277ad8">Controller::printLabels</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <span class="comment">// print global IDs and Labels</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    printf(<span class="stringliteral">&quot;%5d %s\n&quot;</span>, <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a4f4a22182a2842cdd522216297f46f62">getDOFLabelTxt</a>(<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  }</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;}</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160; </div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;<span class="comment">//____________________________________________________________</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a89f5de3123cad35255f5db9d685e1726"> 1758</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a89f5de3123cad35255f5db9d685e1726">Controller::label2ParID</a>(<span class="keywordtype">int</span> lab)<span class="keyword"> const</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;  <span class="comment">// convert Mille label to ParID (slow)</span></div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  <span class="keywordtype">int</span> ind = 0; <span class="comment">// FIXME RS TODO // findKeyIndex(lab, mOrderedLbl, mNDOFs);</span></div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  <span class="keywordflow">if</span> (ind &lt; 0) {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  }</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a41f6517d9c3ffdd8fc6a4242245478b0">mLbl2ID</a>[ind];</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;}</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160; </div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;<span class="comment">//____________________________________________________________</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a1bab27452ca072373bcf84dab4fc16b5"> 1769</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a1bab27452ca072373bcf84dab4fc16b5">Controller::addAutoConstraints</a>()</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;{</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  <span class="comment">// add default constraints on children cumulative corrections within the volumes</span></div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> = <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a666cd79f5455f093305e9fd378424b24">DetID::First</a>; <span class="keywordtype">id</span> &lt;= <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#abcc91d93fec0c5d7ec39149238112669">DetID::Last</a>; <span class="keywordtype">id</span>++) {</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html">AlignableDetector</a>* det = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">getDetector</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    <span class="keywordflow">if</span> (!det || det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#af3521c1731173e442309c1b242d8bb81">isDisabled</a>()) {</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    }</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#aedd7a12ee284117e48afd81f3d964c72">addAutoConstraints</a>();</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  }</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Added &quot;</span> &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac7dccafdfccd917d93d7490340a1e863">getNConstraints</a>() &lt;&lt; <span class="stringliteral">&quot; automatic constraints&quot;</span>;</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;}</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160; </div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;<span class="comment">//____________________________________________________________</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9cb8abcd8a39b2a9aac5b4cc387b8ca2"> 1783</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9cb8abcd8a39b2a9aac5b4cc387b8ca2">Controller::writePedeConstraints</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <span class="comment">// write constraints file</span></div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;  FILE* conFl = fopen(<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#abe7243bf0c28bf363c6b706edc90ca5c">mMPConFileName</a>.c_str(), <span class="stringliteral">&quot;w+&quot;</span>);</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <span class="keywordtype">int</span> nconstr = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac7dccafdfccd917d93d7490340a1e863">getNConstraints</a>();</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> icon = 0; icon &lt; nconstr; icon++) {</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a32378aa3eb5562ce974eb44157bfb20b">getConstraint</a>(icon)-&gt;<a class="code" href="../../dd/d85/classo2_1_1align_1_1GeometricalConstraint.html#a161eca262bef0ce3c64109f12864405f">writeChildrenConstraints</a>(conFl);</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  }</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  fclose(conFl);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;}</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160; </div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="comment">//____________________________________________________________</span></div>
<div class="line"><a name="l01797"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a83d0fd125a60e5131b1fdeccc63e918f"> 1797</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a83d0fd125a60e5131b1fdeccc63e918f">Controller::fixLowStatFromDOFStat</a>(<span class="keywordtype">int</span> thresh)</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;{</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <span class="comment">// fix DOFs having stat below threshold</span></div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a> != <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2ccd9e0887c8eda38bb8b817fa04c932">mDOFStat</a>.<a class="code" href="../../df/d1b/classo2_1_1align_1_1DOFStatistics.html#ab4058839b3736fa15bc2a6d03c427a68">getNDOFs</a>()) {</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(error) &lt;&lt; <span class="stringliteral">&quot;Discrepancy between NDOFs=&quot;</span> &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a> &lt;&lt; <span class="stringliteral">&quot; of and statistics object: &quot;</span> &lt;&lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2ccd9e0887c8eda38bb8b817fa04c932">mDOFStat</a>.<a class="code" href="../../df/d1b/classo2_1_1align_1_1DOFStatistics.html#ab4058839b3736fa15bc2a6d03c427a68">getNDOFs</a>();</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  }</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> parID = 0; parID &lt; <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a>; parID++) {</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2ccd9e0887c8eda38bb8b817fa04c932">mDOFStat</a>.<a class="code" href="../../df/d1b/classo2_1_1align_1_1DOFStatistics.html#a0f8c6e46e6b1036b2d43174428f7e395">getStat</a>(parID) &gt;= thresh) {</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    }</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a771ac7d0ee6f262dc9b2527c36cd5db9">mGloParErr</a>[parID] = -999.;</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  }</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;}</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160; </div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;<span class="comment">//____________________________________________________________</span></div>
<div class="line"><a name="l01815"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a76c3ae2334e79cdf13410024148044fe"> 1815</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a76c3ae2334e79cdf13410024148044fe">Controller::loadStat</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* flname)</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;{</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;  <span class="comment">// load statistics histos from external file produced by alignment task</span></div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;  TFile* fl = TFile::Open(flname);</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  <a class="code" href="../../d5/d0f/classTObject.html">TObject</a> *hdfO = <span class="keyword">nullptr</span>, *hstO = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  TList* lst = (TList*)fl-&gt;Get(<span class="stringliteral">&quot;clist&quot;</span>);</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <span class="keywordflow">if</span> (lst) {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    hdfO = lst-&gt;FindObject(<span class="stringliteral">&quot;DOFstat&quot;</span>);</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    <span class="keywordflow">if</span> (hdfO) {</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      lst-&gt;Remove(hdfO);</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    }</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    hstO = lst-&gt;FindObject(<span class="stringliteral">&quot;stat&quot;</span>);</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="keywordflow">if</span> (hstO) {</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;      lst-&gt;Remove(hstO);</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    }</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    <span class="keyword">delete</span> lst;</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    hdfO = fl-&gt;Get(<span class="stringliteral">&quot;DOFstat&quot;</span>);</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    hstO = fl-&gt;Get(<span class="stringliteral">&quot;stat&quot;</span>);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  }</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  TH1F* hst = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;  <span class="keywordflow">if</span> (hstO &amp;&amp; (hst = <span class="keyword">dynamic_cast&lt;</span>TH1F*<span class="keyword">&gt;</span>(hstO))) {</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    hst-&gt;SetDirectory(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(warning) &lt;&lt; <span class="stringliteral">&quot;did not find stat histo&quot;</span>;</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  }</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  <a class="code" href="../../df/d1b/classo2_1_1align_1_1DOFStatistics.html">DOFStatistics</a>* dofSt = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;  <span class="keywordflow">if</span> (!hdfO || !(dofSt = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../df/d1b/classo2_1_1align_1_1DOFStatistics.html">DOFStatistics</a>*<span class="keyword">&gt;</span>(hdfO))) {</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(warning) &lt;&lt; <span class="stringliteral">&quot;did not find DOFstat object&quot;</span>;</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  }</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aff08f6ddfc1f55f5021baf4627a146d8">setHistoStat</a>(hst);</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a1b137490b8e5938aca99225c28500fdd">setDOFStat</a>(*dofSt); <span class="comment">// FIXME RS TODO</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  fl-&gt;Close();</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  <span class="keyword">delete</span> fl;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;}</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160; </div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;<span class="comment">//______________________________________________</span></div>
<div class="line"><a name="l01856"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a58bf59eb7f233cf38e8ff80e4a422994"> 1856</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a58bf59eb7f233cf38e8ff80e4a422994">Controller::checkSol</a>(TTree* mpRecTree, <span class="keywordtype">bool</span> store,</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                          <span class="keywordtype">bool</span> <a class="code" href="../../dd/d98/dcs-ccdb_8cxx.html#ab3f078684998b83967d507d0f453f454">verbose</a>, <span class="keywordtype">bool</span> loc, <span class="keyword">const</span> <span class="keywordtype">char</span>* outName)</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;{</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <span class="comment">// do fast check of pede solution with MPRecord tree</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <a class="code" href="../../d6/dfb/classo2_1_1align_1_1ResidualsControllerFast.html">ResidualsControllerFast</a>* rLG = store ? <span class="keyword">new</span> <a class="code" href="../../d6/dfb/classo2_1_1align_1_1ResidualsControllerFast.html">ResidualsControllerFast</a>() : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <a class="code" href="../../d6/dfb/classo2_1_1align_1_1ResidualsControllerFast.html">ResidualsControllerFast</a>* rL = store &amp;&amp; loc ? <span class="keyword">new</span> <a class="code" href="../../d6/dfb/classo2_1_1align_1_1ResidualsControllerFast.html">ResidualsControllerFast</a>() : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  TTree *trLG = <span class="keyword">nullptr</span>, *trL = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  TFile* outFile = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <span class="keywordflow">if</span> (store) {</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    TString outNS = outName;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <span class="keywordflow">if</span> (outNS.IsNull()) {</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;      outNS = <span class="stringliteral">&quot;resFast&quot;</span>;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    }</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    <span class="keywordflow">if</span> (!outNS.EndsWith(<span class="stringliteral">&quot;.root&quot;</span>)) {</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      outNS += <span class="stringliteral">&quot;.root&quot;</span>;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    }</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    outFile = TFile::Open(outNS.Data(), <span class="stringliteral">&quot;recreate&quot;</span>);</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    trLG = <span class="keyword">new</span> TTree(<span class="stringliteral">&quot;resFLG&quot;</span>, <span class="stringliteral">&quot;Fast residuals with LG correction&quot;</span>);</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    trLG-&gt;Branch(<span class="stringliteral">&quot;rLG&quot;</span>, <span class="stringliteral">&quot;ResidualsControllerFast&quot;</span>, &amp;rLG);</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <span class="keywordflow">if</span> (rL) {</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;      trL = <span class="keyword">new</span> TTree(<span class="stringliteral">&quot;resFL&quot;</span>, <span class="stringliteral">&quot;Fast residuals with L correction&quot;</span>);</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;      trL-&gt;Branch(<span class="stringliteral">&quot;rL&quot;</span>, <span class="stringliteral">&quot;ResidualsControllerFast&quot;</span>, &amp;rL);</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    }</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  }</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  <a class="code" href="../../d5/d9b/classo2_1_1align_1_1Millepede2Record.html">Millepede2Record</a>* <a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a> = <span class="keyword">new</span> <a class="code" href="../../d5/d9b/classo2_1_1align_1_1Millepede2Record.html">Millepede2Record</a>();</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  mpRecTree-&gt;SetBranchAddress(<span class="stringliteral">&quot;mprec&quot;</span>, &amp;<a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>);</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <span class="keywordtype">int</span> nrec = mpRecTree-&gt;GetEntriesFast();</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> irec = 0; irec &lt; nrec; irec++) {</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    mpRecTree-&gt;GetEntry(irec);</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a58bf59eb7f233cf38e8ff80e4a422994">checkSol</a>(<a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>, rLG, rL, <a class="code" href="../../dd/d98/dcs-ccdb_8cxx.html#ab3f078684998b83967d507d0f453f454">verbose</a>, loc);</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="comment">// store even in case of failure, to have the trees aligned with controlRes</span></div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="keywordflow">if</span> (trLG) {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;      trLG-&gt;Fill();</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    }</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <span class="keywordflow">if</span> (trL) {</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      trL-&gt;Fill();</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    }</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;  }</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;  <span class="comment">// save</span></div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  <span class="keywordflow">if</span> (trLG) {</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    outFile-&gt;cd();</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    trLG-&gt;Write();</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <span class="keyword">delete</span> trLG;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="keywordflow">if</span> (trL) {</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;      trL-&gt;Write();</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      <span class="keyword">delete</span> trL;</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    }</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    outFile-&gt;Close();</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <span class="keyword">delete</span> outFile;</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  }</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;}</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160; </div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;<span class="comment">//______________________________________________</span></div>
<div class="line"><a name="l01913"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab4a090693e3e1bb35af11facf4b5baf6"> 1913</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a58bf59eb7f233cf38e8ff80e4a422994">Controller::checkSol</a>(<a class="code" href="../../d5/d9b/classo2_1_1align_1_1Millepede2Record.html">Millepede2Record</a>* <a class="code" href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a>,</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;                          <a class="code" href="../../d6/dfb/classo2_1_1align_1_1ResidualsControllerFast.html">ResidualsControllerFast</a>* rLG, <a class="code" href="../../d6/dfb/classo2_1_1align_1_1ResidualsControllerFast.html">ResidualsControllerFast</a>* rL,</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;                          <span class="keywordtype">bool</span> <a class="code" href="../../dd/d98/dcs-ccdb_8cxx.html#ab3f078684998b83967d507d0f453f454">verbose</a>, <span class="keywordtype">bool</span> loc)</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;{</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(fatal) &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; <span class="stringliteral">&quot; is disabled&quot;</span>;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <span class="comment">//FIXME(milettri): needs AliSymMatrix</span></div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  <span class="comment">//  // Check pede solution using derivates, rather than updated geometry</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <span class="comment">//  // If loc==true, also produces residuals for current geometry,</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <span class="comment">//  // neglecting global corrections</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="comment">//  if (rL){</span></div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <span class="comment">//    loc = true;} // if local sol. tree asked, always evaluate it</span></div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  <span class="comment">//  int nres = rec-&gt;getNResid();</span></div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  <span class="comment">//  const float* recDGlo = rec-&gt;getArrGlo();</span></div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <span class="comment">//  const float* recDLoc = rec-&gt;getArrLoc();</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  <span class="comment">//  const short* recLabLoc = rec-&gt;getArrLabLoc();</span></div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  <span class="comment">//  const int* recLabGlo = rec-&gt;getArrLabGlo();</span></div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  <span class="comment">//  int nvloc = rec-&gt;getNVarLoc();</span></div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;  <span class="comment">//  // count number of real measurement duplets and material correction fake 4-plets</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <span class="comment">//  int nPoints = 0;</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <span class="comment">//  int nMatCorr = 0;</span></div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <span class="comment">//  for (int irs = 0; irs &lt; nres; irs++) {</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <span class="comment">//    if (rec-&gt;getNDGlo(irs) &gt; 0) {</span></div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <span class="comment">//      if (irs == nres - 1 || rec-&gt;getNDGlo(irs + 1) == 0){</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <span class="comment">//        LOG(fatal) &lt;&lt; (&quot;Real coordinate measurements must come in pairs&quot;);}</span></div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  <span class="comment">//      nPoints++;</span></div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  <span class="comment">//      irs++; // skip 2nd</span></div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  <span class="comment">//      continue;</span></div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;  <span class="comment">//    } else if (rec-&gt;getResid(irs) == 0 &amp;&amp; rec-&gt;getVolID(irs) == -1) { // material corrections have 0 residual</span></div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  <span class="comment">//      nMatCorr++;</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;  <span class="comment">//    } else { // might be fixed parameter, global derivs are skept</span></div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  <span class="comment">//      nPoints++;</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;  <span class="comment">//      irs++; // skip 2nd</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;  <span class="comment">//      continue;</span></div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;  <span class="comment">//    }</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  <span class="comment">//  if (nMatCorr % 4){</span></div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;  <span class="comment">//    LOG(warning) &lt;&lt; &quot;Error? NMatCorr=&quot; &lt;&lt; nMatCorr &lt;&lt; &quot; is not multiple of 4&quot;;}</span></div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;  <span class="comment">//  if (rLG) {</span></div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;  <span class="comment">//    rLG-&gt;Clear();</span></div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;  <span class="comment">//    rLG-&gt;setNPoints(nPoints);</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  <span class="comment">//    rLG-&gt;setNMatSol(nMatCorr);</span></div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  <span class="comment">//    rLG-&gt;setCosmic(rec-&gt;isCosmic());</span></div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  <span class="comment">//  if (rL) {</span></div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <span class="comment">//    rL-&gt;Clear();</span></div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;  <span class="comment">//    rL-&gt;setNPoints(nPoints);</span></div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  <span class="comment">//    rL-&gt;setNMatSol(nMatCorr);</span></div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;  <span class="comment">//    rL-&gt;setCosmic(rec-&gt;isCosmic());</span></div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  <span class="comment">//  AliSymMatrix* matpG = new AliSymMatrix(nvloc);</span></div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  <span class="comment">//  TVectorD *vecp = 0, *vecpG = new TVectorD(nvloc);</span></div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;  <span class="comment">//  if (loc){</span></div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <span class="comment">//    vecp = new TVectorD(nvloc);}</span></div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;  <span class="comment">//  float chi2Ini = 0, chi2L = 0, chi2LG = 0;</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  <span class="comment">//  // residuals, accounting for global solution</span></div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  <span class="comment">//  double* resid = new double[nres];</span></div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;  <span class="comment">//  int* volID = new int[nres];</span></div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;  <span class="comment">//  for (int irs = 0; irs &lt; nres; irs++) {</span></div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  <span class="comment">//    double resOr = rec-&gt;getResid(irs);</span></div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;  <span class="comment">//    resid[irs] = resOr;</span></div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;  <span class="comment">//    //</span></div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  <span class="comment">//    int ndglo = rec-&gt;getNDGlo(irs);</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;  <span class="comment">//    int ndloc = rec-&gt;getNDLoc(irs);</span></div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;  <span class="comment">//    volID[irs] = 0;</span></div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;  <span class="comment">//    for (int ig = 0; ig &lt; ndglo; ig++) {</span></div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;  <span class="comment">//      int lbI = recLabGlo[ig];</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;  <span class="comment">//      int idP = label2ParID(lbI);</span></div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <span class="comment">//      if (idP &lt; 0){</span></div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  <span class="comment">//        LOG(fatal) &lt;&lt; &quot;Did not find parameted for label &quot; &lt;&lt; lbI;}</span></div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;  <span class="comment">//      double parVal = getGloParVal()[idP];</span></div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;  <span class="comment">//      //      resid[irs] -= parVal*recDGlo[ig];</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  <span class="comment">//      resid[irs] += parVal * recDGlo[ig];</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  <span class="comment">//      if (!ig) {</span></div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;  <span class="comment">//        AlignableVolume* vol = getVolOfDOFID(idP);</span></div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;  <span class="comment">//        if (vol){</span></div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  <span class="comment">//          volID[irs] = vol-&gt;getVolID();}</span></div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  <span class="comment">//        else</span></div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;  <span class="comment">//          volID[irs] = -2; // calibration DOF !!! TODO</span></div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;  <span class="comment">//      }</span></div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;  <span class="comment">//    }</span></div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  <span class="comment">//    //</span></div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  <span class="comment">//    double sg2inv = rec-&gt;getResErr(irs);</span></div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;  <span class="comment">//    sg2inv = 1. / (sg2inv * sg2inv);</span></div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;  <span class="comment">//    //</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  <span class="comment">//    chi2Ini += resid[irs] * resid[irs] * sg2inv; // chi accounting for global solution only</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;  <span class="comment">//    //</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  <span class="comment">//    // Build matrix to solve local parameters</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;  <span class="comment">//    for (int il = 0; il &lt; ndloc; il++) {</span></div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;  <span class="comment">//      int lbLI = recLabLoc[il]; // id of local variable</span></div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;  <span class="comment">//      (*vecpG)[lbLI] -= recDLoc[il] * resid[irs] * sg2inv;</span></div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  <span class="comment">//      if (loc){</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  <span class="comment">//        (*vecp)[lbLI] -= recDLoc[il] * resOr * sg2inv;}</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <span class="comment">//      for (int jl = il + 1; jl--;) {</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  <span class="comment">//        int lbLJ = recLabLoc[jl]; // id of local variable</span></div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <span class="comment">//        (*matpG)(lbLI, lbLJ) += recDLoc[il] * recDLoc[jl] * sg2inv;</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;  <span class="comment">//      }</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <span class="comment">//    }</span></div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  <span class="comment">//    //</span></div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  <span class="comment">//    recLabGlo += ndglo; // prepare for next record</span></div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  <span class="comment">//    recDGlo += ndglo;</span></div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;  <span class="comment">//    recLabLoc += ndloc;</span></div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  <span class="comment">//    recDLoc += ndloc;</span></div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  <span class="comment">//    //</span></div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <span class="comment">//  if (rL){</span></div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  <span class="comment">//    rL-&gt;setChi2Ini(chi2Ini);}</span></div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;  <span class="comment">//  if (rLG){</span></div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;  <span class="comment">//    rLG-&gt;setChi2Ini(chi2Ini);}</span></div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;  <span class="comment">//  TVectorD vecSol(nvloc);</span></div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;  <span class="comment">//  TVectorD vecSolG(nvloc);</span></div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <span class="comment">//  if (!matpG-&gt;SolveChol(*vecpG, vecSolG, false)) {</span></div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  <span class="comment">//    LOG(info) &lt;&lt; &quot;Failed to solve track corrected for globals&quot;;</span></div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;  <span class="comment">//    delete matpG;</span></div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;  <span class="comment">//    matpG = 0;</span></div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;  <span class="comment">//  } else if (loc) { // solution with local correction only</span></div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  <span class="comment">//    if (!matpG-&gt;SolveChol(*vecp, vecSol, false)) {</span></div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;  <span class="comment">//      LOG(info) &lt;&lt; &quot;Failed to solve track corrected for globals&quot;;</span></div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;  <span class="comment">//      delete matpG;</span></div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;  <span class="comment">//      matpG = 0;</span></div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;  <span class="comment">//    }</span></div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;  <span class="comment">//  delete vecpG;</span></div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;  <span class="comment">//  delete vecp;</span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <span class="comment">//  if (!matpG) { // failed</span></div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;  <span class="comment">//    delete[] resid;</span></div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  <span class="comment">//    delete[] volID;</span></div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <span class="comment">//    if (rLG){</span></div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;  <span class="comment">//      rLG-&gt;Clear();}</span></div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  <span class="comment">//    if (rL){</span></div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  <span class="comment">//      rL-&gt;Clear();}</span></div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  <span class="comment">//    return false;</span></div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;  <span class="comment">//  // check</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;  <span class="comment">//  recDGlo = rec-&gt;getArrGlo();</span></div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  <span class="comment">//  recDLoc = rec-&gt;getArrLoc();</span></div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;  <span class="comment">//  recLabLoc = rec-&gt;getArrLabLoc();</span></div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  <span class="comment">//  recLabGlo = rec-&gt;getArrLabGlo();</span></div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <span class="comment">//  if (verbose) {</span></div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <span class="comment">//    printf(loc ? &quot;Sol L/LG:\n&quot; : &quot;Sol LG:\n&quot;);</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  <span class="comment">//    int nExtP = (nvloc % 4) ? 5 : 4;</span></div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;  <span class="comment">//    for (int i = 0; i &lt; nExtP; i++){</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;  <span class="comment">//      loc ? printf(&quot;%+.3e/%+.3e &quot;, vecSol[i], vecSolG[i]) : printf(&quot;%+.3e &quot;, vecSolG[i]);}</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;  <span class="comment">//    printf(&quot;\n&quot;);</span></div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;  <span class="comment">//    bool nln = true;</span></div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;  <span class="comment">//    int cntL = 0;</span></div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  <span class="comment">//    for (int i = nExtP; i &lt; nvloc; i++) {</span></div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  <span class="comment">//      nln = true;</span></div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;  <span class="comment">//      loc ? printf(&quot;%+.3e/%+.3e &quot;, vecSol[i], vecSolG[i]) : printf(&quot;%+.3e &quot;, vecSolG[i]);</span></div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  <span class="comment">//      if (((++cntL) % 4) == 0) {</span></div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;  <span class="comment">//        printf(&quot;\n&quot;);</span></div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;  <span class="comment">//        nln = false;</span></div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;  <span class="comment">//      }</span></div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;  <span class="comment">//    }</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;  <span class="comment">//    if (!nln){</span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  <span class="comment">//      printf(&quot;\n&quot;);}</span></div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;  <span class="comment">//    if (loc){</span></div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;  <span class="comment">//      printf(&quot;%3s (%9s) %6s | [ %7s:%7s ] [ %7s:%7s ]\n&quot;, &quot;Pnt&quot;, &quot;Label&quot;,</span></div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;  <span class="comment">//             &quot;Sigma&quot;, &quot;resid&quot;, &quot;pull/L &quot;, &quot;resid&quot;, &quot;pull/LG&quot;);}</span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  <span class="comment">//    else{</span></div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;  <span class="comment">//      printf(&quot;%3s (%9s) %6s | [ %7s:%7s ]\n&quot;, &quot;Pnt&quot;, &quot;Label&quot;,</span></div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  <span class="comment">//             &quot;Sigma&quot;, &quot;resid&quot;, &quot;pull/LG&quot;);}</span></div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;  <span class="comment">//  int idMeas = -1, pntID = -1, matID = -1;</span></div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;  <span class="comment">//  for (int irs = 0; irs &lt; nres; irs++) {</span></div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;  <span class="comment">//    double resOr = rec-&gt;getResid(irs);</span></div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  <span class="comment">//    double resL = resOr;</span></div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;  <span class="comment">//    double resLG = resid[irs];</span></div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;  <span class="comment">//    double sg = rec-&gt;getResErr(irs);</span></div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;  <span class="comment">//    double sg2Inv = 1 / (sg * sg);</span></div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  <span class="comment">//    //</span></div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  <span class="comment">//    int ndglo = rec-&gt;getNDGlo(irs);</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;  <span class="comment">//    int ndloc = rec-&gt;getNDLoc(irs);</span></div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  <span class="comment">//    //</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;  <span class="comment">//    for (int il = 0; il &lt; ndloc; il++) {</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;  <span class="comment">//      int lbLI = recLabLoc[il]; // id of local variable</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;  <span class="comment">//      resL += recDLoc[il] * vecSol[lbLI];</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  <span class="comment">//      resLG += recDLoc[il] * vecSolG[lbLI];</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  <span class="comment">//    }</span></div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;  <span class="comment">//    //</span></div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;  <span class="comment">//    chi2L += resL * resL * sg2Inv;    // chi accounting for global solution only</span></div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  <span class="comment">//    chi2LG += resLG * resLG * sg2Inv; // chi accounting for global solution only</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;  <span class="comment">//    //</span></div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;  <span class="comment">//    if (ndglo || resOr != 0) { // real measurement</span></div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;  <span class="comment">//      idMeas++;</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;  <span class="comment">//      if (idMeas &gt; 1){</span></div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;  <span class="comment">//        idMeas = 0;}</span></div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;  <span class="comment">//      if (idMeas == 0){</span></div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;  <span class="comment">//        pntID++;} // measurements come in pairs</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;  <span class="comment">//      int lbl = rec-&gt;getVolID(irs);</span></div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  <span class="comment">//      lbl = ndglo ? recLabGlo[0] : 0; // TMP, until VolID is filled // RS!!!!</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  <span class="comment">//      if (rLG) {</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  <span class="comment">//        rLG-&gt;setResSigMeas(pntID, idMeas, resLG, sg);</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;  <span class="comment">//        if (idMeas == 0){</span></div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;  <span class="comment">//          rLG-&gt;setLabel(pntID, lbl, volID[irs]);}</span></div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;  <span class="comment">//      }</span></div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  <span class="comment">//      if (rL) {</span></div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  <span class="comment">//        rL-&gt;setResSigMeas(pntID, idMeas, resL, sg);</span></div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  <span class="comment">//        if (idMeas == 0){</span></div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  <span class="comment">//          rL-&gt;setLabel(pntID, lbl, volID[irs]);}</span></div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;  <span class="comment">//      }</span></div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;  <span class="comment">//    } else {</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;  <span class="comment">//      matID++; // mat.correcitons come in 4-plets, but we fill each separately</span></div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;  <span class="comment">//      //</span></div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  <span class="comment">//      if (rLG){</span></div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;  <span class="comment">//        rLG-&gt;setMatCorr(matID, resLG, sg);}</span></div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;  <span class="comment">//      if (rL){</span></div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <span class="comment">//        rL-&gt;setMatCorr(matID, resL, sg);}</span></div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;  <span class="comment">//    }</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;  <span class="comment">//    //</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  <span class="comment">//    if (verbose) {</span></div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;  <span class="comment">//      int lbl = rec-&gt;getVolID(irs);</span></div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;  <span class="comment">//      lbl = ndglo ? recLabGlo[0] : (resOr == 0 ? -1 : 0); // TMP, until VolID is filled // RS!!!!</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  <span class="comment">//      if (loc){</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  <span class="comment">//        printf(&quot;%3d (%9d) %6.4f | [%+.2e:%+7.2f] [%+.2e:%+7.2f]\n&quot;,</span></div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  <span class="comment">//               irs, lbl, sg, resL, resL / sg, resLG, resLG / sg);}</span></div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  <span class="comment">//      else</span></div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;  <span class="comment">//        printf(&quot;%3d (%9d) %6.4f | [%+.2e:%+7.2f]\n&quot;,</span></div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  <span class="comment">//               irs, lbl, sg, resLG, resLG / sg);</span></div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;  <span class="comment">//    }</span></div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  <span class="comment">//    //</span></div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;  <span class="comment">//    recLabGlo += ndglo; // prepare for next record</span></div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  <span class="comment">//    recDGlo += ndglo;</span></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  <span class="comment">//    recLabLoc += ndloc;</span></div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  <span class="comment">//    recDLoc += ndloc;</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  <span class="comment">//  if (rL){</span></div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <span class="comment">//    rL-&gt;setChi2(chi2L);}</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  <span class="comment">//  if (rLG){</span></div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <span class="comment">//    rLG-&gt;setChi2(chi2LG);}</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;  <span class="comment">//  if (verbose) {</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;  <span class="comment">//    printf(&quot;Chi: G = %e | LG = %e&quot;, chi2Ini, chi2LG);</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;  <span class="comment">//    if (loc){</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  <span class="comment">//      printf(&quot; | L = %e&quot;, chi2L);}</span></div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;  <span class="comment">//    printf(&quot;\n&quot;);</span></div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;  <span class="comment">//  // store track corrections</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  <span class="comment">//  int nTrCor = nvloc - matID - 1;</span></div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  <span class="comment">//  for (int i = 0; i &lt; nTrCor; i++) {</span></div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  <span class="comment">//    if (rLG){</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  <span class="comment">//      rLG-&gt;getTrCor()[i] = vecSolG[i];}</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;  <span class="comment">//    if (rL){</span></div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;  <span class="comment">//      rL-&gt;getTrCor()[i] = vecSol[i];}</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;  <span class="comment">//  //</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <span class="comment">//  delete[] resid;</span></div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <span class="comment">//  delete[] volID;</span></div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;}</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160; </div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;<span class="comment">//______________________________________________</span></div>
<div class="line"><a name="l02178"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#abccdce4f0be84779e2aa92a73f4cca17"> 2178</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#abccdce4f0be84779e2aa92a73f4cca17">Controller::applyAlignmentFromMPSol</a>()</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;{</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  <span class="comment">// apply alignment from millepede solution array to reference alignment level</span></div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Applying alignment from Millepede solution&quot;</span>;</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> = <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a666cd79f5455f093305e9fd378424b24">DetID::First</a>; <span class="keywordtype">id</span> &lt;= <a class="code" href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#abcc91d93fec0c5d7ec39149238112669">DetID::Last</a>; <span class="keywordtype">id</span>++) {</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html">AlignableDetector</a>* det = <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">getDetector</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <span class="keywordflow">if</span> (!det || det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#af3521c1731173e442309c1b242d8bb81">isDisabled</a>()) {</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    }</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    det-&gt;<a class="code" href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a08bf07fa7f7fa33d2bf3181c6decd835">applyAlignmentFromMPSol</a>();</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  }</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aeffd634c7deef4441eb261217ed0c01c">setMPAlignDone</a>();</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;}</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160; </div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="comment">//______________________________________________</span></div>
<div class="line"><a name="l02194"></a><span class="lineno"><a class="line" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a55e22f6a433add68b08eae7cb74f0ecd"> 2194</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a55e22f6a433add68b08eae7cb74f0ecd">Controller::expandGlobalsBy</a>(<span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a0788d3762d0c3c76e4c094d8078b4c27">n</a>)</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;{</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;  <span class="comment">// expand global param contaiers by n</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  <span class="keywordtype">int</span> snew = <a class="code" href="../../dc/da3/glcorearb_8h.html#a0788d3762d0c3c76e4c094d8078b4c27">n</a> + <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aaa674f74e4061048372f13f0e2b13537">mGloParVal</a>.size();</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#aaa674f74e4061048372f13f0e2b13537">mGloParVal</a>.resize(snew);</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a771ac7d0ee6f262dc9b2527c36cd5db9">mGloParErr</a>.resize(snew);</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#afe055bdc24506c4faf4a22894a688d0d">mGloParLab</a>.resize(snew);</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac41fd665d5277d1c40bdb6edc0138cb3">mOrderedLbl</a>.resize(snew);</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a41f6517d9c3ffdd8fc6a4242245478b0">mLbl2ID</a>.resize(snew);</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  <a class="code" href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">mNDOFs</a> += <a class="code" href="../../dc/da3/glcorearb_8h.html#a0788d3762d0c3c76e4c094d8078b4c27">n</a>;</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;}</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160; </div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;} <span class="comment">// namespace align</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;} <span class="comment">// namespace o2</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a85a82483da26aef98ef8b0301cea7cb2"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a85a82483da26aef98ef8b0301cea7cb2">o2::align::Controller::fillMPRecData</a></div><div class="ttdeci">bool fillMPRecData()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00827">Controller.cxx:827</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1GeometricalConstraint_html_a161eca262bef0ce3c64109f12864405f"><div class="ttname"><a href="../../dd/d85/classo2_1_1align_1_1GeometricalConstraint.html#a161eca262bef0ce3c64109f12864405f">o2::align::GeometricalConstraint::writeChildrenConstraints</a></div><div class="ttdeci">virtual void writeChildrenConstraints(FILE *conOut) const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/GeometricalConstraint_8cxx_source.html#l00067">GeometricalConstraint.cxx:67</a></div></div>
<div class="ttc" id="astructo2_1_1globaltracking_1_1RecoContainer_html"><div class="ttname"><a href="../../da/d4a/structo2_1_1globaltracking_1_1RecoContainer.html">o2::globaltracking::RecoContainer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1a/RecoContainer_8h_source.html#l00238">RecoContainer.h:238</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a068fabfd36d36a9df7fdfeb485f3257ea69878a01171c6ab7f7593ff1baca6ebf"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a068fabfd36d36a9df7fdfeb485f3257ea69878a01171c6ab7f7593ff1baca6ebf">o2::align::Controller::kContR</a></div><div class="ttdeci">@ kContR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00103">Controller.h:103</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ac41fd665d5277d1c40bdb6edc0138cb3"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac41fd665d5277d1c40bdb6edc0138cb3">o2::align::Controller::mOrderedLbl</a></div><div class="ttdeci">std::vector&lt; int &gt; mOrderedLbl</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00362">Controller.h:362</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ab5be11954531aaa5f63ff1756b389982"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab5be11954531aaa5f63ff1756b389982">o2::align::Controller::mControlFrac</a></div><div class="ttdeci">float mControlFrac</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00371">Controller.h:371</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a54ac9b326f115af6fc03cd4a84182fc2"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a54ac9b326f115af6fc03cd4a84182fc2">o2::align::Controller::mPRec2Mille</a></div><div class="ttdeci">static void mPRec2Mille(const char *mprecfile, const char *millefile=&quot;mpData.mille&quot;, bool bindata=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01649">Controller.cxx:1649</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a0ddeb2b0a8265eab490f4d10b2d5238d"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a0ddeb2b0a8265eab490f4d10b2d5238d">o2::align::Controller::terminate</a></div><div class="ttdeci">void terminate(bool dostat=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01456">Controller.cxx:1456</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableVolume_html_aeb936da521bd9c1fcd87b859eeba8f83"><div class="ttname"><a href="../../dc/d32/classo2_1_1align_1_1AlignableVolume.html#aeb936da521bd9c1fcd87b859eeba8f83">o2::align::AlignableVolume::getDOFName</a></div><div class="ttdeci">virtual const char * getDOFName(int i) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/daa/AlignableVolume_8cxx_source.html#l00858">AlignableVolume.cxx:858</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a8cc81fbb2f51884a45eb2d2ab324d4ec"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a8cc81fbb2f51884a45eb2d2ab324d4ec">o2::align::Controller::genPedeSteerFile</a></div><div class="ttdeci">void genPedeSteerFile(const Option_t *opt=&quot;&quot;) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01502">Controller.cxx:1502</a></div></div>
<div class="ttc" id="aclasso2_1_1detectors_1_1DetID_html_abcc91d93fec0c5d7ec39149238112669"><div class="ttname"><a href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#abcc91d93fec0c5d7ec39149238112669">o2::detectors::DetID::Last</a></div><div class="ttdeci">static constexpr ID Last</div><div class="ttdoc">if extra detectors added, update this !!!</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d31/DetID_8h_source.html#l00086">DetID.h:86</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a61a51c7b6b3220bc06097146dc90f4b5"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a61a51c7b6b3220bc06097146dc90f4b5">o2::align::Controller::setMPSteerFileName</a></div><div class="ttdeci">void setMPSteerFileName(const char *name=&quot;mpSteer.txt&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01253">Controller.cxx:1253</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ac4f960dcff9aca90977625faa6a317b8"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac4f960dcff9aca90977625faa6a317b8">o2::align::Controller::mVtxSens</a></div><div class="ttdeci">std::unique_ptr&lt; EventVertex &gt; mVtxSens</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00353">Controller.h:353</a></div></div>
<div class="ttc" id="anamespaceo2_1_1mch_1_1raw_html_a6e7ce7f181ce758ed3f6cb6b2b1edeab"><div class="ttname"><a href="../../d2/d26/namespaceo2_1_1mch_1_1raw.html#a6e7ce7f181ce758ed3f6cb6b2b1edeab">o2::mch::raw::align</a></div><div class="ttdeci">void align(gsl::span&lt; ElinkEncoder&lt; BareFormat, CHARGESUM &gt;&gt; elinks)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2e/BareElinkEncoderMerger_8h_source.html#l00036">BareElinkEncoderMerger.h:36</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html">o2::align::AlignableDetector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d66/AlignableDetector_8h_source.html#l00041">AlignableDetector.h:41</a></div></div>
<div class="ttc" id="aRawData_8h_html_a97e3bb97951482c8cf4d55a2d0bfcb62"><div class="ttname"><a href="../../dc/d62/RawData_8h.html#a97e3bb97951482c8cf4d55a2d0bfcb62">res</a></div><div class="ttdeci">uint32_t res</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d62/RawData_8h_source.html#l00233">RawData.h:233</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_ae2d3db041c6004a67047659b42f73a44"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ae2d3db041c6004a67047659b42f73a44">format</a></div><div class="ttdeci">GLint GLint GLsizei GLint GLenum format</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00275">glcorearb.h:275</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetectorITS_html"><div class="ttname"><a href="../../dd/d68/classo2_1_1align_1_1AlignableDetectorITS.html">o2::align::AlignableDetectorITS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/AlignableDetectorITS_8h_source.html#l00031">AlignableDetectorITS.h:31</a></div></div>
<div class="ttc" id="aclasso2_1_1conf_1_1ConfigurableParamHelper_html_acd640717f419212c67fecff71d876d39"><div class="ttname"><a href="../../d7/d50/classo2_1_1conf_1_1ConfigurableParamHelper.html#acd640717f419212c67fecff71d876d39">o2::conf::ConfigurableParamHelper&lt; AlignConfig &gt;::Instance</a></div><div class="ttdeci">static const AlignConfig &amp; Instance()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d6b/ConfigurableParamHelper_8h_source.html#l00076">ConfigurableParamHelper.h:76</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Mille_html_ad498dda1f44233f9930ef290bf0080ea"><div class="ttname"><a href="../../d6/df1/classo2_1_1align_1_1Mille.html#ad498dda1f44233f9930ef290bf0080ea">o2::align::Mille::end</a></div><div class="ttdeci">int end()</div><div class="ttdoc">Write buffer (set of derivatives with same local parameters) to file.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d18/Mille_8cxx_source.html#l00185">Mille.cxx:185</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a59293ce2999807db7950230027956691"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a59293ce2999807db7950230027956691">o2::align::Controller::initMPRecOutput</a></div><div class="ttdeci">void initMPRecOutput()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01159">Controller.cxx:1159</a></div></div>
<div class="ttc" id="aEventVertex_8h_html"><div class="ttname"><a href="../../de/d0f/EventVertex_8h.html">EventVertex.h</a></div><div class="ttdoc">Special fake &quot;sensor&quot; for event vertex.</div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_acae3925504dba844ccb984a8f54cfbf8"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#acae3925504dba844ccb984a8f54cfbf8">o2::align::AlignableDetector::writePedeInfo</a></div><div class="ttdeci">virtual void writePedeInfo(FILE *parOut, const Option_t *opt=&quot;&quot;) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9a/AlignableDetector_8cxx_source.html#l00439">AlignableDetector.cxx:439</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ad6afd754b57d14534ffbc35196e18280"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ad6afd754b57d14534ffbc35196e18280">o2::align::Controller::mResidFile</a></div><div class="ttdeci">std::unique_ptr&lt; TFile &gt; mResidFile</div><div class="ttdoc">file to store MP record tree</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00382">Controller.h:382</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_af8931d014d9915da19d64c727f05aafb"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#af8931d014d9915da19d64c727f05aafb">o2::align::Controller::setInitGeomDone</a></div><div class="ttdeci">void setInitGeomDone()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00152">Controller.h:152</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a462ad9819c31ac50dc592059d9d36186"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a462ad9819c31ac50dc592059d9d36186">o2::align::Controller::assignDOFs</a></div><div class="ttdeci">void assignDOFs()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00247">Controller.cxx:247</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ab0385d4235576f99512347dcab596d3c"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab0385d4235576f99512347dcab596d3c">o2::align::Controller::mMilleDBuffer</a></div><div class="ttdeci">TArrayF mMilleDBuffer</div><div class="ttdoc">file to store control residuals tree</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00383">Controller.h:383</a></div></div>
<div class="ttc" id="aAlignableDetectorITS_8h_html"><div class="ttname"><a href="../../db/d10/AlignableDetectorITS_8h.html">AlignableDetectorITS.h</a></div><div class="ttdoc">ITS detector wrapper.</div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a16801e07225b1967be20404286a86c4f"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a16801e07225b1967be20404286a86c4f">o2::align::Controller::mOutCDBPath</a></div><div class="ttdeci">std::string mOutCDBPath</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00393">Controller.h:393</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a744dda3f11e0a47786cc2dcaa5c5cd84"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a744dda3f11e0a47786cc2dcaa5c5cd84">o2::align::Controller::setRunNumber</a></div><div class="ttdeci">void setRunNumber(int run)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00880">Controller.cxx:880</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_acc23d0b5fa30b9ffe3fcd49026ebfdf6"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#acc23d0b5fa30b9ffe3fcd49026ebfdf6">o2::align::Controller::mMPRecFile</a></div><div class="ttdeci">std::unique_ptr&lt; TFile &gt; mMPRecFile</div><div class="ttdoc">tree to store control residuals</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00381">Controller.h:381</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_aa4487bb8e4d5cf6a0bb4cb62cab4e981"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa4487bb8e4d5cf6a0bb4cb62cab4e981">o2::align::Controller::initDetectors</a></div><div class="ttdeci">void initDetectors()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00163">Controller.cxx:163</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableVolume_html"><div class="ttname"><a href="../../dc/d32/classo2_1_1align_1_1AlignableVolume.html">o2::align::AlignableVolume</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/AlignableVolume_8h_source.html#l00045">AlignableVolume.h:45</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a45694d504d72fb7fd49fed121c4bbc0a"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a45694d504d72fb7fd49fed121c4bbc0a">o2::align::Controller::getProduceMPData</a></div><div class="ttdeci">bool getProduceMPData() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00279">Controller.h:279</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_adb12a0d439f32ca388b2c806150cc54d"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#adb12a0d439f32ca388b2c806150cc54d">w</a></div><div class="ttdeci">GLubyte GLubyte GLubyte GLubyte w</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00852">glcorearb.h:852</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a821803439a6a71597f2caf3ad18e58ae"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a821803439a6a71597f2caf3ad18e58ae">o2::align::Controller::mRefPoint</a></div><div class="ttdeci">std::unique_ptr&lt; AlignmentPoint &gt; mRefPoint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00365">Controller.h:365</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ab4341d805426a7a2b912963b2952200f"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab4341d805426a7a2b912963b2952200f">o2::align::Controller::getGloParLab</a></div><div class="ttdeci">auto &amp; getGloParLab()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00194">Controller.h:194</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_aa591c384264e0b304e7223c35408c5de"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa591c384264e0b304e7223c35408c5de">o2::align::Controller::isCosmic</a></div><div class="ttdeci">bool isCosmic() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00178">Controller.h:178</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Mille_html_a3924879b779f0628d88fc31b497f8807"><div class="ttname"><a href="../../d6/df1/classo2_1_1align_1_1Mille.html#a3924879b779f0628d88fc31b497f8807">o2::align::Mille::mille</a></div><div class="ttdeci">void mille(int NLC, const float *derLc, int NGL, const float *derGl, const int *label, float rMeas, float sigma)</div><div class="ttdoc">Add measurement to buffer.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d18/Mille_8cxx_source.html#l00077">Mille.cxx:77</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a38594f31723db7094fa3e3783362fb9c"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a38594f31723db7094fa3e3783362fb9c">o2::align::Controller::mMPRecTree</a></div><div class="ttdeci">std::unique_ptr&lt; TTree &gt; mMPRecTree</div><div class="ttdoc">control residuals</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00379">Controller.h:379</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a068fabfd36d36a9df7fdfeb485f3257eace228e2f256c66a7932c5a13d7c71cbc"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a068fabfd36d36a9df7fdfeb485f3257eace228e2f256c66a7932c5a13d7c71cbc">o2::align::Controller::kMille</a></div><div class="ttdeci">@ kMille</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00101">Controller.h:101</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a40ff638938b73be7c415fa8aa75d9e9b"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a40ff638938b73be7c415fa8aa75d9e9b">o2::align::Controller::setObligatoryDetector</a></div><div class="ttdeci">void setObligatoryDetector(DetID id, int tp, bool v=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01286">Controller.cxx:1286</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a068fabfd36d36a9df7fdfeb485f3257ea955cbbdb5628f0ec7e75cf503a4b8d63"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a068fabfd36d36a9df7fdfeb485f3257ea955cbbdb5628f0ec7e75cf503a4b8d63">o2::align::Controller::kMPRec</a></div><div class="ttdeci">@ kMPRec</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00102">Controller.h:102</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a9e2442680952d82b26c32541219d6f33"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9e2442680952d82b26c32541219d6f33">o2::align::Controller::mAlgTrack</a></div><div class="ttdeci">std::unique_ptr&lt; AlignmentTrack &gt; mAlgTrack</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00349">Controller.h:349</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a1b137490b8e5938aca99225c28500fdd"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a1b137490b8e5938aca99225c28500fdd">o2::align::Controller::setDOFStat</a></div><div class="ttdeci">void setDOFStat(const DOFStatistics &amp;st)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00297">Controller.h:297</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a55e22f6a433add68b08eae7cb74f0ecd"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a55e22f6a433add68b08eae7cb74f0ecd">o2::align::Controller::expandGlobalsBy</a></div><div class="ttdeci">void expandGlobalsBy(int n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l02194">Controller.cxx:2194</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a1bab27452ca072373bcf84dab4fc16b5"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a1bab27452ca072373bcf84dab4fc16b5">o2::align::Controller::addAutoConstraints</a></div><div class="ttdeci">void addAutoConstraints()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01769">Controller.cxx:1769</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a2689e7e7128f82f7f428279a3398a4b2"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2689e7e7128f82f7f428279a3398a4b2">o2::align::Controller::mResidFileName</a></div><div class="ttdeci">std::string mResidFileName</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00389">Controller.h:389</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a4de220fe0a97f3b9338381ca31c72197"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a4de220fe0a97f3b9338381ca31c72197">o2::align::Controller::checkDetectorPattern</a></div><div class="ttdeci">bool checkDetectorPattern(DetID::mask_t patt) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00311">Controller.cxx:311</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Millepede2Record_html"><div class="ttname"><a href="../../d5/d9b/classo2_1_1align_1_1Millepede2Record.html">o2::align::Millepede2Record</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d23/Millepede2Record_8h_source.html#l00029">Millepede2Record.h:29</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a136c7de92290618e5a83dbd4776c549a"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a136c7de92290618e5a83dbd4776c549a">o2::align::Controller::sHStatName</a></div><div class="ttdeci">static const Char_t * sHStatName[kNHVars]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00408">Controller.h:408</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a4568fc090febc136eed4577a600739ca"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a></div><div class="ttdeci">const GLdouble * v</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00832">glcorearb.h:832</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a678e10c669e4888db84293055af9ceec"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a678e10c669e4888db84293055af9ceec">o2::align::Controller::mObligatoryDetPattern</a></div><div class="ttdeci">std::array&lt; DetID::mask_t, utils::NTrackTypes &gt; mObligatoryDetPattern</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00357">Controller.h:357</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignmentPoint_html_a9fdab48c8fceffe7a1132a8196f4a57d"><div class="ttname"><a href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a9fdab48c8fceffe7a1132a8196f4a57d">o2::align::AlignmentPoint::containsMaterial</a></div><div class="ttdeci">bool containsMaterial() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7a/AlignmentPoint_8h_source.html#l00089">AlignmentPoint.h:89</a></div></div>
<div class="ttc" id="aAlignableDetector_8h_html"><div class="ttname"><a href="../../d7/d66/AlignableDetector_8h.html">AlignableDetector.h</a></div><div class="ttdoc">Base class for detector: wrapper for set of volumes.</div></div>
<div class="ttc" id="aclasso2_1_1parameters_1_1GRPObject_html_ac3815c8e46962755bc43a6fe9bf54144"><div class="ttname"><a href="../../db/d74/classo2_1_1parameters_1_1GRPObject.html#ac3815c8e46962755bc43a6fe9bf54144">o2::parameters::GRPObject::loadFrom</a></div><div class="ttdeci">static GRPObject * loadFrom(const std::string &amp;grpFileName=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df6/GRPObject_8cxx_source.html#l00114">GRPObject.cxx:114</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_aaea6c318f0fe99a27fe58d4eae19dce4"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#aaea6c318f0fe99a27fe58d4eae19dce4">o2::align::AlignableDetector::getNPointsSel</a></div><div class="ttdeci">int getNPointsSel(int tp) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d66/AlignableDetector_8h_source.html#l00166">AlignableDetector.h:166</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a07b5bc50be6324158c4562e1954ce783a6ea08cd1eb0d078f073708c616046889"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a07b5bc50be6324158c4562e1954ce783a6ea08cd1eb0d078f073708c616046889">o2::align::Controller::kNHVars</a></div><div class="ttdeci">@ kNHVars</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00132">Controller.h:132</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_af3521c1731173e442309c1b242d8bb81"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#af3521c1731173e442309c1b242d8bb81">o2::align::AlignableDetector::isDisabled</a></div><div class="ttdeci">bool isDisabled(int tp) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d66/AlignableDetector_8h_source.html#l00151">AlignableDetector.h:151</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a3cf088abd3b11a7c72c0eb146ceb499c"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a3cf088abd3b11a7c72c0eb146ceb499c">o2::align::Controller::mMPDatFileName</a></div><div class="ttdeci">std::string mMPDatFileName</div><div class="ttdoc">buffer for Mille Indecis output</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00385">Controller.h:385</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignmentPoint_html_a7266a2ddaa635041b3c27abae662e398"><div class="ttname"><a href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a7266a2ddaa635041b3c27abae662e398">o2::align::AlignmentPoint::isStatOK</a></div><div class="ttdeci">bool isStatOK() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7a/AlignmentPoint_8h_source.html#l00095">AlignmentPoint.h:95</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_aaa674f74e4061048372f13f0e2b13537"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#aaa674f74e4061048372f13f0e2b13537">o2::align::Controller::mGloParVal</a></div><div class="ttdeci">std::vector&lt; float &gt; mGloParVal</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00359">Controller.h:359</a></div></div>
<div class="ttc" id="aGPUCommonAlgorithm_8h_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0b/GPUCommonAlgorithm_8h_source.html#l00412">GPUCommonAlgorithm.h:412</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a32378aa3eb5562ce974eb44157bfb20b"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a32378aa3eb5562ce974eb44157bfb20b">o2::align::Controller::getConstraint</a></div><div class="ttdeci">const GeometricalConstraint * getConstraint(int i) const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00168">Controller.h:168</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_af90983603395f80bd78cb86421a44717"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#af90983603395f80bd78cb86421a44717">o2::align::Controller::mStat</a></div><div class="ttdeci">ProcStat mStat</div><div class="ttdoc">reference point for track definition</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00368">Controller.h:368</a></div></div>
<div class="ttc" id="aNameConf_8h_html"><div class="ttname"><a href="../../d7/d61/NameConf_8h.html">NameConf.h</a></div><div class="ttdoc">Definition of the Names Generator class.</div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignmentPoint_html"><div class="ttname"><a href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html">o2::align::AlignmentPoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7a/AlignmentPoint_8h_source.html#l00040">AlignmentPoint.h:40</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_acf8d4d7d0056ef1eda3b7ef74be004d8"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#acf8d4d7d0056ef1eda3b7ef74be004d8">o2::align::AlignableDetector::isObligatory</a></div><div class="ttdeci">bool isObligatory(int tp) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d66/AlignableDetector_8h_source.html#l00171">AlignableDetector.h:171</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignmentPoint_html_a1a2a617c14aa576ce1879b1e205e9199"><div class="ttname"><a href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a1a2a617c14aa576ce1879b1e205e9199">o2::align::AlignmentPoint::getNGloDOFs</a></div><div class="ttdeci">int getNGloDOFs() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7a/AlignmentPoint_8h_source.html#l00178">AlignmentPoint.h:178</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1ResidualsController_html_a914e64f7578d5e626a630b3ad79cb182"><div class="ttname"><a href="../../d6/d8b/classo2_1_1align_1_1ResidualsController.html#a914e64f7578d5e626a630b3ad79cb182">o2::align::ResidualsController::Clear</a></div><div class="ttdeci">void Clear(const Option_t *opt=&quot;&quot;) final</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da1/ResidualsController_8cxx_source.html#l00133">ResidualsController.cxx:133</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_afc59262ee938370ba8b52a2bf44d2a6d"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#afc59262ee938370ba8b52a2bf44d2a6d">o2::align::Controller::resetDetectors</a></div><div class="ttdeci">void resetDetectors()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01039">Controller.cxx:1039</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignmentPoint_html_a6cb07efcebf6cb93c9e4f3a5312f9c25"><div class="ttname"><a href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a6cb07efcebf6cb93c9e4f3a5312f9c25">o2::align::AlignmentPoint::getMinLocVarID</a></div><div class="ttdeci">int getMinLocVarID() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7a/AlignmentPoint_8h_source.html#l00086">AlignmentPoint.h:86</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_abccdce4f0be84779e2aa92a73f4cca17"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#abccdce4f0be84779e2aa92a73f4cca17">o2::align::Controller::applyAlignmentFromMPSol</a></div><div class="ttdeci">void applyAlignmentFromMPSol()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l02178">Controller.cxx:2178</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a703d317ec4b1bd76f9d6cf188c0984fd"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a703d317ec4b1bd76f9d6cf188c0984fd">o2::align::Controller::checkConstraints</a></div><div class="ttdeci">void checkConstraints(const char *params=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01631">Controller.cxx:1631</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a2e0eb5dfb5cfde072349645db25de8ee"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2e0eb5dfb5cfde072349645db25de8ee">o2::align::Controller::setMPDatFileName</a></div><div class="ttdeci">void setMPDatFileName(const char *name=&quot;mpData&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01220">Controller.cxx:1220</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_aecd20af6ca8151eca0e921e9013201fa"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecd20af6ca8151eca0e921e9013201fa">o2::align::Controller::getDetector</a></div><div class="ttdeci">AlignableDetector * getDetector(DetID id) const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00215">Controller.h:215</a></div></div>
<div class="ttc" id="aFIT_2common_2include_2DataFormatsFIT_2RawEventData_8h_html_a7cbebadb91aee9b6f8324a73cb94b455"><div class="ttname"><a href="../../d6/d77/FIT_2common_2include_2DataFormatsFIT_2RawEventData_8h.html#a7cbebadb91aee9b6f8324a73cb94b455">print</a></div><div class="ttdeci">void print() const</div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ac7dccafdfccd917d93d7490340a1e863"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac7dccafdfccd917d93d7490340a1e863">o2::align::Controller::getNConstraints</a></div><div class="ttdeci">int getNConstraints() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00166">Controller.h:166</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a5468e16160e1f45185ba1f51de8f8a70"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a5468e16160e1f45185ba1f51de8f8a70">o2::align::Controller::getProduceMPRecord</a></div><div class="ttdeci">bool getProduceMPRecord() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00280">Controller.h:280</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a398b5f4a98330ba0dd4a0bad44391f4f"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a398b5f4a98330ba0dd4a0bad44391f4f">o2::align::Controller::mRefRunNumber</a></div><div class="ttdeci">int mRefRunNumber</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00402">Controller.h:402</a></div></div>
<div class="ttc" id="anamespaceo2_1_1dataformats_html"><div class="ttname"><a href="../../d1/dea/namespaceo2_1_1dataformats.html">o2::dataformats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfb/MeanVertexObject_8h_source.html#l00020">MeanVertexObject.h:20</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a447c8e8ee3341d95043f1bce839a97e8"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a447c8e8ee3341d95043f1bce839a97e8">o2::align::Controller::mHistoStat</a></div><div class="ttdeci">TH1F * mHistoStat</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00399">Controller.h:399</a></div></div>
<div class="ttc" id="adcs-ccdb_8cxx_html_ab3f078684998b83967d507d0f453f454"><div class="ttname"><a href="../../dd/d98/dcs-ccdb_8cxx.html#ab3f078684998b83967d507d0f453f454">verbose</a></div><div class="ttdeci">bool verbose</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d98/dcs-ccdb_8cxx_source.html#l00042">dcs-ccdb.cxx:42</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_a757d5a8fedec818f40b212fb878093cb"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a757d5a8fedec818f40b212fb878093cb">o2::align::AlignableDetector::getDetID</a></div><div class="ttdeci">auto getDetID() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d66/AlignableDetector_8h_source.html#l00054">AlignableDetector.h:54</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a0e3e3185a2d4363a081a3dd382c88fe4"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a0e3e3185a2d4363a081a3dd382c88fe4">o2::align::Controller::init</a></div><div class="ttdeci">void init()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00128">Controller.cxx:128</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_a6bc01c29ab994756657541038e3f26e8"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a6bc01c29ab994756657541038e3f26e8">o2::align::AlignableDetector::setObligatory</a></div><div class="ttdeci">void setObligatory(int tp, bool v=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9a/AlignableDetector_8cxx_source.html#l00431">AlignableDetector.cxx:431</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a89f5de3123cad35255f5db9d685e1726"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a89f5de3123cad35255f5db9d685e1726">o2::align::Controller::label2ParID</a></div><div class="ttdeci">int label2ParID(int lab) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01758">Controller.cxx:1758</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_abbc2c2e27071961391e0645f69034a91"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#abbc2c2e27071961391e0645f69034a91">o2::align::AlignableDetector::getCalibDOFName</a></div><div class="ttdeci">virtual const char * getCalibDOFName(int) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d66/AlignableDetector_8h_source.html#l00104">AlignableDetector.h:104</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a41f6517d9c3ffdd8fc6a4242245478b0"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a41f6517d9c3ffdd8fc6a4242245478b0">o2::align::Controller::mLbl2ID</a></div><div class="ttdeci">std::vector&lt; int &gt; mLbl2ID</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00363">Controller.h:363</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ae4a301001704a755613056222fb2529f"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae4a301001704a755613056222fb2529f">o2::align::Controller::mTracksType</a></div><div class="ttdeci">int mTracksType</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00348">Controller.h:348</a></div></div>
<div class="ttc" id="anamespaceo2_1_1align_1_1utils_html_a511f879137dd7ed072de88fab1fe5980"><div class="ttname"><a href="../../df/d72/namespaceo2_1_1align_1_1utils.html#a511f879137dd7ed072de88fab1fe5980">o2::align::utils::isZeroAbs</a></div><div class="ttdeci">constexpr bool isZeroAbs(double d) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/Detectors_2Align_2include_2Align_2utils_8h_source.html#l00176">utils.h:176</a></div></div>
<div class="ttc" id="anamespaceo2_html"><div class="ttname"><a href="../../d4/d7c/namespaceo2.html">o2</a></div><div class="ttdoc">information complementary to a CCDB object (path, metadata, startTimeValidity, endTimeValidity etc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d24/BitstreamReader_8h_source.html#l00023">BitstreamReader.h:23</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Mille_html"><div class="ttname"><a href="../../d6/df1/classo2_1_1align_1_1Mille.html">o2::align::Mille</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d09/Mille_8h_source.html#l00042">Mille.h:42</a></div></div>
<div class="ttc" id="aController_8h_html"><div class="ttname"><a href="../../de/d4a/Controller_8h.html">Controller.h</a></div><div class="ttdoc">Steering class for the global alignment.</div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_aef53cf54eb5b5f1a8f08c863cc52fe95"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#aef53cf54eb5b5f1a8f08c863cc52fe95">o2::align::AlignableDetector::Print</a></div><div class="ttdeci">void Print(const Option_t *opt=&quot;&quot;) const override</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9a/AlignableDetector_8cxx_source.html#l00357">AlignableDetector.cxx:357</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a7f59880f42d270f87abcebe27fb5c8f8"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7f59880f42d270f87abcebe27fb5c8f8">o2::align::Controller::mNDOFs</a></div><div class="ttdeci">int mNDOFs</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00345">Controller.h:345</a></div></div>
<div class="ttc" id="aAlignmentPoint_8h_html"><div class="ttname"><a href="../../df/d7a/AlignmentPoint_8h.html">AlignmentPoint.h</a></div><div class="ttdoc">Meausered point in the sensor.</div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a78935b50c06ade47ed595198fc6b837b"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a78935b50c06ade47ed595198fc6b837b">o2::align::Controller::getInitDOFsDone</a></div><div class="ttdeci">bool getInitDOFsDone() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00156">Controller.h:156</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a4d7fd49c637f234a3de4416cfd2e1d9e"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a4d7fd49c637f234a3de4416cfd2e1d9e">o2::align::Controller::closeResidOutput</a></div><div class="ttdeci">void closeResidOutput()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01194">Controller.cxx:1194</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_aacfdbb5b2c8605fe1c9f98453d818f8b"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#aacfdbb5b2c8605fe1c9f98453d818f8b">o2::align::Controller::mCResidPtr</a></div><div class="ttdeci">ResidualsController * mCResidPtr</div><div class="ttdoc">control residuals</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00377">Controller.h:377</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a9147f3700f84b749b4ea1727ccfeb236"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9147f3700f84b749b4ea1727ccfeb236">o2::align::Controller::mMPRecordPtr</a></div><div class="ttdeci">Millepede2Record * mMPRecordPtr</div><div class="ttdoc">MP record.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00375">Controller.h:375</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1DOFStatistics_html_a0f8c6e46e6b1036b2d43174428f7e395"><div class="ttname"><a href="../../df/d1b/classo2_1_1align_1_1DOFStatistics.html#a0f8c6e46e6b1036b2d43174428f7e395">o2::align::DOFStatistics::getStat</a></div><div class="ttdeci">int getStat(int idf) const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d80/DOFStatistics_8h_source.html#l00040">DOFStatistics.h:40</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1GeometricalConstraint_html"><div class="ttname"><a href="../../dd/d85/classo2_1_1align_1_1GeometricalConstraint.html">o2::align::GeometricalConstraint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/GeometricalConstraint_8h_source.html#l00040">GeometricalConstraint.h:40</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ae9e8e3a227424e34c869d0260b1ccda5"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae9e8e3a227424e34c869d0260b1ccda5">o2::align::Controller::mResidTree</a></div><div class="ttdeci">std::unique_ptr&lt; TTree &gt; mResidTree</div><div class="ttdoc">tree to store MP record</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00380">Controller.h:380</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignmentPoint_html_a7958336451573d60b3bacd6267183ee2"><div class="ttname"><a href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a7958336451573d60b3bacd6267183ee2">o2::align::AlignmentPoint::incrementStat</a></div><div class="ttdeci">void incrementStat()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7a/AlignmentPoint_8h_source.html#l00275">AlignmentPoint.h:275</a></div></div>
<div class="ttc" id="astructo2_1_1align_1_1Controller_1_1ProcStat_html_aa1b326e995a878bd79c5b716d9988157"><div class="ttname"><a href="../../d7/db0/structo2_1_1align_1_1Controller_1_1ProcStat.html#aa1b326e995a878bd79c5b716d9988157">o2::align::Controller::ProcStat::print</a></div><div class="ttdeci">void print() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00068">Controller.cxx:68</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a0be02ba87df2daea6261e832772e40bc"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a0be02ba87df2daea6261e832772e40bc">o2::align::Controller::testLocalSolution</a></div><div class="ttdeci">bool testLocalSolution()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01052">Controller.cxx:1052</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1ResidualsControllerFast_html"><div class="ttname"><a href="../../d6/dfb/classo2_1_1align_1_1ResidualsControllerFast.html">o2::align::ResidualsControllerFast</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d73/ResidualsControllerFast_8h_source.html#l00027">ResidualsControllerFast.h:27</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ae9d74264b41bff8f5f86c4076b89f200"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae9d74264b41bff8f5f86c4076b89f200">o2::align::Controller::fillMilleData</a></div><div class="ttdeci">bool fillMilleData()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00729">Controller.cxx:729</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_aef2336c7f1c1b6ee073a6fdc20534228"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#aef2336c7f1c1b6ee073a6fdc20534228">o2::align::Controller::addVertexConstraint</a></div><div class="ttdeci">bool addVertexConstraint()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01305">Controller.cxx:1305</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_aeffd634c7deef4441eb261217ed0c01c"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#aeffd634c7deef4441eb261217ed0c01c">o2::align::Controller::setMPAlignDone</a></div><div class="ttdeci">void setMPAlignDone()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00158">Controller.h:158</a></div></div>
<div class="ttc" id="aclasso2_1_1gpu_1_1gpustd_1_1bitset_html"><div class="ttname"><a href="../../de/d8a/classo2_1_1gpu_1_1gpustd_1_1bitset.html">o2::gpu::gpustd::bitset&lt; 32 &gt;</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ab45f96af88a02cde1d13ade4f99e24f3"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab45f96af88a02cde1d13ade4f99e24f3">o2::align::Controller::closeMilleOutput</a></div><div class="ttdeci">void closeMilleOutput()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01210">Controller.cxx:1210</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_aedd7a12ee284117e48afd81f3d964c72"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#aedd7a12ee284117e48afd81f3d964c72">o2::align::AlignableDetector::addAutoConstraints</a></div><div class="ttdeci">void addAutoConstraints() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9a/AlignableDetector_8cxx_source.html#l00544">AlignableDetector.cxx:544</a></div></div>
<div class="ttc" id="aGPUCommonLogger_8h_html_aea3d0edfe28fc0325c636b2b33f0527a"><div class="ttname"><a href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a></div><div class="ttdeci">#define LOG(type)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5b/GPUCommonLogger_8h_source.html#l00056">GPUCommonLogger.h:56</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignmentPoint_html_a3eec312e043ea4a55668748d6809fe80"><div class="ttname"><a href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a3eec312e043ea4a55668748d6809fe80">o2::align::AlignmentPoint::getNMatPar</a></div><div class="ttdeci">int getNMatPar() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7a/AlignmentPoint_8h_source.html#l00250">AlignmentPoint.h:250</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_a84b95e83681748b32e1641be6c5210b0"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a84b95e83681748b32e1641be6c5210b0">o2::align::AlignableDetector::ownsDOFID</a></div><div class="ttdeci">bool ownsDOFID(int id) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9a/AlignableDetector_8cxx_source.html#l00492">AlignableDetector.cxx:492</a></div></div>
<div class="ttc" id="anamespaceo2_1_1align_1_1utils_html"><div class="ttname"><a href="../../df/d72/namespaceo2_1_1align_1_1utils.html">o2::align::utils</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/Detectors_2Align_2include_2Align_2utils_8h_source.html#l00036">utils.h:36</a></div></div>
<div class="ttc" id="aLogger_8h_html"><div class="ttname"><a href="../../dd/da4/Logger_8h.html">Logger.h</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_aa2162779e8fc1ace23288c8a4c51201c"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa2162779e8fc1ace23288c8a4c51201c">o2::align::Controller::mMPParFileName</a></div><div class="ttdeci">std::string mMPParFileName</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00386">Controller.h:386</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_abe7243bf0c28bf363c6b706edc90ca5c"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#abe7243bf0c28bf363c6b706edc90ca5c">o2::align::Controller::mMPConFileName</a></div><div class="ttdeci">std::string mMPConFileName</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00387">Controller.h:387</a></div></div>
<div class="ttc" id="aResidualsControllerFast_8h_html"><div class="ttname"><a href="../../db/d73/ResidualsControllerFast_8h.html">ResidualsControllerFast.h</a></div><div class="ttdoc">Container for control fast residuals evaluated via derivatives.</div></div>
<div class="ttc" id="aglcorearb_8h_html_a7eca977aec48ecd8d48ebd7558c0538c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7eca977aec48ecd8d48ebd7558c0538c">params</a></div><div class="ttdeci">GLenum const GLfloat * params</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00272">glcorearb.h:272</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a5c4947d4516dd7cfa3505ce3a648a4ef"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a></div><div class="ttdeci">GLuint const GLchar * name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00781">glcorearb.h:781</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a07b5bc50be6324158c4562e1954ce783a13c9039d64d27263c22e10f971eba749"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a07b5bc50be6324158c4562e1954ce783a13c9039d64d27263c22e10f971eba749">o2::align::Controller::kRunDone</a></div><div class="ttdeci">@ kRunDone</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00109">Controller.h:109</a></div></div>
<div class="ttc" id="aAlignConfig_8h_html"><div class="ttname"><a href="../../d0/da7/AlignConfig_8h.html">AlignConfig.h</a></div><div class="ttdoc">Configuration file for global alignment.</div></div>
<div class="ttc" id="aCommon_2MathUtils_2include_2MathUtils_2Utils_8h_html"><div class="ttname"><a href="../../d9/d52/Common_2MathUtils_2include_2MathUtils_2Utils_8h.html">Utils.h</a></div><div class="ttdoc">General auxilliary methods.</div></div>
<div class="ttc" id="aGeometricalConstraint_8h_html"><div class="ttname"><a href="../../da/d45/GeometricalConstraint_8h.html">GeometricalConstraint.h</a></div><div class="ttdoc">Descriptor of geometrical constraint.</div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_afe055bdc24506c4faf4a22894a688d0d"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#afe055bdc24506c4faf4a22894a688d0d">o2::align::Controller::mGloParLab</a></div><div class="ttdeci">std::vector&lt; int &gt; mGloParLab</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00361">Controller.h:361</a></div></div>
<div class="ttc" id="aclasso2_1_1base_1_1PropagatorImpl_html_a86513b2091e1a51ea14646746572b19a"><div class="ttname"><a href="../../d5/dd3/classo2_1_1base_1_1PropagatorImpl.html#a86513b2091e1a51ea14646746572b19a">o2::base::PropagatorImpl::initFieldFromGRP</a></div><div class="ttdeci">static int initFieldFromGRP(const o2::parameters::GRPObject *grp, bool verbose=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dee/Propagator_8cxx_source.html#l00080">Propagator.cxx:80</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a58bf59eb7f233cf38e8ff80e4a422994"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a58bf59eb7f233cf38e8ff80e4a422994">o2::align::Controller::checkSol</a></div><div class="ttdeci">void checkSol(TTree *mpRecTree, bool store=true, bool verbose=false, bool loc=true, const char *outName=&quot;resFast&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01856">Controller.cxx:1856</a></div></div>
<div class="ttc" id="aclasso2_1_1detectors_1_1DetID_html"><div class="ttname"><a href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html">o2::detectors::DetID</a></div><div class="ttdoc">Static class with identifiers, bitmasks and names for ALICE detectors.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d31/DetID_8h_source.html#l00057">DetID.h:57</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a751e2c1726ab2a9a949e41577d71cbcc"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a751e2c1726ab2a9a949e41577d71cbcc">o2::align::Controller::closeMPRecOutput</a></div><div class="ttdeci">void closeMPRecOutput()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01179">Controller.cxx:1179</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_aecdee7a92007be29f9d8923cbc219f93"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#aecdee7a92007be29f9d8923cbc219f93">o2::align::Controller::setMPConFileName</a></div><div class="ttdeci">void setMPConFileName(const char *name=&quot;mpConstraints.txt&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01242">Controller.cxx:1242</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ad9506fcf9b7f93408c5c316ddfe81c2b"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ad9506fcf9b7f93408c5c316ddfe81c2b">o2::align::Controller::~Controller</a></div><div class="ttdeci">~Controller() final</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00107">Controller.cxx:107</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a5a3d5dec9772a1549dc59aedb8fc3090"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a5a3d5dec9772a1549dc59aedb8fc3090">o2::align::Controller::mMPSteerFileName</a></div><div class="ttdeci">std::string mMPSteerFileName</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00388">Controller.h:388</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a9cb8abcd8a39b2a9aac5b4cc387b8ca2"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9cb8abcd8a39b2a9aac5b4cc387b8ca2">o2::align::Controller::writePedeConstraints</a></div><div class="ttdeci">void writePedeConstraints() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01783">Controller.cxx:1783</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_aa885dc64b298c64533dd28d8f4ce7fe8"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa885dc64b298c64533dd28d8f4ce7fe8">o2::align::Controller::setResidFileName</a></div><div class="ttdeci">void setResidFileName(const char *name=&quot;mpControlRes.root&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01264">Controller.cxx:1264</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ab5685515628734e5dfe603c04ab4bd06"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab5685515628734e5dfe603c04ab4bd06">o2::align::Controller::mRunNumber</a></div><div class="ttdeci">int mRunNumber</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00346">Controller.h:346</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_aa818e4077a4c85968c3952c187d859b3"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa818e4077a4c85968c3952c187d859b3">o2::align::Controller::mDetectors</a></div><div class="ttdeci">std::array&lt; AlignableDetector *, DetID::nDetectors &gt; mDetectors</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00351">Controller.h:351</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a9c709cedbc2bcf4321e904666b5c7a2a"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9c709cedbc2bcf4321e904666b5c7a2a">o2::align::Controller::createStatHisto</a></div><div class="ttdeci">void createStatHisto()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01736">Controller.cxx:1736</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignmentPoint_html_ac4a4d3b6943797c7c2c8944945e41657"><div class="ttname"><a href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#ac4a4d3b6943797c7c2c8944945e41657">o2::align::AlignmentPoint::containsMeasurement</a></div><div class="ttdeci">bool containsMeasurement() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7a/AlignmentPoint_8h_source.html#l00090">AlignmentPoint.h:90</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a44970f828abce26873381a3ac5d12a8c"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a44970f828abce26873381a3ac5d12a8c">o2::align::Controller::getDetOfDOFID</a></div><div class="ttdeci">AlignableDetector * getDetOfDOFID(int id) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01427">Controller.cxx:1427</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ae3eddfdde01c7ffeadf9125f51ce52c5"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ae3eddfdde01c7ffeadf9125f51ce52c5">o2::align::Controller::printStatistics</a></div><div class="ttdeci">void printStatistics() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01032">Controller.cxx:1032</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a976a171266b7f39a5b31511b7434eee9"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a976a171266b7f39a5b31511b7434eee9">o2::align::Controller::getInitGeomDone</a></div><div class="ttdeci">bool getInitGeomDone() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00153">Controller.h:153</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_aabdd9aabede45fcf97cea04f88d2ad60"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aabdd9aabede45fcf97cea04f88d2ad60">v1</a></div><div class="ttdeci">GLfloat GLfloat v1</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00812">glcorearb.h:812</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ab9b4bb29545d77d2bbaeda4e05841792"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab9b4bb29545d77d2bbaeda4e05841792">o2::align::Controller::setInitDOFsDone</a></div><div class="ttdeci">void setInitDOFsDone()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00155">Controller.h:155</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_aff08f6ddfc1f55f5021baf4627a146d8"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#aff08f6ddfc1f55f5021baf4627a146d8">o2::align::Controller::setHistoStat</a></div><div class="ttdeci">void setHistoStat(TH1F *h)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00300">Controller.h:300</a></div></div>
<div class="ttc" id="aclasso2_1_1detectors_1_1DetID_html_a55dd27091d307d75e3bf0a313f33ca4d"><div class="ttname"><a href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a55dd27091d307d75e3bf0a313f33ca4d">o2::detectors::DetID::ITS</a></div><div class="ttdeci">static constexpr ID ITS</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d31/DetID_8h_source.html#l00063">DetID.h:63</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_af94f2ce569d40efde9be8bf931359a15"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#af94f2ce569d40efde9be8bf931359a15">o2::align::Controller::storeProcessedTrack</a></div><div class="ttdeci">bool storeProcessedTrack(int what)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00711">Controller.cxx:711</a></div></div>
<div class="ttc" id="aclasso2_1_1detectors_1_1DetID_html_adac7a102f5bca83a2da785828482f19f"><div class="ttname"><a href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#adac7a102f5bca83a2da785828482f19f">o2::detectors::DetID::getMask</a></div><div class="ttdeci">static mask_t getMask(const std::string_view detList)</div><div class="ttdoc">detector masks from any non-alpha-num delimiter-separated list (empty if NONE is supplied)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d37/DetID_8cxx_source.html#l00041">DetID.cxx:41</a></div></div>
<div class="ttc" id="astandalone_8cxx_html_a89fc507a8313a2c8530b05526aee23af"><div class="ttname"><a href="../../dc/df9/standalone_8cxx.html#a89fc507a8313a2c8530b05526aee23af">rec</a></div><div class="ttdeci">GPUReconstruction * rec</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df9/standalone_8cxx_source.html#l00071">standalone.cxx:71</a></div></div>
<div class="ttc" id="aclasso2_1_1base_1_1GeometryManager_html_a46a26ff4356435e35ea427c8d9c03a72"><div class="ttname"><a href="../../d0/d20/classo2_1_1base_1_1GeometryManager.html#a46a26ff4356435e35ea427c8d9c03a72">o2::base::GeometryManager::loadGeometry</a></div><div class="ttdeci">static void loadGeometry(std::string_view geomFilePath=&quot;&quot;, bool applyMisalignment=true, bool preferAlignedFile=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d93/Detectors_2Base_2src_2GeometryManager_8cxx_source.html#l00502">GeometryManager.cxx:502</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a2ccd9e0887c8eda38bb8b817fa04c932"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2ccd9e0887c8eda38bb8b817fa04c932">o2::align::Controller::mDOFStat</a></div><div class="ttdeci">DOFStatistics mDOFStat</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00398">Controller.h:398</a></div></div>
<div class="ttc" id="aDetectors_2Align_2include_2Align_2utils_8h_html"><div class="ttname"><a href="../../de/d56/Detectors_2Align_2include_2Align_2utils_8h.html">utils.h</a></div><div class="ttdoc">Collection of auxillary methods.</div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_afd4332b2d246ef21809c130c9d0bddaa"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#afd4332b2d246ef21809c130c9d0bddaa">o2::align::Controller::checkDetectorPoints</a></div><div class="ttdeci">bool checkDetectorPoints(const int *npsel) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00319">Controller.cxx:319</a></div></div>
<div class="ttc" id="aclasso2_1_1detectors_1_1DetID_html_a6fb28d85cfe5a00f442808756e9b1492"><div class="ttname"><a href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a6fb28d85cfe5a00f442808756e9b1492">o2::detectors::DetID::nDetectors</a></div><div class="ttdeci">static constexpr int nDetectors</div><div class="ttdoc">number of defined detectors</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d31/DetID_8h_source.html#l00090">DetID.h:90</a></div></div>
<div class="ttc" id="anamespaceo2_1_1globaltracking_html"><div class="ttname"><a href="../../d3/dc3/namespaceo2_1_1globaltracking.html">o2::globaltracking</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1a/RecoContainer_8h_source.html#l00171">RecoContainer.h:171</a></div></div>
<div class="ttc" id="aRawData_8h_html_a5ee9234d389c6be7f0a75b450da09722"><div class="ttname"><a href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a></div><div class="ttdeci">uint32_t j</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d62/RawData_8h_source.html#l00314">RawData.h:314</a></div></div>
<div class="ttc" id="aGRPObject_8h_html"><div class="ttname"><a href="../../de/d28/GRPObject_8h.html">GRPObject.h</a></div><div class="ttdoc">Header of the General Run Parameters object.</div></div>
<div class="ttc" id="aglcorearb_8h_html_aa13d73852e3d050fbad707978af4ce40"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa13d73852e3d050fbad707978af4ce40">v0</a></div><div class="ttdeci">GLfloat v0</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00811">glcorearb.h:811</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1DOFSet_html_a61c8e60f84963e6bcd3243e34242d315"><div class="ttname"><a href="../../da/dbd/classo2_1_1align_1_1DOFSet.html#a61c8e60f84963e6bcd3243e34242d315">o2::align::DOFSet::getFirstParGloID</a></div><div class="ttdeci">int getFirstParGloID() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dcd/DOFSet_8h_source.html#l00047">DOFSet.h:47</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ab2537e2df7f51095f6ee6db3bbf51dc9"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab2537e2df7f51095f6ee6db3bbf51dc9">o2::align::Controller::sMPDataExt</a></div><div class="ttdeci">static const Char_t * sMPDataExt</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00409">Controller.h:409</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a3cad5a081a1a1f045289d80da5c8d026"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a3cad5a081a1a1f045289d80da5c8d026">o2::align::Controller::mCResid</a></div><div class="ttdeci">ResidualsController mCResid</div><div class="ttdoc">MP record.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00376">Controller.h:376</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_adf4456a774a94c703d9e3277cc3c06e3"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#adf4456a774a94c703d9e3277cc3c06e3">o2::align::Controller::mDetMask</a></div><div class="ttdeci">DetID::mask_t mDetMask</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00342">Controller.h:342</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_a924501755dbbd303fed332ed3a024f79"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a924501755dbbd303fed332ed3a024f79">o2::align::AlignableDetector::getVolOfDOFID</a></div><div class="ttdeci">AlignableVolume * getVolOfDOFID(int id) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9a/AlignableDetector_8cxx_source.html#l00510">AlignableDetector.cxx:510</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_ac2cf08ce1dede008381c967e804d8b9e"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#ac2cf08ce1dede008381c967e804d8b9e">o2::align::AlignableDetector::terminate</a></div><div class="ttdeci">virtual void terminate()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9a/AlignableDetector_8cxx_source.html#l00526">AlignableDetector.cxx:526</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a9d335ee6af86f270ac1b14dce5277ad8"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a9d335ee6af86f270ac1b14dce5277ad8">o2::align::Controller::printLabels</a></div><div class="ttdeci">void printLabels() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01749">Controller.cxx:1749</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a4f4a22182a2842cdd522216297f46f62"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a4f4a22182a2842cdd522216297f46f62">o2::align::Controller::getDOFLabelTxt</a></div><div class="ttdeci">Char_t * getDOFLabelTxt(int idf) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01481">Controller.cxx:1481</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignmentPoint_html_a63d645b4a026a82ade9ff1303730d0a8"><div class="ttname"><a href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a63d645b4a026a82ade9ff1303730d0a8">o2::align::AlignmentPoint::getMaxLocVarID</a></div><div class="ttdeci">int getMaxLocVarID() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7a/AlignmentPoint_8h_source.html#l00087">AlignmentPoint.h:87</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a314c163db2649a0d3cd462a1946b53d9"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a314c163db2649a0d3cd462a1946b53d9">o2::align::Controller::fillStatHisto</a></div><div class="ttdeci">void fillStatHisto(int type, float w=1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01727">Controller.cxx:1727</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a83d0fd125a60e5131b1fdeccc63e918f"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a83d0fd125a60e5131b1fdeccc63e918f">o2::align::Controller::fixLowStatFromDOFStat</a></div><div class="ttdeci">void fixLowStatFromDOFStat(int thresh=40)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01797">Controller.cxx:1797</a></div></div>
<div class="ttc" id="aclassTObject_html"><div class="ttname"><a href="../../d5/d0f/classTObject.html">TObject</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_a6bbcb4e44eb6000316dddb7de3ca4fcd"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a6bbcb4e44eb6000316dddb7de3ca4fcd">o2::align::AlignableDetector::initDOFs</a></div><div class="ttdeci">virtual void initDOFs()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9a/AlignableDetector_8cxx_source.html#l00311">AlignableDetector.cxx:311</a></div></div>
<div class="ttc" id="anamespaceo2_1_1framework_html_ac2569e9658701f4fc5b687da9dacb739aef71b41e302818193ccb767aa823b158"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#ac2569e9658701f4fc5b687da9dacb739aef71b41e302818193ccb767aa823b158">o2::framework::Sqrt</a></div><div class="ttdeci">@ Sqrt</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc2/BasicOps_8h_source.html#l00034">BasicOps.h:34</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a76c3ae2334e79cdf13410024148044fe"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a76c3ae2334e79cdf13410024148044fe">o2::align::Controller::loadStat</a></div><div class="ttdeci">void loadStat(const char *flname)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01815">Controller.cxx:1815</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a5aca2a3a7aef629af64dd6341581f644"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a5aca2a3a7aef629af64dd6341581f644">o2::align::Controller::mOutCDBResponsible</a></div><div class="ttdeci">std::string mOutCDBResponsible</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00395">Controller.h:395</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a08f4020a84f21d5cb7f4592ec95c24cb"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a08f4020a84f21d5cb7f4592ec95c24cb">o2::align::Controller::setMPParFileName</a></div><div class="ttdeci">void setMPParFileName(const char *name=&quot;mpParams.txt&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01231">Controller.cxx:1231</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a18d31f2695b1ffb7457dfcf0f446cbf2"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a18d31f2695b1ffb7457dfcf0f446cbf2">o2::align::Controller::process</a></div><div class="ttdeci">void process(const o2::globaltracking::RecoContainer &amp;recodata)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00137">Controller.cxx:137</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a7cdb615dc47169d5e1e3108f98d68e87"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a7cdb615dc47169d5e1e3108f98d68e87">o2::align::Controller::mNDet</a></div><div class="ttdeci">int mNDet</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00344">Controller.h:344</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1GeometricalConstraint_html_a4f86ee32d8e09312fc32347539419fd5"><div class="ttname"><a href="../../dd/d85/classo2_1_1align_1_1GeometricalConstraint.html#a4f86ee32d8e09312fc32347539419fd5">o2::align::GeometricalConstraint::checkConstraint</a></div><div class="ttdeci">virtual void checkConstraint() const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/GeometricalConstraint_8cxx_source.html#l00184">GeometricalConstraint.cxx:184</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_aa479bc45d69e0dc49fbf3ef33c41406a"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa479bc45d69e0dc49fbf3ef33c41406a">o2::align::Controller::readParameters</a></div><div class="ttdeci">bool readParameters(const char *parfile=&quot;millepede.res&quot;, bool useErrors=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01572">Controller.cxx:1572</a></div></div>
<div class="ttc" id="atest__ctf__io__ctp_8cxx_html_a7c662e4f033cd397d59721887ffd5c5a"><div class="ttname"><a href="../../db/dbc/test__ctf__io__ctp_8cxx.html#a7c662e4f033cd397d59721887ffd5c5a">ir</a></div><div class="ttdeci">o2::InteractionRecord ir(ir0)</div></div>
<div class="ttc" id="aclasso2_1_1align_1_1DOFStatistics_html_ab4058839b3736fa15bc2a6d03c427a68"><div class="ttname"><a href="../../df/d1b/classo2_1_1align_1_1DOFStatistics.html#ab4058839b3736fa15bc2a6d03c427a68">o2::align::DOFStatistics::getNDOFs</a></div><div class="ttdeci">int getNDOFs() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d80/DOFStatistics_8h_source.html#l00039">DOFStatistics.h:39</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ab83b64b8a3848e6e1a041e0fdb5e79d4"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ab83b64b8a3848e6e1a041e0fdb5e79d4">o2::align::Controller::Print</a></div><div class="ttdeci">void Print(const Option_t *opt=&quot;&quot;) const final</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00977">Controller.cxx:977</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ac77c59d71a1e7d3cb90e78a75f17de4d"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ac77c59d71a1e7d3cb90e78a75f17de4d">o2::align::Controller::mMilleIBuffer</a></div><div class="ttdeci">TArrayI mMilleIBuffer</div><div class="ttdoc">buffer for Mille Derivatives output</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00384">Controller.h:384</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_ac47377aa866d9b8ce1b117cc9aea3b5f"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#ac47377aa866d9b8ce1b117cc9aea3b5f">o2::align::AlignableDetector::assignDOFs</a></div><div class="ttdeci">virtual int assignDOFs()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9a/AlignableDetector_8cxx_source.html#l00288">AlignableDetector.cxx:288</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a7d05960f4f1c1b11f3177dc963a45d86"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a></div><div class="ttdeci">GLint GLint GLsizei GLint GLenum GLenum type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00275">glcorearb.h:275</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a771ac7d0ee6f262dc9b2527c36cd5db9"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a771ac7d0ee6f262dc9b2527c36cd5db9">o2::align::Controller::mGloParErr</a></div><div class="ttdeci">std::vector&lt; float &gt; mGloParErr</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00360">Controller.h:360</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a2e50a1f3358e6e18458782903e5e7e11"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a2e50a1f3358e6e18458782903e5e7e11">o2::align::Controller::setOutCDBPath</a></div><div class="ttdeci">void setOutCDBPath(const char *name=&quot;local://outOCDB&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01275">Controller.cxx:1275</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_ad87840b3321a8197c4e95b86781305ad"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#ad87840b3321a8197c4e95b86781305ad">o2::align::Controller::initResidOutput</a></div><div class="ttdeci">void initResidOutput()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01169">Controller.cxx:1169</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a0788d3762d0c3c76e4c094d8078b4c27"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a0788d3762d0c3c76e4c094d8078b4c27">n</a></div><div class="ttdeci">GLdouble n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01982">glcorearb.h:1982</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignmentPoint_html_abaa2dc1b5320121540660d551d6ac021"><div class="ttname"><a href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#abaa2dc1b5320121540660d551d6ac021">o2::align::AlignmentPoint::getDGloOffs</a></div><div class="ttdeci">int getDGloOffs() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7a/AlignmentPoint_8h_source.html#l00179">AlignmentPoint.h:179</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a5cd8ed7aaf326ec1a0103b4d3dae5e23"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a5cd8ed7aaf326ec1a0103b4d3dae5e23">o2::align::Controller::addDetector</a></div><div class="ttdeci">void addDetector(AlignableDetector *det)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00303">Controller.cxx:303</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1DOFStatistics_html"><div class="ttname"><a href="../../df/d1b/classo2_1_1align_1_1DOFStatistics.html">o2::align::DOFStatistics</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d80/DOFStatistics_8h_source.html#l00034">DOFStatistics.h:34</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_a130b71b983041d80a513f458741956c8"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a130b71b983041d80a513f458741956c8">o2::align::AlignableDetector::resetPool</a></div><div class="ttdeci">virtual void resetPool()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9a/AlignableDetector_8cxx_source.html#l00184">AlignableDetector.cxx:184</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignmentPoint_html_a2d1f3f2f4ab9864360340fa8417523d0"><div class="ttname"><a href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#a2d1f3f2f4ab9864360340fa8417523d0">o2::align::AlignmentPoint::getErrDiag</a></div><div class="ttdeci">double getErrDiag(int i) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7a/AlignmentPoint_8h_source.html#l00134">AlignmentPoint.h:134</a></div></div>
<div class="ttc" id="aclasso2_1_1detectors_1_1DetID_html_a666cd79f5455f093305e9fd378424b24"><div class="ttname"><a href="../../d6/dd5/classo2_1_1detectors_1_1DetID.html#a666cd79f5455f093305e9fd378424b24">o2::detectors::DetID::First</a></div><div class="ttdeci">static constexpr ID First</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d31/DetID_8h_source.html#l00088">DetID.h:88</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_a08bf07fa7f7fa33d2bf3181c6decd835"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a08bf07fa7f7fa33d2bf3181c6decd835">o2::align::AlignableDetector::applyAlignmentFromMPSol</a></div><div class="ttdeci">virtual void applyAlignmentFromMPSol()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9a/AlignableDetector_8cxx_source.html#l00134">AlignableDetector.cxx:134</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableVolume_html_ac2c9545e90c458d81b2d9d5c81c1f3ec"><div class="ttname"><a href="../../dc/d32/classo2_1_1align_1_1AlignableVolume.html#ac2c9545e90c458d81b2d9d5c81c1f3ec">o2::align::AlignableVolume::getSymName</a></div><div class="ttdeci">const char * getSymName() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/AlignableVolume_8h_source.html#l00076">AlignableVolume.h:76</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a8acaedcd01905213bc40358ad2110343"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a8acaedcd01905213bc40358ad2110343">o2::align::Controller::getMPAlignDone</a></div><div class="ttdeci">bool getMPAlignDone() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00159">Controller.h:159</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a60102558fca12402172dbd37eeef8667"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a60102558fca12402172dbd37eeef8667">o2::align::Controller::mOutCDBRunRange</a></div><div class="ttdeci">int mOutCDBRunRange[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00396">Controller.h:396</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_af002fdac8a32eeff73099425c7eb5105"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#af002fdac8a32eeff73099425c7eb5105">o2::align::Controller::getVolOfDOFID</a></div><div class="ttdeci">AlignableVolume * getVolOfDOFID(int id) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l01440">Controller.cxx:1440</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignmentPoint_html_ae66cc78917ea1ca16bc564f3872a7170"><div class="ttname"><a href="../../da/dbe/classo2_1_1align_1_1AlignmentPoint.html#ae66cc78917ea1ca16bc564f3872a7170">o2::align::AlignmentPoint::getMatCorrCov</a></div><div class="ttdeci">float * getMatCorrCov() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7a/AlignmentPoint_8h_source.html#l00172">AlignmentPoint.h:172</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1AlignableDetector_html_a8fd2920c86f28ec234bf6549aec56c4b"><div class="ttname"><a href="../../da/d31/classo2_1_1align_1_1AlignableDetector.html#a8fd2920c86f28ec234bf6549aec56c4b">o2::align::AlignableDetector::getNDOFsTot</a></div><div class="ttdeci">int getNDOFsTot() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9a/AlignableDetector_8cxx_source.html#l00062">AlignableDetector.cxx:62</a></div></div>
<div class="ttc" id="aAlignableVolume_8h_html"><div class="ttname"><a href="../../d6/db2/AlignableVolume_8h.html">AlignableVolume.h</a></div><div class="ttdoc">Base class of alignable volume.</div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_aa2adfe59516f9d2d5d95b513b59cd39b"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#aa2adfe59516f9d2d5d95b513b59cd39b">o2::align::Controller::mOutCDBComment</a></div><div class="ttdeci">std::string mOutCDBComment</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00394">Controller.h:394</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a0e739e55b6a9a3a423f82a8135350a92"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a0e739e55b6a9a3a423f82a8135350a92">o2::align::Controller::fillControlData</a></div><div class="ttdeci">bool fillControlData()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00849">Controller.cxx:849</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_ae35401c8c2fcdcc48c20ba325ee473ea"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ae35401c8c2fcdcc48c20ba325ee473ea">v2</a></div><div class="ttdeci">GLfloat GLfloat GLfloat v2</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00813">glcorearb.h:813</a></div></div>
<div class="ttc" id="anamespaceo2_1_1align_1_1utils_html_a854be1d5494bf55c96103a4c657d167fa1bb274c262d0633115e771bf58520fa4"><div class="ttname"><a href="../../df/d72/namespaceo2_1_1align_1_1utils.html#a854be1d5494bf55c96103a4c657d167fa1bb274c262d0633115e771bf58520fa4">o2::align::utils::NTrackTypes</a></div><div class="ttdeci">@ NTrackTypes</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d56/Detectors_2Align_2include_2Align_2utils_8h_source.html#l00047">utils.h:47</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a567d69fb4bf022bf3ce7a15ede5877de"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a567d69fb4bf022bf3ce7a15ede5877de">o2::align::Controller::mMille</a></div><div class="ttdeci">std::unique_ptr&lt; Mille &gt; mMille</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00373">Controller.h:373</a></div></div>
<div class="ttc" id="aDOFStatistics_8h_html"><div class="ttname"><a href="../../d3/d80/DOFStatistics_8h.html">DOFStatistics.h</a></div><div class="ttdoc">Mergable Object for statistics of points used by each DOF.</div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a6bcc82923aefa33e4efe6dc0c7f0e46c"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a6bcc82923aefa33e4efe6dc0c7f0e46c">o2::align::Controller::initDOFs</a></div><div class="ttdeci">void initDOFs()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00212">Controller.cxx:212</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a3ccd35a955928dd9b1b355acc43406db"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a3ccd35a955928dd9b1b355acc43406db">o2::align::Controller::acknowledgeNewRun</a></div><div class="ttdeci">void acknowledgeNewRun(int run)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dea/Controller_8cxx_source.html#l00890">Controller.cxx:890</a></div></div>
<div class="ttc" id="aclasso2_1_1align_1_1Controller_html_a031130d8f782241a15191f765e85669e"><div class="ttname"><a href="../../d8/dea/classo2_1_1align_1_1Controller.html#a031130d8f782241a15191f765e85669e">o2::align::Controller::getNDOFs</a></div><div class="ttdeci">int getNDOFs() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/Controller_8h_source.html#l00220">Controller.h:220</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_051dca18e802f8e9474f2e30d29c04e0.html">Detectors</a></li><li class="navelem"><a class="el" href="../../dir_508c22eabe13800c6a3e1c54a56e0bc7.html">Align</a></li><li class="navelem"><a class="el" href="../../dir_300a05771a286e6204ba945772fba41d.html">src</a></li><li class="navelem"><a class="el" href="../../d2/dea/Controller_8cxx.html">Controller.cxx</a></li>
    <li class="footer">Generated on Mon Feb 14 2022 05:40:42 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
