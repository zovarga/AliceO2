<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: MFT</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d8/d9d/refMFT.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MFT </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>The Muon Forward Tracker</h1>
<p>This documentation describes the main workflows used for MFT standalone reconstruction and global forward matching. The MFT is a Silicon pixel tracking detector designed to add vertexing capabilities to the MUON spectrometer. More details about the MFT are available on the <a href="https://cds.cern.ch/record/1981898">Technical Design Report for the Muon Forward Tracker</a>.</p>
<h2>MFT Standalone workflows in O2</h2>
<p><code>o2-mft-reco-workflow</code> is the main workflow used in MFT standalone tracking, reconstructing MFT tracks stored in <code>mfttracks.root</code>. The workflow options are defined in <a href="../.././workflow/src/mft-reco-workflow.cxx">mft-reco-workflow.cxx</a> and tracking configurable parameters at <a href="../.././tracking/include/MFTTracking/MFTTrackingParam.h"><code>MFTTrackingParam.h</code></a>. During normal data taking periods, this workflows find and fit tracks from clusters provided by upstream devices. For simulated data this workflows reads simulated digits, runs clusterization, track-finding and track-fitting.</p>
<h3>Running MFT Standalone reconstruction from a simulation</h3>
<div class="fragment"><div class="line"># 0) Enter O2 environment</div>
<div class="line">alienv enter O2/latest-dev-o2</div>
<div class="line"> </div>
<div class="line"># 1) Run MFT standalone simulation of 10 pp events</div>
<div class="line">o2-sim -n 10 -g pythia8pp -m MFT</div>
<div class="line"> </div>
<div class="line"># 2) Run MFT digitizer: produces `mftdigits.root`</div>
<div class="line">o2-sim-digitizer-workflow -b</div>
<div class="line"> </div>
<div class="line"># 3) Run MFT reconstruction workflow from digits</div>
<div class="line">#    produces mftclusters.root and mfttracks.root</div>
<div class="line">o2-mft-reco-workflow  --configKeyValues &quot;MFTTracking.forceZeroField=false;MFTTracking.LTFclsRCut=0.0100;&quot;</div>
</div><!-- fragment --><h3>MFT Standalone reconstruction from CTFs</h3>
<p>Workflow: <code>CTF reader workflow -&gt; MFT reconstruction workflow</code></p>
<p>Example: </p><div class="fragment"><div class="line">o2-ctf-reader-workflow --onlyDet MFT  --ctf-input o2_ctf_run00000000_orbit0000000000_tf0000000001.root | o2-mft-reco-workflow --clusters-from-upstream --disable-mc  -b</div>
</div><!-- fragment --><h3>Reconstruction from MFT clusters (real data)</h3>
<p>Workflow: <code>MFT cluster reader workflow -&gt; MFT reconstruction workflow</code></p>
<p>Example: </p><div class="fragment"><div class="line">o2-mft-cluster-reader-workflow | o2-mft-reco-workflow --clusters-from-upstream --disable-mc --mft-cluster-writer &quot;--outfile /dev/null&quot;</div>
</div><!-- fragment --><h3>MFT Assessment</h3>
<p>The <code>o2-mft-assessment-workflow</code> evaluates MFT standalone tracking. By default the workflow operates in data collection mode and stores <code>MFTAssessment.root</code>.</p>
<p>Usage modes:</p><ol type="1">
<li>Piped with matching workflow:<ul>
<li><code>o2-mft-reco-workflow | o2-mft-assessment-workflow</code></li>
</ul>
</li>
<li>Reading data on disk:<ul>
<li><code>o2-global-track-cluster-reader --track-types MFT --cluster-types MFT | o2-mft-assessment-workflow</code></li>
</ul>
</li>
</ol>
<p>Analysis of collected data can be executed calling the workflow with <code>--</code>, producing objects that cannot be merged. For grid-compatible workflows, data collected in several files can be merged with <code>hadd</code> and the finalization of merged objects can be steered by a macro as bellow.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> finalizeMFTAssessment()</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="../../d3/dee/classo2_1_1mft_1_1MFTAssessment.html">o2::mft::MFTAssessment</a> analyser(<span class="keyword">true</span>);</div>
<div class="line">  analyser.loadHistos(); <span class="comment">// loads MFFAssessment.root produced by the DPL workflow</span></div>
<div class="line">  analyser.finalizeAnalysis();</div>
<div class="line">  TFile *fout = <span class="keyword">new</span> TFile(<span class="stringliteral">&quot;MFTAssessmentFinalized.root&quot;</span>, <span class="stringliteral">&quot;RECREATE&quot;</span>);</div>
<div class="line">  TObjArray objarOut;</div>
<div class="line">  analyser.getHistos(objarOut); <span class="comment">// Output objects</span></div>
<div class="line">  objarOut.Write();</div>
<div class="line">  fout-&gt;Close();</div>
<div class="line">}</div>
</div><!-- fragment --><h2>MFT in Global Forward Workflows</h2>
<p>Global forward workflows produce tracks by matching different detector systems:</p><ul>
<li>Standalone reconstruction workflows: MFT, MCH and MID</li>
<li>Matching workflows: MCH-MID and MFT-MCH-MID</li>
</ul>
<p><a class="el" href="../../d2/d88/classA.html">A</a> compreensive execution of ALICE workflows from simulation up to AOD files is implemented on <a href="../../../../../prodtests/sim_challenge.sh"><code>sim_challenge.sh</code></a>. Bellow a summary of the reconstruction workflows used to produce global forward tracks.</p>
<h3>MCH and MID reconstruction workflows</h3>
<ul>
<li>MCH reconstruction workflow:<ul>
<li><code>o2-mch-reco-workflow</code></li>
<li>produces <code>mchtracks.root</code></li>
</ul>
</li>
<li>MID reconstruction workflow:<ul>
<li><code>o2-mid-digits-reader-workflow | o2-mid-reco-workflow</code></li>
<li>produces <code>mid-reco.root</code></li>
</ul>
</li>
</ul>
<p>More details about these workflows are available at the documentation for ../../MUON/MCH/Workflow/README.md "MCH" and the ../../MUON/MID/Workflow/README.md "MID".</p>
<h3>MCH-MID matching</h3>
<p>Workflow: <code>MCH and MID track reader workflows -&gt; Muon tracks matcher workflow</code></p>
<p>Example: </p><div class="fragment"><div class="line">o2-mch-tracks-reader-workflow | o2-mid-tracks-reader-workflow | o2-muon-tracks-matcher-workflow | o2-muon-tracks-writer-workflow</div>
</div><!-- fragment --><p>The muon matcher workflows produces <code>muontracks.root</code>, which containes only track-matching information, as defined in <a href="../../../../../DataFormats/Reconstruction/include/ReconstructionDataFormats/TrackMCHMID.h">TrackMCHMID.h</a>.</p>
<h3>MFT-MCH-MID matching</h3>
<p><code>o2-globalfwd-matcher-workflow</code> runs MFT-MCH-MID matching, using MFT tracks (<code>mfttracks.root</code>), MCH Tracks (<code>mchtracks.root</code>) and MCH-MID matches (<code>muontracks.root)</code>. MID information is used to identify GlobalMuonTracks. By default <code>o2-globalfwd-matcher-workflow</code> produces <code>globalfwdtracks.root</code> which contains matched forward tracks.</p>
<p>Global forward matching can be configured at runtime with options defined in <a href="../../../../GlobalTracking/include/GlobalTracking/MatchGlobalFwdParam.h">MatchGlobalFwdParam.h</a>. Example:</p>
<div class="fragment"><div class="line">o2-globalfwd-matcher-workflow --configKeyValues &quot;FwdMatching.useMIDMatch=true&quot;</div>
</div><!-- fragment --><h3>Global Forward Assessment Workflow</h3>
<p>The <code>o2-globalfwd-assessment-workflow</code> evaluates reconstruction performance, the pairing efficiency and purity of global muon tracks. By default the workflow only collects data, creating mergeable objects.</p>
<p>Usage modes:</p><ol type="1">
<li>Piped with matching workflow:<ul>
<li><code>o2-globalfwd-matcher-workflow | o2-globalfwd-assessment-workflow</code></li>
</ul>
</li>
<li>Reading data on disk:<ul>
<li><code>o2-global-track-cluster-reader --track-types MFT,MCH,MFT-MCH | o2-globalfwd-assessment-workflow</code></li>
</ul>
</li>
</ol>
<p>Analysis of collected data can be executed calling the workflow with <code>--finalize-analysis</code>, producing objects that cannot be merged. The finalization of merged objects can be steered by a macro as bellow.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> finalizeGlobalFwdAssessment()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="../../d1/d39/classo2_1_1globaltracking_1_1GloFwdAssessment.html">o2::globaltracking::GloFwdAssessment</a> analyser(<span class="keyword">true</span>);</div>
<div class="line">    analyser.loadHistos(); <span class="comment">// loads GlobalForwardAssessment.root produced by the DPL workflow</span></div>
<div class="line">    analyser.finalizeCutConfig(1., 15., 15); <span class="comment">// finalizeCutConfig(float minCut, float maxCut, int nSteps)</span></div>
<div class="line">    analyser.finalizeAnalysis();</div>
<div class="line">    TFile *fout = <span class="keyword">new</span> TFile(<span class="stringliteral">&quot;GlobalForwardAssessmentFinalized.root&quot;</span>, <span class="stringliteral">&quot;RECREATE&quot;</span>);</div>
<div class="line">    TObjArray objarOut;</div>
<div class="line">    analyser.getHistos(objarOut);</div>
<div class="line">    objarOut.Write();</div>
<div class="line">    fout-&gt;Close();</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="aclasso2_1_1globaltracking_1_1GloFwdAssessment_html"><div class="ttname"><a href="../../d1/d39/classo2_1_1globaltracking_1_1GloFwdAssessment.html">o2::globaltracking::GloFwdAssessment</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da0/MatchGlobalFwdAssessment_8h_source.html#l00053">MatchGlobalFwdAssessment.h:53</a></div></div>
<div class="ttc" id="aclasso2_1_1mft_1_1MFTAssessment_html"><div class="ttname"><a href="../../d3/dee/classo2_1_1mft_1_1MFTAssessment.html">o2::mft::MFTAssessment</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dea/MFTAssessment_8h_source.html#l00057">MFTAssessment.h:57</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d0/d2f/refDetectors.html">Module &#39;Detectors&#39;</a></li><li class="navelem"><a class="el" href="../../d9/df7/refDetectorsITSMFT.html">ITSMFT</a></li>
    <li class="footer">Generated on Mon Feb 14 2022 05:41:08 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
