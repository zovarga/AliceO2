<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: /home/runner/work/AliceO2/AliceO2/Detectors/TRD/workflow/src/TRDTrapSimulatorSpec.cxx Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dd/de7/TRDTrapSimulatorSpec_8cxx_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">TRDTrapSimulatorSpec.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../dd/de7/TRDTrapSimulatorSpec_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2019-2020 CERN and copyright holders of ALICE O2.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// See https://alice-o2.web.cern.ch/copyright for details of the copyright holders.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// All rights not expressly granted are reserved.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This software is distributed under the terms of the GNU General Public</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License v3 (GPL Version 3), copied verbatim in the file &quot;COPYING&quot;.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// In applying this license CERN does not waive the privileges and immunities</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// granted to it by virtue of its status as an Intergovernmental Organization</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// or submit itself to any jurisdiction.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d96/TRDTrapSimulatorSpec_8h.html">TRDWorkflow/TRDTrapSimulatorSpec.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;gsl/span&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#ifdef WITH_OPENMP</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;omp.h&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;TFile.h&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/dc6/ConfigParamRegistry_8h.html">Framework/ConfigParamRegistry.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d43/ControlService_8h.html">Framework/ControlService.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/df4/DataProcessorSpec_8h.html">Framework/DataProcessorSpec.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/dca/Lifetime_8h.html">Framework/Lifetime.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;fairlogger/Logger.h&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/df3/BasicCCDBManager_8h.html">CCDB/BasicCCDBManager.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/dcd/MCCompLabel_8h.html">SimulationDataFormat/MCCompLabel.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/da6/ConstMCTruthContainer_8h.html">SimulationDataFormat/ConstMCTruthContainer.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/dad/TRDSimParams_8h.html">TRDSimulation/TRDSimParams.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/dbb/TrapConfig_8h.html">TRDSimulation/TrapConfig.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d6a/DataFormats_2Detectors_2TRD_2include_2DataFormatsTRD_2Digit_8h.html">DataFormatsTRD/Digit.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/dbe/TRD_2include_2DataFormatsTRD_2TriggerRecord_8h.html">DataFormatsTRD/TriggerRecord.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html">o2::framework</a>;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../d4/d7c/namespaceo2.html">o2</a></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;{</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">namespace </span>trd</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;{</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">using namespace </span>constants;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keywordtype">void</span> TRDDPLTrapSimulatorTask::initTrapConfig()</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keyword">auto</span>&amp; ccdbmgr = <a class="code" href="../../da/d73/classo2_1_1ccdb_1_1BasicCCDBManager.html#ac829fb69185587ba263490a43eab67d8">o2::ccdb::BasicCCDBManager::instance</a>();</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keyword">auto</span> timeStamp = (mRunNumber &lt; 0) ? std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(<a class="code" href="../../db/d0e/namespaceo2_1_1dcs.html#a2ff5ac95be3b020fec5e671ab6fe0e7b">std::chrono::system_clock::now</a>().time_since_epoch()).count() : mRunNumber;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="comment">//ccdbmgr.setURL(&quot;http://localhost:8080&quot;);</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  ccdbmgr.setTimestamp(timeStamp);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  mTrapConfig = ccdbmgr.get&lt;<a class="code" href="../../d7/dae/classo2_1_1trd_1_1TrapConfig.html">o2::trd::TrapConfig</a>&gt;(<span class="stringliteral">&quot;TRD/TrapConfig/&quot;</span> + mTrapConfigName);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keywordflow">if</span> (mEnableTrapConfigDump) {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    mTrapConfig-&gt;<a class="code" href="../../d7/dae/classo2_1_1trd_1_1TrapConfig.html#af315cbe9e556dc74386fde7f45e94d95">DumpTrapConfig2File</a>(<span class="stringliteral">&quot;run3trapconfig_dump&quot;</span>);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="keywordflow">if</span> (mTrapConfig-&gt;getConfigName() == <span class="stringliteral">&quot;&quot;</span> &amp;&amp; mTrapConfig-&gt;getConfigVersion() == <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">//some trap configs dont have config name and version set, in those cases, just show the file name used.</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;using TRAPconfig: &quot;</span> &lt;&lt; mTrapConfigName;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;using TRAPconfig :\&quot;&quot;</span> &lt;&lt; mTrapConfig-&gt;getConfigName().c_str() &lt;&lt; <span class="stringliteral">&quot;\&quot;.\&quot;&quot;</span> &lt;&lt; mTrapConfig-&gt;getConfigVersion().c_str() &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  }</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keywordtype">void</span> TRDDPLTrapSimulatorTask::setOnlineGainTables()</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;{</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">//check FGBY from trapconfig.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="comment">//check the input parameter of trd-onlinegaincorrection.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="comment">//warn if you have chosen a trapconfig with gaincorrections but chosen not to use them.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">if</span> (mEnableOnlineGainCorrection) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">if</span> (mTrapConfig-&gt;getTrapReg(TrapConfig::kFGBY) == 0) {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(warn) &lt;&lt; <span class="stringliteral">&quot;you have asked to do online gain calibrations but the selected trap config does not have FGBY enabled, so modifying trapconfig to conform to your command line request. OnlineGains will be 1, i.e. no effect.&quot;</span>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iDet = 0; iDet &lt; <a class="code" href="../../df/d06/namespaceo2_1_1trd_1_1constants.html#aa4b36b565f213708276bdd3b66f0144e">MAXCHAMBER</a>; ++iDet) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        mTrapConfig-&gt;setTrapReg(TrapConfig::kFGBY, 1, iDet);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    mCalib-&gt;setOnlineGainTables(mOnlineGainTableName);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">//TODO add some error checking inhere.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment">// gain factors are per MCM</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// allocate the registers accordingly</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ch = 0; ch &lt; <a class="code" href="../../df/d06/namespaceo2_1_1trd_1_1constants.html#a9d646704bed62aeec9cca0476104c642">NADCMCM</a>; ++ch) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      TrapConfig::TrapReg_t regFGAN = (TrapConfig::TrapReg_t)(TrapConfig::kFGA0 + ch);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      TrapConfig::TrapReg_t regFGFN = (TrapConfig::TrapReg_t)(TrapConfig::kFGF0 + ch);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      mTrapConfig-&gt;setTrapRegAlloc(regFGAN, TrapConfig::kAllocByMCM);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      mTrapConfig-&gt;setTrapRegAlloc(regFGFN, TrapConfig::kAllocByMCM);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iDet = 0; iDet &lt; <a class="code" href="../../df/d06/namespaceo2_1_1trd_1_1constants.html#aa4b36b565f213708276bdd3b66f0144e">MAXCHAMBER</a>; ++iDet) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> nRobs = Geometry::getStack(iDet) == 2 ? Geometry::ROBmaxC0() : Geometry::ROBmaxC1();</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../db/de1/CompressedHeader_8h.html#a893df70322200a4732fc54fd51287f0e">rob</a> = 0; <a class="code" href="../../db/de1/CompressedHeader_8h.html#a893df70322200a4732fc54fd51287f0e">rob</a> &lt; nRobs; ++<a class="code" href="../../db/de1/CompressedHeader_8h.html#a893df70322200a4732fc54fd51287f0e">rob</a>) {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../db/de1/CompressedHeader_8h.html#a535b60c8bc5725e8c6d827b339c5a213">mcm</a> = 0; <a class="code" href="../../db/de1/CompressedHeader_8h.html#a535b60c8bc5725e8c6d827b339c5a213">mcm</a> &lt; <a class="code" href="../../df/d06/namespaceo2_1_1trd_1_1constants.html#a67faa598736e3ce6533769d141bb6ac3">NMCMROB</a>; ++<a class="code" href="../../db/de1/CompressedHeader_8h.html#a535b60c8bc5725e8c6d827b339c5a213">mcm</a>) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;          <span class="comment">// set ADC reference voltage</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;          mTrapConfig-&gt;setTrapReg(TrapConfig::kADCDAC, mCalib-&gt;getOnlineGainAdcdac(iDet, <a class="code" href="../../db/de1/CompressedHeader_8h.html#a893df70322200a4732fc54fd51287f0e">rob</a>, <a class="code" href="../../db/de1/CompressedHeader_8h.html#a535b60c8bc5725e8c6d827b339c5a213">mcm</a>), iDet, <a class="code" href="../../db/de1/CompressedHeader_8h.html#a893df70322200a4732fc54fd51287f0e">rob</a>, <a class="code" href="../../db/de1/CompressedHeader_8h.html#a535b60c8bc5725e8c6d827b339c5a213">mcm</a>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;          <span class="comment">// set constants channel-wise</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ch = 0; ch &lt; <a class="code" href="../../df/d06/namespaceo2_1_1trd_1_1constants.html#a9d646704bed62aeec9cca0476104c642">NADCMCM</a>; ++ch) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            TrapConfig::TrapReg_t regFGAN = (TrapConfig::TrapReg_t)(TrapConfig::kFGA0 + ch);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            TrapConfig::TrapReg_t regFGFN = (TrapConfig::TrapReg_t)(TrapConfig::kFGF0 + ch);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            mTrapConfig-&gt;setTrapReg(regFGAN, mCalib-&gt;getOnlineGainFGAN(iDet, <a class="code" href="../../db/de1/CompressedHeader_8h.html#a893df70322200a4732fc54fd51287f0e">rob</a>, <a class="code" href="../../db/de1/CompressedHeader_8h.html#a535b60c8bc5725e8c6d827b339c5a213">mcm</a>, ch), iDet, <a class="code" href="../../db/de1/CompressedHeader_8h.html#a893df70322200a4732fc54fd51287f0e">rob</a>, <a class="code" href="../../db/de1/CompressedHeader_8h.html#a535b60c8bc5725e8c6d827b339c5a213">mcm</a>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            mTrapConfig-&gt;setTrapReg(regFGFN, mCalib-&gt;getOnlineGainFGFN(iDet, <a class="code" href="../../db/de1/CompressedHeader_8h.html#a893df70322200a4732fc54fd51287f0e">rob</a>, <a class="code" href="../../db/de1/CompressedHeader_8h.html#a535b60c8bc5725e8c6d827b339c5a213">mcm</a>, ch), iDet, <a class="code" href="../../db/de1/CompressedHeader_8h.html#a893df70322200a4732fc54fd51287f0e">rob</a>, <a class="code" href="../../db/de1/CompressedHeader_8h.html#a535b60c8bc5725e8c6d827b339c5a213">mcm</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;          }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mTrapConfig-&gt;getTrapReg(TrapConfig::kFGBY) == 1) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(warn) &lt;&lt; <span class="stringliteral">&quot;you have asked to not use online gain calibrations but the selected trap config does have FGBY enabled. Gain calibrations will be 1, i.e. no effect&quot;</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keywordtype">void</span> TRDDPLTrapSimulatorTask::processTRAPchips(<span class="keywordtype">int</span>&amp; nTracklets, std::vector&lt;Tracklet64&gt;&amp; trackletsAccum, std::array&lt;TrapSimulator, NMCMHCMAX&gt;&amp; trapSimulators, std::vector&lt;short&gt;&amp; digitCounts, std::vector&lt;int&gt;&amp; digitIndices)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;{</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="comment">// TRAP processing for current half chamber</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iTrap = 0; iTrap &lt; <a class="code" href="../../df/d06/namespaceo2_1_1trd_1_1constants.html#ae843f9edddf4429afd71769559825a13">NMCMHCMAX</a>; ++iTrap) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">if</span> (!trapSimulators[iTrap].isDataSet()) {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    trapSimulators[iTrap].setBaselines();</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    trapSimulators[iTrap].filter();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    trapSimulators[iTrap].tracklet();</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keyword">auto</span> trackletsOut = trapSimulators[iTrap].getTrackletArray64();</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    nTracklets += trackletsOut.size();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    trackletsAccum.insert(trackletsAccum.end(), trackletsOut.begin(), trackletsOut.end());</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">if</span> (mUseMC) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keyword">auto</span> digitCountOut = trapSimulators[iTrap].getTrackletDigitCount();</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      digitCounts.insert(digitCounts.end(), digitCountOut.begin(), digitCountOut.end());</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <span class="keyword">auto</span> digitIndicesOut = trapSimulators[iTrap].getTrackletDigitIndices();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      digitIndices.insert(digitIndices.end(), digitIndicesOut.begin(), digitIndicesOut.end());</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    trapSimulators[iTrap].reset();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="../../d3/dfd/classo2_1_1trd_1_1TRDDPLTrapSimulatorTask.html#a8d6c53494345b316da9f39c6fc18c170">  134</a></span>&#160;<span class="keywordtype">void</span> TRDDPLTrapSimulatorTask::init(<a class="code" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html">o2::framework::InitContext</a>&amp; ic)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  mTrapConfigName = ic.<a class="code" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#a53b0eb564dc476a5804213809a3dee4c">options</a>().<a class="code" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;std::string&gt;(<span class="stringliteral">&quot;trd-trapconfig&quot;</span>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  mEnableOnlineGainCorrection = ic.<a class="code" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#a53b0eb564dc476a5804213809a3dee4c">options</a>().<a class="code" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;trd-onlinegaincorrection&quot;</span>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  mOnlineGainTableName = ic.<a class="code" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#a53b0eb564dc476a5804213809a3dee4c">options</a>().<a class="code" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;std::string&gt;(<span class="stringliteral">&quot;trd-onlinegaintable&quot;</span>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  mRunNumber = ic.<a class="code" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#a53b0eb564dc476a5804213809a3dee4c">options</a>().<a class="code" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;trd-runnum&quot;</span>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  mEnableTrapConfigDump = ic.<a class="code" href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#a53b0eb564dc476a5804213809a3dee4c">options</a>().<a class="code" href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">get</a>&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;trd-dumptrapconfig&quot;</span>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="comment">//Connect to CCDB for all things needing access to ccdb, trapconfig and online gains</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keyword">auto</span>&amp; ccdbmgr = <a class="code" href="../../da/d73/classo2_1_1ccdb_1_1BasicCCDBManager.html#ac829fb69185587ba263490a43eab67d8">o2::ccdb::BasicCCDBManager::instance</a>();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  mCalib = std::make_unique&lt;Calibrations&gt;();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  mCalib-&gt;getCCDBObjects(mRunNumber);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  initTrapConfig();</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  setOnlineGainTables();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#ifdef WITH_OPENMP</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordtype">int</span> askedThreads = TRDSimParams::Instance().digithreads;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordtype">int</span> maxThreads = omp_get_max_threads();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">if</span> (askedThreads &lt; 0) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    mNumThreads = maxThreads;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    mNumThreads = <a class="code" href="../../d2/d0e/test__Algorithm_8cxx.html#ad0703ae2a355d516ebdb16176a805b61">std::min</a>(maxThreads, askedThreads);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Trap simulation running with &quot;</span> &lt;&lt; mNumThreads &lt;&lt; <span class="stringliteral">&quot; threads &quot;</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="../../d3/dfd/classo2_1_1trd_1_1TRDDPLTrapSimulatorTask.html#a6ad5763aa5229d5a2f0bdb76c0427b0d">  159</a></span>&#160;<span class="keywordtype">void</span> TRDDPLTrapSimulatorTask::run(<a class="code" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html">o2::framework::ProcessingContext</a>&amp; pc)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;{</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="comment">// this method steeres the processing of the TRAP simulation</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;TRD Trap Simulator Device running over incoming message&quot;</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="comment">// input</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keyword">auto</span> digits = pc.<a class="code" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#aee19ae5272d374b797a29a755ad6f2c1">inputs</a>().<a class="code" href="../../df/d24/classo2_1_1framework_1_1InputRecord.html#a1c777bf7e242f8ba17b89275446a1225">get</a>&lt;gsl::span&lt;o2::trd::Digit&gt;&gt;(<span class="stringliteral">&quot;digitinput&quot;</span>);                       <span class="comment">// block of TRD digits</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keyword">auto</span> triggerRecords = pc.<a class="code" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#aee19ae5272d374b797a29a755ad6f2c1">inputs</a>().<a class="code" href="../../df/d24/classo2_1_1framework_1_1InputRecord.html#a1c777bf7e242f8ba17b89275446a1225">get</a>&lt;std::vector&lt;o2::trd::TriggerRecord&gt;&gt;(<span class="stringliteral">&quot;triggerrecords&quot;</span>); <span class="comment">// time and number of digits for each collision</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(<a class="code" href="../../d9/d86/VariantJSONHelpers_8h.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;Received &quot;</span> &lt;&lt; digits.size() &lt;&lt; <span class="stringliteral">&quot; digits from &quot;</span> &lt;&lt; triggerRecords.size() &lt;&lt; <span class="stringliteral">&quot; collisions&quot;</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// load MC information if label processing is enabeld</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d5/db7/classo2_1_1dataformats_1_1ConstMCTruthContainer.html">o2::dataformats::ConstMCTruthContainer&lt;o2::MCCompLabel&gt;</a>* lblDigitsPtr = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keyword">using</span> lblType = std::decay_t&lt;decltype(pc.<a class="code" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#aee19ae5272d374b797a29a755ad6f2c1">inputs</a>().<a class="code" href="../../df/d24/classo2_1_1framework_1_1InputRecord.html#a1c777bf7e242f8ba17b89275446a1225">get</a>&lt;<a class="code" href="../../d5/db7/classo2_1_1dataformats_1_1ConstMCTruthContainer.html">o2::dataformats::ConstMCTruthContainer&lt;o2::MCCompLabel&gt;</a>&gt;(<span class="stringliteral">&quot;&quot;</span>))&gt;;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  std::optional&lt;lblType&gt; lblDigits;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">if</span> (mUseMC) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    lblDigits.emplace(pc.<a class="code" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#aee19ae5272d374b797a29a755ad6f2c1">inputs</a>().<a class="code" href="../../df/d24/classo2_1_1framework_1_1InputRecord.html#a1c777bf7e242f8ba17b89275446a1225">get</a>&lt;<a class="code" href="../../d5/db7/classo2_1_1dataformats_1_1ConstMCTruthContainer.html">o2::dataformats::ConstMCTruthContainer&lt;o2::MCCompLabel&gt;</a>&gt;(<span class="stringliteral">&quot;labelinput&quot;</span>)); <span class="comment">// MC labels associated to the input digits</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    lblDigitsPtr = &amp;lblDigits.value();</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(<a class="code" href="../../d9/d86/VariantJSONHelpers_8h.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;Labels contain &quot;</span> &lt;&lt; lblDigitsPtr-&gt;<a class="code" href="../../d5/db7/classo2_1_1dataformats_1_1ConstMCTruthContainer.html#a6fc9ddce26e15e255148dab605ad0b8f">getNElements</a>() &lt;&lt; <span class="stringliteral">&quot; elements with and indexed size of &quot;</span> &lt;&lt; lblDigitsPtr-&gt;<a class="code" href="../../d5/db7/classo2_1_1dataformats_1_1ConstMCTruthContainer.html#a4477b1b397f8cf3eb18e6401aab3fc00">getIndexedSize</a>();</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">if</span> (lblDigitsPtr-&gt;<a class="code" href="../../d5/db7/classo2_1_1dataformats_1_1ConstMCTruthContainer.html#a4477b1b397f8cf3eb18e6401aab3fc00">getIndexedSize</a>() != digits.size()) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(warn) &lt;&lt; <span class="stringliteral">&quot;Digits and Labels coming into TrapSimulator are of differing sizes, labels will be jibberish. &quot;</span> &lt;&lt; lblDigitsPtr-&gt;<a class="code" href="../../d5/db7/classo2_1_1dataformats_1_1ConstMCTruthContainer.html#a4477b1b397f8cf3eb18e6401aab3fc00">getIndexedSize</a>() &lt;&lt; <span class="stringliteral">&quot;!=&quot;</span> &lt;&lt; digits.size();</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">// output</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  std::vector&lt;Tracklet64&gt; tracklets;                               <span class="comment">// calculated tracklets</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <a class="code" href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html">o2::dataformats::MCTruthContainer&lt;o2::MCCompLabel&gt;</a> lblTracklets; <span class="comment">// MC labels for the tracklets, taken from the digits which make up the tracklet (duplicates are removed)</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keyword">auto</span> timeProcessingStart = <a class="code" href="../../db/d0e/namespaceo2_1_1dcs.html#a2ff5ac95be3b020fec5e671ab6fe0e7b">std::chrono::high_resolution_clock::now</a>(); <span class="comment">// measure total processing time</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="comment">// sort digits by half chamber ID for each collision and keep track in index vector</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keyword">auto</span> sortStart = <a class="code" href="../../db/d0e/namespaceo2_1_1dcs.html#a2ff5ac95be3b020fec5e671ab6fe0e7b">std::chrono::high_resolution_clock::now</a>();</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  std::vector&lt;unsigned int&gt; digitIdxArray(digits.size()); <span class="comment">// digit indices sorted by half chamber ID for each time frame</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  std::iota(digitIdxArray.begin(), digitIdxArray.end(), 0);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; trig : triggerRecords) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    std::stable_sort(<a class="code" href="../../d0/d0a/namespaceo2_1_1tpc.html#a27da508ea0cb1d37fd56a0a598317cde">std::begin</a>(digitIdxArray) + trig.getFirstDigit(), <a class="code" href="../../d0/d0a/namespaceo2_1_1tpc.html#a27da508ea0cb1d37fd56a0a598317cde">std::begin</a>(digitIdxArray) + trig.getNumberOfDigits() + trig.getFirstDigit(),</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                     [&amp;digits](<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a>) { return digits[i].getHCId() &lt; digits[j].getHCId(); });</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keyword">auto</span> sortTime = <a class="code" href="../../db/d0e/namespaceo2_1_1dcs.html#a2ff5ac95be3b020fec5e671ab6fe0e7b">std::chrono::high_resolution_clock::now</a>() - sortStart;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="comment">// prepare data structures for accumulating results per collision</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  std::vector&lt;int&gt; nTracklets(triggerRecords.size());</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  std::vector&lt;std::vector&lt;Tracklet64&gt;&gt; trackletsAccum;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  trackletsAccum.resize(triggerRecords.size());</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  std::vector&lt;std::vector&lt;short&gt;&gt; digitCountsAccum; <span class="comment">// holds the number of digits included in each tracklet (therefore has the same number of elements as trackletsAccum)</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="comment">// digitIndicesAccum holds the global indices of the digits which comprise the tracklets</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="comment">// with the help of digitCountsAccum one can loop through this vector and find the corresponding digit indices for each tracklet</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  std::vector&lt;std::vector&lt;int&gt;&gt; digitIndicesAccum;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  digitCountsAccum.resize(triggerRecords.size());</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  digitIndicesAccum.resize(triggerRecords.size());</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keyword">auto</span> timeParallelStart = <a class="code" href="../../db/d0e/namespaceo2_1_1dcs.html#a2ff5ac95be3b020fec5e671ab6fe0e7b">std::chrono::high_resolution_clock::now</a>();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="preprocessor">#ifdef WITH_OPENMP</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">#pragma omp parallel for schedule(dynamic) num_threads(mNumThreads)</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iTrig = 0; iTrig &lt; triggerRecords.size(); ++iTrig) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">int</span> currHCId = -1;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    std::array&lt;TrapSimulator, NMCMHCMAX&gt; trapSimulators{}; <span class="comment">//the up to 64 trap simulators for a single half chamber</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iDigit = triggerRecords[iTrig].getFirstDigit(); iDigit &lt; (triggerRecords[iTrig].getFirstDigit() + triggerRecords[iTrig].getNumberOfDigits()); ++iDigit) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; digit = &amp;digits[digitIdxArray[iDigit]];</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="keywordflow">if</span> (currHCId &lt; 0) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        currHCId = digit-&gt;getHCId();</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">if</span> (currHCId != digit-&gt;getHCId()) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="comment">// we switch to a new half chamber, process all TRAPs of the previous half chamber which contain data</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        processTRAPchips(nTracklets[iTrig], trackletsAccum[iTrig], trapSimulators, digitCountsAccum[iTrig], digitIndicesAccum[iTrig]);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        currHCId = digit-&gt;getHCId();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="comment">// fill the digit data into the corresponding TRAP chip</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keywordtype">int</span> trapIdx = (digit-&gt;getROB() / 2) * <a class="code" href="../../df/d06/namespaceo2_1_1trd_1_1constants.html#a67faa598736e3ce6533769d141bb6ac3">NMCMROB</a> + digit-&gt;getMCM();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keywordflow">if</span> (!trapSimulators[trapIdx].isDataSet()) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        trapSimulators[trapIdx].init(mTrapConfig, digit-&gt;getDetector(), digit-&gt;getROB(), digit-&gt;getMCM());</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      trapSimulators[trapIdx].setData(digit-&gt;getChannel(), digit-&gt;getADC(), digitIdxArray[iDigit]);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">// take care of the TRAPs for the last half chamber</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    processTRAPchips(nTracklets[iTrig], trackletsAccum[iTrig], trapSimulators, digitCountsAccum[iTrig], digitIndicesAccum[iTrig]);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  } <span class="comment">// done with parallel processing</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keyword">auto</span> parallelTime = <a class="code" href="../../db/d0e/namespaceo2_1_1dcs.html#a2ff5ac95be3b020fec5e671ab6fe0e7b">std::chrono::high_resolution_clock::now</a>() - timeParallelStart;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">// accumulate results and add MC labels</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iTrig = 0; iTrig &lt; triggerRecords.size(); ++iTrig) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span> (mUseMC) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordtype">int</span> currDigitIndex = 0; <span class="comment">// counter for all digits which are associated to tracklets</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keywordtype">int</span> trkltIdxStart = tracklets.size();</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iTrklt = 0; iTrklt &lt; nTracklets[iTrig]; ++iTrklt) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordtype">int</span> tmp = currDigitIndex;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iDigitIndex = tmp; iDigitIndex &lt; tmp + digitCountsAccum[iTrig][iTrklt]; ++iDigitIndex) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;          <span class="keywordflow">if</span> (iDigitIndex == tmp) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <span class="comment">// for the first digit composing the tracklet we don&#39;t need to check for duplicate labels</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            lblTracklets.<a class="code" href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html#a6b31a6b1756d1a7a4a369c0ce9adbb3c">addElements</a>(trkltIdxStart + iTrklt, lblDigitsPtr-&gt;<a class="code" href="../../d5/db7/classo2_1_1dataformats_1_1ConstMCTruthContainer.html#a7470d8518e3ac25e915d77d6d485fe54">getLabels</a>(digitIndicesAccum[iTrig][iDigitIndex]));</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="comment">// in case more than one digit composes the tracklet we add only the labels</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="comment">// from the additional digit(s) which are not already contained in the previous</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="comment">// digit(s)</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <span class="keyword">auto</span> currentLabels = lblTracklets.<a class="code" href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html#a713a86e2eec0d6bcaba4058e135a0fcd">getLabels</a>(trkltIdxStart + iTrklt);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="keyword">auto</span> newLabels = lblDigitsPtr-&gt;<a class="code" href="../../d5/db7/classo2_1_1dataformats_1_1ConstMCTruthContainer.html#a7470d8518e3ac25e915d77d6d485fe54">getLabels</a>(digitIndicesAccum[iTrig][iDigitIndex]);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; newLabel : newLabels) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;              <span class="keywordtype">bool</span> alreadyIn = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;              <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; currLabel : currentLabels) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                <span class="keywordflow">if</span> (currLabel == newLabel) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                  alreadyIn = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;              }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;              <span class="keywordflow">if</span> (!alreadyIn) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                lblTracklets.<a class="code" href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html#a36022cb7d048da8ac05a6b4007ebcd32">addElement</a>(trkltIdxStart + iTrklt, newLabel);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;              }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;          }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;          ++currDigitIndex;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    tracklets.insert(tracklets.end(), trackletsAccum[iTrig].begin(), trackletsAccum[iTrig].end());</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    triggerRecords[iTrig].setTrackletRange(tracklets.size() - nTracklets[iTrig], nTracklets[iTrig]);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keyword">auto</span> processingTime = <a class="code" href="../../db/d0e/namespaceo2_1_1dcs.html#a2ff5ac95be3b020fec5e671ab6fe0e7b">std::chrono::high_resolution_clock::now</a>() - timeProcessingStart;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Trap simulator found &quot;</span> &lt;&lt; tracklets.size() &lt;&lt; <span class="stringliteral">&quot; tracklets from &quot;</span> &lt;&lt; digits.size() &lt;&lt; <span class="stringliteral">&quot; Digits.&quot;</span>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">if</span> (mUseMC) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;In total &quot;</span> &lt;&lt; lblTracklets.<a class="code" href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html#a9690c81caefc79d19cef138fe42de6e2">getNElements</a>() &lt;&lt; <span class="stringliteral">&quot; MC labels are associated to the &quot;</span> &lt;&lt; lblTracklets.<a class="code" href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html#a57d6f0df60f13317e7c91f3a4ce991c5">getIndexedSize</a>() &lt;&lt; <span class="stringliteral">&quot; tracklets&quot;</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Total processing time : &quot;</span> &lt;&lt; std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(processingTime).count() &lt;&lt; <span class="stringliteral">&quot;ms&quot;</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Digit Sorting took: &quot;</span> &lt;&lt; std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(sortTime).count() &lt;&lt; <span class="stringliteral">&quot;ms&quot;</span>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(info) &lt;&lt; <span class="stringliteral">&quot;Processing time for parallel region: &quot;</span> &lt;&lt; std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(parallelTime).count() &lt;&lt; <span class="stringliteral">&quot;ms&quot;</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  pc.<a class="code" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#acf17ebe3e8fd81cefc8babca3e6a9f70">outputs</a>().<a class="code" href="../../df/d82/classo2_1_1framework_1_1DataAllocator.html#a29d71d8c7c50ed05000fb041d879a3d9">snapshot</a>(<a class="code" href="../../d1/dc1/structo2_1_1framework_1_1Output.html">Output</a>{<span class="stringliteral">&quot;TRD&quot;</span>, <span class="stringliteral">&quot;TRACKLETS&quot;</span>, 0, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">Lifetime::Timeframe</a>}, tracklets);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  pc.<a class="code" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#acf17ebe3e8fd81cefc8babca3e6a9f70">outputs</a>().<a class="code" href="../../df/d82/classo2_1_1framework_1_1DataAllocator.html#a29d71d8c7c50ed05000fb041d879a3d9">snapshot</a>(<a class="code" href="../../d1/dc1/structo2_1_1framework_1_1Output.html">Output</a>{<span class="stringliteral">&quot;TRD&quot;</span>, <span class="stringliteral">&quot;TRKTRGRD&quot;</span>, 0, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">Lifetime::Timeframe</a>}, triggerRecords);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordflow">if</span> (mUseMC) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    pc.<a class="code" href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#acf17ebe3e8fd81cefc8babca3e6a9f70">outputs</a>().<a class="code" href="../../df/d82/classo2_1_1framework_1_1DataAllocator.html#a29d71d8c7c50ed05000fb041d879a3d9">snapshot</a>(<a class="code" href="../../d1/dc1/structo2_1_1framework_1_1Output.html">Output</a>{<span class="stringliteral">&quot;TRD&quot;</span>, <span class="stringliteral">&quot;TRKLABELS&quot;</span>, 0, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">Lifetime::Timeframe</a>}, lblTracklets);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a>(<a class="code" href="../../d9/d86/VariantJSONHelpers_8h.html#a92b9653745b1ddd58664de621c944ba2">debug</a>) &lt;&lt; <span class="stringliteral">&quot;TRD Trap Simulator Device exiting&quot;</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;}</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="../../d2/d76/namespaceo2_1_1trd.html#a2e18d05c94cbfcba216ce9db96d9ecf1">  296</a></span>&#160;<a class="code" href="../../d0/d16/structo2_1_1framework_1_1DataProcessorSpec.html">o2::framework::DataProcessorSpec</a> <a class="code" href="../../d2/d76/namespaceo2_1_1trd.html#a2e18d05c94cbfcba216ce9db96d9ecf1">getTRDTrapSimulatorSpec</a>(<span class="keywordtype">bool</span> useMC)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;{</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  std::vector&lt;InputSpec&gt; inputs;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  std::vector&lt;OutputSpec&gt; outputs;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  inputs.emplace_back(<span class="stringliteral">&quot;digitinput&quot;</span>, <span class="stringliteral">&quot;TRD&quot;</span>, <span class="stringliteral">&quot;DIGITS&quot;</span>, 0);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  inputs.emplace_back(<span class="stringliteral">&quot;triggerrecords&quot;</span>, <span class="stringliteral">&quot;TRD&quot;</span>, <span class="stringliteral">&quot;TRGRDIG&quot;</span>, 0);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  outputs.emplace_back(<span class="stringliteral">&quot;TRD&quot;</span>, <span class="stringliteral">&quot;TRACKLETS&quot;</span>, 0, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">Lifetime::Timeframe</a>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  outputs.emplace_back(<span class="stringliteral">&quot;TRD&quot;</span>, <span class="stringliteral">&quot;TRKTRGRD&quot;</span>, 0, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">Lifetime::Timeframe</a>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordflow">if</span> (useMC) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    inputs.emplace_back(<span class="stringliteral">&quot;labelinput&quot;</span>, <span class="stringliteral">&quot;TRD&quot;</span>, <span class="stringliteral">&quot;LABELS&quot;</span>, 0);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    outputs.emplace_back(<span class="stringliteral">&quot;TRD&quot;</span>, <span class="stringliteral">&quot;TRKLABELS&quot;</span>, 0, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">Lifetime::Timeframe</a>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d0/d16/structo2_1_1framework_1_1DataProcessorSpec.html">DataProcessorSpec</a>{<span class="stringliteral">&quot;TRAP&quot;</span>,</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                           inputs,</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                           outputs,</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                           <a class="code" href="../../d4/d5e/structo2_1_1framework_1_1AlgorithmSpec.html">AlgorithmSpec</a>{adaptFromTask&lt;TRDDPLTrapSimulatorTask&gt;(useMC)},</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                           <a class="code" href="../../db/d4f/structOptions.html">Options</a>{</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                             {<span class="stringliteral">&quot;trd-trapconfig&quot;</span>, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ab8ee446f2ea693c249ce60995d55f75ca27118326006d3829667a400ad23d5d98">VariantType::String</a>, <span class="stringliteral">&quot;cf_pg-fpnp32_zs-s16-deh_tb30_trkl-b5n-fs1e24-ht200-qs0e24s24e23-pidlinear-pt100_ptrg.r5549&quot;</span>, {<span class="stringliteral">&quot;TRAP config name&quot;</span>}},</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                             {<span class="stringliteral">&quot;trd-onlinegaincorrection&quot;</span>, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ab8ee446f2ea693c249ce60995d55f75cac26f15e86e3de4c398a8273272aba034">VariantType::Bool</a>, <span class="keyword">false</span>, {<span class="stringliteral">&quot;Apply online gain calibrations, mostly for back checking to run2 by setting FGBY to 0&quot;</span>}},</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                             {<span class="stringliteral">&quot;trd-onlinegaintable&quot;</span>, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ab8ee446f2ea693c249ce60995d55f75ca27118326006d3829667a400ad23d5d98">VariantType::String</a>, <span class="stringliteral">&quot;Krypton_2015-02&quot;</span>, {<span class="stringliteral">&quot;Online gain table to be use, names found in CCDB, obviously trd-onlinegaincorrection must be set as well.&quot;</span>}},</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                             {<span class="stringliteral">&quot;trd-dumptrapconfig&quot;</span>, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ab8ee446f2ea693c249ce60995d55f75cac26f15e86e3de4c398a8273272aba034">VariantType::Bool</a>, <span class="keyword">false</span>, {<span class="stringliteral">&quot;Dump the selected trap configuration at loading time, to text file&quot;</span>}},</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                             {<span class="stringliteral">&quot;trd-runnum&quot;</span>, <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#ab8ee446f2ea693c249ce60995d55f75ca1686a6c336b71b36d77354cea19a8b52">VariantType::Int</a>, -1, {<span class="stringliteral">&quot;Run number to use to anchor simulation to (from Run 2 297595 was used)&quot;</span>}}}};</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;};</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;} <span class="comment">//end namespace trd</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;} <span class="comment">//end namespace o2</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclasso2_1_1dataformats_1_1MCTruthContainer_html_a57d6f0df60f13317e7c91f3a4ce991c5"><div class="ttname"><a href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html#a57d6f0df60f13317e7c91f3a4ce991c5">o2::dataformats::MCTruthContainer::getIndexedSize</a></div><div class="ttdeci">size_t getIndexedSize() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d14/MCTruthContainer_8h_source.html#l00142">MCTruthContainer.h:142</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1ProcessingContext_html_aee19ae5272d374b797a29a755ad6f2c1"><div class="ttname"><a href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#aee19ae5272d374b797a29a755ad6f2c1">o2::framework::ProcessingContext::inputs</a></div><div class="ttdeci">InputRecord &amp; inputs()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6a/ProcessingContext_8h_source.html#l00033">ProcessingContext.h:33</a></div></div>
<div class="ttc" id="anamespaceo2_1_1trd_html_a2e18d05c94cbfcba216ce9db96d9ecf1"><div class="ttname"><a href="../../d2/d76/namespaceo2_1_1trd.html#a2e18d05c94cbfcba216ce9db96d9ecf1">o2::trd::getTRDTrapSimulatorSpec</a></div><div class="ttdeci">o2::framework::DataProcessorSpec getTRDTrapSimulatorSpec(bool useMC)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de7/TRDTrapSimulatorSpec_8cxx_source.html#l00296">TRDTrapSimulatorSpec.cxx:296</a></div></div>
<div class="ttc" id="aDataProcessorSpec_8h_html"><div class="ttname"><a href="../../d0/df4/DataProcessorSpec_8h.html">DataProcessorSpec.h</a></div></div>
<div class="ttc" id="aControlService_8h_html"><div class="ttname"><a href="../../d2/d43/ControlService_8h.html">ControlService.h</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1ConstMCTruthContainer_html_a4477b1b397f8cf3eb18e6401aab3fc00"><div class="ttname"><a href="../../d5/db7/classo2_1_1dataformats_1_1ConstMCTruthContainer.html#a4477b1b397f8cf3eb18e6401aab3fc00">o2::dataformats::ConstMCTruthContainer::getIndexedSize</a></div><div class="ttdeci">size_t getIndexedSize() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da6/ConstMCTruthContainer_8h_source.html#l00063">ConstMCTruthContainer.h:63</a></div></div>
<div class="ttc" id="anamespaceo2_1_1tpc_html_a27da508ea0cb1d37fd56a0a598317cde"><div class="ttname"><a href="../../d0/d0a/namespaceo2_1_1tpc.html#a27da508ea0cb1d37fd56a0a598317cde">o2::tpc::begin</a></div><div class="ttdeci">Enum&lt; T &gt;::Iterator begin(Enum&lt; T &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d73/Defs_8h_source.html#l00150">Defs.h:150</a></div></div>
<div class="ttc" id="aclasso2_1_1trd_1_1TrapConfig_html"><div class="ttname"><a href="../../d7/dae/classo2_1_1trd_1_1TrapConfig.html">o2::trd::TrapConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/TrapConfig_8h_source.html#l00036">TrapConfig.h:36</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1InitContext_html"><div class="ttname"><a href="../../d4/d07/classo2_1_1framework_1_1InitContext.html">o2::framework::InitContext</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2b/InitContext_8h_source.html#l00022">InitContext.h:22</a></div></div>
<div class="ttc" id="anamespaceo2_1_1framework_html_ab8ee446f2ea693c249ce60995d55f75ca27118326006d3829667a400ad23d5d98"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#ab8ee446f2ea693c249ce60995d55f75ca27118326006d3829667a400ad23d5d98">o2::framework::VariantType::String</a></div><div class="ttdeci">@ String</div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1MCTruthContainer_html_a6b31a6b1756d1a7a4a369c0ce9adbb3c"><div class="ttname"><a href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html#a6b31a6b1756d1a7a4a369c0ce9adbb3c">o2::dataformats::MCTruthContainer::addElements</a></div><div class="ttdeci">void addElements(uint32_t dataindex, gsl::span&lt; CompatibleLabel &gt; elements)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d14/MCTruthContainer_8h_source.html#l00215">MCTruthContainer.h:215</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1ConstMCTruthContainer_html_a7470d8518e3ac25e915d77d6d485fe54"><div class="ttname"><a href="../../d5/db7/classo2_1_1dataformats_1_1ConstMCTruthContainer.html#a7470d8518e3ac25e915d77d6d485fe54">o2::dataformats::ConstMCTruthContainer::getLabels</a></div><div class="ttdeci">gsl::span&lt; const TruthElement &gt; getLabels(uint32_t dataindex) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da6/ConstMCTruthContainer_8h_source.html#l00052">ConstMCTruthContainer.h:52</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1ConfigParamRegistry_html_ae86d66faf0b5cdc42a725d722be54d5e"><div class="ttname"><a href="../../df/d6f/classo2_1_1framework_1_1ConfigParamRegistry.html#ae86d66faf0b5cdc42a725d722be54d5e">o2::framework::ConfigParamRegistry::get</a></div><div class="ttdeci">T get(const char *key) const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc6/ConfigParamRegistry_8h_source.html#l00071">ConfigParamRegistry.h:71</a></div></div>
<div class="ttc" id="aConfigParamRegistry_8h_html"><div class="ttname"><a href="../../de/dc6/ConfigParamRegistry_8h.html">ConfigParamRegistry.h</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1DataAllocator_html_a29d71d8c7c50ed05000fb041d879a3d9"><div class="ttname"><a href="../../df/d82/classo2_1_1framework_1_1DataAllocator.html#a29d71d8c7c50ed05000fb041d879a3d9">o2::framework::DataAllocator::snapshot</a></div><div class="ttdeci">void snapshot(const Output &amp;spec, T const &amp;object)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d28/DataAllocator_8h_source.html#l00279">DataAllocator.h:279</a></div></div>
<div class="ttc" id="anamespaceo2_1_1trd_1_1constants_html_ae843f9edddf4429afd71769559825a13"><div class="ttname"><a href="../../df/d06/namespaceo2_1_1trd_1_1constants.html#ae843f9edddf4429afd71769559825a13">o2::trd::constants::NMCMHCMAX</a></div><div class="ttdeci">constexpr int NMCMHCMAX</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc2/DataFormats_2Detectors_2TRD_2include_2DataFormatsTRD_2Constants_8h_source.html#l00044">Constants.h:44</a></div></div>
<div class="ttc" id="anamespaceo2_1_1dcs_html_a2ff5ac95be3b020fec5e671ab6fe0e7b"><div class="ttname"><a href="../../db/d0e/namespaceo2_1_1dcs.html#a2ff5ac95be3b020fec5e671ab6fe0e7b">o2::dcs::now</a></div><div class="ttdeci">uint64_t now() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d52/Clock_8h_source.html#l00069">Clock.h:69</a></div></div>
<div class="ttc" id="anamespaceo2_1_1framework_html_ab8ee446f2ea693c249ce60995d55f75ca1686a6c336b71b36d77354cea19a8b52"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#ab8ee446f2ea693c249ce60995d55f75ca1686a6c336b71b36d77354cea19a8b52">o2::framework::VariantType::Int</a></div><div class="ttdeci">@ Int</div></div>
<div class="ttc" id="aGPUCommonAlgorithm_8h_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0b/GPUCommonAlgorithm_8h_source.html#l00412">GPUCommonAlgorithm.h:412</a></div></div>
<div class="ttc" id="aTRDTrapSimulatorSpec_8h_html"><div class="ttname"><a href="../../dc/d96/TRDTrapSimulatorSpec_8h.html">TRDTrapSimulatorSpec.h</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1InputRecord_html_a1c777bf7e242f8ba17b89275446a1225"><div class="ttname"><a href="../../df/d24/classo2_1_1framework_1_1InputRecord.html#a1c777bf7e242f8ba17b89275446a1225">o2::framework::InputRecord::get</a></div><div class="ttdeci">decltype(auto) get(R binding, int part=0) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d5c/InputRecord_8h_source.html#l00202">InputRecord.h:202</a></div></div>
<div class="ttc" id="astructo2_1_1framework_1_1AlgorithmSpec_html"><div class="ttname"><a href="../../d4/d5e/structo2_1_1framework_1_1AlgorithmSpec.html">o2::framework::AlgorithmSpec</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d14/AlgorithmSpec_8h_source.html#l00043">AlgorithmSpec.h:43</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1MCTruthContainer_html_a9690c81caefc79d19cef138fe42de6e2"><div class="ttname"><a href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html#a9690c81caefc79d19cef138fe42de6e2">o2::dataformats::MCTruthContainer::getNElements</a></div><div class="ttdeci">size_t getNElements() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d14/MCTruthContainer_8h_source.html#l00144">MCTruthContainer.h:144</a></div></div>
<div class="ttc" id="aTRDSimParams_8h_html"><div class="ttname"><a href="../../d5/dad/TRDSimParams_8h.html">TRDSimParams.h</a></div></div>
<div class="ttc" id="aCompressedHeader_8h_html_a893df70322200a4732fc54fd51287f0e"><div class="ttname"><a href="../../db/de1/CompressedHeader_8h.html#a893df70322200a4732fc54fd51287f0e">rob</a></div><div class="ttdeci">uint16_t rob</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de1/CompressedHeader_8h_source.html#l00098">CompressedHeader.h:98</a></div></div>
<div class="ttc" id="astructo2_1_1framework_1_1DataProcessorSpec_html"><div class="ttname"><a href="../../d0/d16/structo2_1_1framework_1_1DataProcessorSpec.html">o2::framework::DataProcessorSpec</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/DataProcessorSpec_8h_source.html#l00036">DataProcessorSpec.h:36</a></div></div>
<div class="ttc" id="anamespaceo2_html"><div class="ttname"><a href="../../d4/d7c/namespaceo2.html">o2</a></div><div class="ttdoc">information complementary to a CCDB object (path, metadata, startTimeValidity, endTimeValidity etc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d24/BitstreamReader_8h_source.html#l00023">BitstreamReader.h:23</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1ConstMCTruthContainer_html"><div class="ttname"><a href="../../d5/db7/classo2_1_1dataformats_1_1ConstMCTruthContainer.html">o2::dataformats::ConstMCTruthContainer</a></div><div class="ttdoc">A read-only version of MCTruthContainer allowing for storage optimisation.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/ClusterNative_8h_source.html#l00031">ClusterNative.h:31</a></div></div>
<div class="ttc" id="astructOptions_html"><div class="ttname"><a href="../../db/d4f/structOptions.html">Options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dea/TreeMergerTool_8cxx_source.html#l00026">TreeMergerTool.cxx:26</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1MCTruthContainer_html_a36022cb7d048da8ac05a6b4007ebcd32"><div class="ttname"><a href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html#a36022cb7d048da8ac05a6b4007ebcd32">o2::dataformats::MCTruthContainer::addElement</a></div><div class="ttdeci">void addElement(uint32_t dataindex, TruthElement const &amp;element)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d14/MCTruthContainer_8h_source.html#l00189">MCTruthContainer.h:189</a></div></div>
<div class="ttc" id="aBasicCCDBManager_8h_html"><div class="ttname"><a href="../../d5/df3/BasicCCDBManager_8h.html">BasicCCDBManager.h</a></div></div>
<div class="ttc" id="aGPUCommonLogger_8h_html_aea3d0edfe28fc0325c636b2b33f0527a"><div class="ttname"><a href="../../df/d5b/GPUCommonLogger_8h.html#aea3d0edfe28fc0325c636b2b33f0527a">LOG</a></div><div class="ttdeci">#define LOG(type)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5b/GPUCommonLogger_8h_source.html#l00056">GPUCommonLogger.h:56</a></div></div>
<div class="ttc" id="aclasso2_1_1trd_1_1TrapConfig_html_af315cbe9e556dc74386fde7f45e94d95"><div class="ttname"><a href="../../d7/dae/classo2_1_1trd_1_1TrapConfig.html#af315cbe9e556dc74386fde7f45e94d95">o2::trd::TrapConfig::DumpTrapConfig2File</a></div><div class="ttdeci">void DumpTrapConfig2File(std::string filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d55/TrapConfig_8cxx_source.html#l01026">TrapConfig.cxx:1026</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1InitContext_html_a53b0eb564dc476a5804213809a3dee4c"><div class="ttname"><a href="../../d4/d07/classo2_1_1framework_1_1InitContext.html#a53b0eb564dc476a5804213809a3dee4c">o2::framework::InitContext::options</a></div><div class="ttdeci">ConfigParamRegistry const  &amp; options()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2b/InitContext_8h_source.html#l00031">InitContext.h:31</a></div></div>
<div class="ttc" id="atest__Algorithm_8cxx_html_ad0703ae2a355d516ebdb16176a805b61"><div class="ttname"><a href="../../d2/d0e/test__Algorithm_8cxx.html#ad0703ae2a355d516ebdb16176a805b61">min</a></div><div class="ttdeci">const size_t min</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0e/test__Algorithm_8cxx_source.html#l00043">test_Algorithm.cxx:43</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1MCTruthContainer_html"><div class="ttname"><a href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html">o2::dataformats::MCTruthContainer&lt; o2::MCCompLabel &gt;</a></div></div>
<div class="ttc" id="aVariantJSONHelpers_8h_html_a92b9653745b1ddd58664de621c944ba2"><div class="ttname"><a href="../../d9/d86/VariantJSONHelpers_8h.html#a92b9653745b1ddd58664de621c944ba2">debug</a></div><div class="ttdeci">std::ostringstream debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d86/VariantJSONHelpers_8h_source.html#l00303">VariantJSONHelpers.h:303</a></div></div>
<div class="ttc" id="anamespaceo2_1_1trd_1_1constants_html_aa4b36b565f213708276bdd3b66f0144e"><div class="ttname"><a href="../../df/d06/namespaceo2_1_1trd_1_1constants.html#aa4b36b565f213708276bdd3b66f0144e">o2::trd::constants::MAXCHAMBER</a></div><div class="ttdeci">constexpr int MAXCHAMBER</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc2/DataFormats_2Detectors_2TRD_2include_2DataFormatsTRD_2Constants_8h_source.html#l00029">Constants.h:29</a></div></div>
<div class="ttc" id="aDataFormats_2Detectors_2TRD_2include_2DataFormatsTRD_2Digit_8h_html"><div class="ttname"><a href="../../df/d6a/DataFormats_2Detectors_2TRD_2include_2DataFormatsTRD_2Digit_8h.html">Digit.h</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1MCTruthContainer_html_a713a86e2eec0d6bcaba4058e135a0fcd"><div class="ttname"><a href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html#a713a86e2eec0d6bcaba4058e135a0fcd">o2::dataformats::MCTruthContainer::getLabels</a></div><div class="ttdeci">gsl::span&lt; TruthElement &gt; getLabels(uint32_t dataindex)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d14/MCTruthContainer_8h_source.html#l00153">MCTruthContainer.h:153</a></div></div>
<div class="ttc" id="anamespaceo2_1_1trd_1_1constants_html_a9d646704bed62aeec9cca0476104c642"><div class="ttname"><a href="../../df/d06/namespaceo2_1_1trd_1_1constants.html#a9d646704bed62aeec9cca0476104c642">o2::trd::constants::NADCMCM</a></div><div class="ttdeci">constexpr int NADCMCM</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc2/DataFormats_2Detectors_2TRD_2include_2DataFormatsTRD_2Constants_8h_source.html#l00049">Constants.h:49</a></div></div>
<div class="ttc" id="aTrapConfig_8h_html"><div class="ttname"><a href="../../d8/dbb/TrapConfig_8h.html">TrapConfig.h</a></div></div>
<div class="ttc" id="aConstMCTruthContainer_8h_html"><div class="ttname"><a href="../../d1/da6/ConstMCTruthContainer_8h.html">ConstMCTruthContainer.h</a></div><div class="ttdoc">A const (ready only) version of MCTruthContainer.</div></div>
<div class="ttc" id="aCompressedHeader_8h_html_a535b60c8bc5725e8c6d827b339c5a213"><div class="ttname"><a href="../../db/de1/CompressedHeader_8h.html#a535b60c8bc5725e8c6d827b339c5a213">mcm</a></div><div class="ttdeci">uint16_t mcm</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de1/CompressedHeader_8h_source.html#l00097">CompressedHeader.h:97</a></div></div>
<div class="ttc" id="anamespaceo2_1_1framework_html"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html">o2::framework</a></div><div class="ttdoc">Defining PrimaryVertex explicitly as messageable.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfa/Digits_8h_source.html#l00074">Digits.h:74</a></div></div>
<div class="ttc" id="anamespaceo2_1_1framework_html_a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#a6efce2a67e1fcd2dcb80c33d8c287239ae1a49a5ea702f54021c844b78139837d">o2::framework::Lifetime::Timeframe</a></div><div class="ttdeci">@ Timeframe</div><div class="ttdoc">A message which is associated to a timeframe. DPL will wait indefinitely for it by default.</div></div>
<div class="ttc" id="aRawData_8h_html_a5ee9234d389c6be7f0a75b450da09722"><div class="ttname"><a href="../../dc/d62/RawData_8h.html#a5ee9234d389c6be7f0a75b450da09722">j</a></div><div class="ttdeci">uint32_t j</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d62/RawData_8h_source.html#l00314">RawData.h:314</a></div></div>
<div class="ttc" id="anamespaceo2_1_1framework_html_ab8ee446f2ea693c249ce60995d55f75cac26f15e86e3de4c398a8273272aba034"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#ab8ee446f2ea693c249ce60995d55f75cac26f15e86e3de4c398a8273272aba034">o2::framework::VariantType::Bool</a></div><div class="ttdeci">@ Bool</div></div>
<div class="ttc" id="aMCCompLabel_8h_html"><div class="ttname"><a href="../../d7/dcd/MCCompLabel_8h.html">MCCompLabel.h</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1ConstMCTruthContainer_html_a6fc9ddce26e15e255148dab605ad0b8f"><div class="ttname"><a href="../../d5/db7/classo2_1_1dataformats_1_1ConstMCTruthContainer.html#a6fc9ddce26e15e255148dab605ad0b8f">o2::dataformats::ConstMCTruthContainer::getNElements</a></div><div class="ttdeci">size_t getNElements() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da6/ConstMCTruthContainer_8h_source.html#l00066">ConstMCTruthContainer.h:66</a></div></div>
<div class="ttc" id="astructo2_1_1framework_1_1Output_html"><div class="ttname"><a href="../../d1/dc1/structo2_1_1framework_1_1Output.html">o2::framework::Output</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/Output_8h_source.html#l00029">Output.h:29</a></div></div>
<div class="ttc" id="aTRD_2include_2DataFormatsTRD_2TriggerRecord_8h_html"><div class="ttname"><a href="../../d9/dbe/TRD_2include_2DataFormatsTRD_2TriggerRecord_8h.html">TriggerRecord.h</a></div></div>
<div class="ttc" id="aclasso2_1_1ccdb_1_1BasicCCDBManager_html_ac829fb69185587ba263490a43eab67d8"><div class="ttname"><a href="../../da/d73/classo2_1_1ccdb_1_1BasicCCDBManager.html#ac829fb69185587ba263490a43eab67d8">o2::ccdb::BasicCCDBManager::instance</a></div><div class="ttdeci">static BasicCCDBManager &amp; instance()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df3/BasicCCDBManager_8h_source.html#l00254">BasicCCDBManager.h:254</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1ProcessingContext_html"><div class="ttname"><a href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html">o2::framework::ProcessingContext</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6a/ProcessingContext_8h_source.html#l00023">ProcessingContext.h:23</a></div></div>
<div class="ttc" id="anamespaceo2_1_1trd_1_1constants_html_a67faa598736e3ce6533769d141bb6ac3"><div class="ttname"><a href="../../df/d06/namespaceo2_1_1trd_1_1constants.html#a67faa598736e3ce6533769d141bb6ac3">o2::trd::constants::NMCMROB</a></div><div class="ttdeci">constexpr int NMCMROB</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc2/DataFormats_2Detectors_2TRD_2include_2DataFormatsTRD_2Constants_8h_source.html#l00043">Constants.h:43</a></div></div>
<div class="ttc" id="aclasso2_1_1framework_1_1ProcessingContext_html_acf17ebe3e8fd81cefc8babca3e6a9f70"><div class="ttname"><a href="../../d3/db7/classo2_1_1framework_1_1ProcessingContext.html#acf17ebe3e8fd81cefc8babca3e6a9f70">o2::framework::ProcessingContext::outputs</a></div><div class="ttdeci">DataAllocator &amp; outputs()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6a/ProcessingContext_8h_source.html#l00035">ProcessingContext.h:35</a></div></div>
<div class="ttc" id="aLifetime_8h_html"><div class="ttname"><a href="../../dc/dca/Lifetime_8h.html">Lifetime.h</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_051dca18e802f8e9474f2e30d29c04e0.html">Detectors</a></li><li class="navelem"><a class="el" href="../../dir_69dd0583e11051991bf4c0cf23c50933.html">TRD</a></li><li class="navelem"><a class="el" href="../../dir_184e1d06e85fb151746c3bdf717cc8ad.html">workflow</a></li><li class="navelem"><a class="el" href="../../dir_19cbc61730528058d9acd8ae2ca70332.html">src</a></li><li class="navelem"><a class="el" href="../../dd/de7/TRDTrapSimulatorSpec_8cxx.html">TRDTrapSimulatorSpec.cxx</a></li>
    <li class="footer">Generated on Mon Feb 14 2022 05:40:56 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
